<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">                          
<!--<![endif]-->
					<head>
				    <meta charset="UTF-8" />
				    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" />
            				    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
				    <link rel="profile" href="http://gmpg.org/xfn/11" />
				    <link rel="pingback" href="http://sametmax.com/xmlrpc.php" />

				   <!-- Icons font support for IE6-7  -->
				    <!--[if lt IE 8]>
				      <script src="http://sametmax.com/wp-content/themes/customizr/inc/assets/css/fonts/lte-ie7.js"></script>
				    <![endif]-->
				    <style type="text/css" id="customizr-inline-fonts">@font-face{font-family:genericons;src:url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.eot');src:url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.eot%3F') format('embedded-opentype'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.woff') format('woff'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.ttf') format('truetype'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.svg') format('svg')}@font-face{font-family:entypo;src:url('http://sametmax.com/wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.eot);src:url(http://sametmax.com/wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.eot?#iefix') format('embedded-opentype'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.woff') format('woff'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.ttf') format('truetype'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.svg') format('svg')}</style><title>L&#8217;encoding en Python, une bonne fois pour toute &#8211; Sam &amp; Max</title>
<link rel='dns-prefetch' href='http://s0.wp.com/' />
<link rel='dns-prefetch' href='http://secure.gravatar.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max &raquo; Feed" href="../feed.1" />
<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max &raquo; Comments Feed" href="../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max &raquo; L&#8217;encoding en Python, une bonne fois pour toute Comments Feed" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/sametmax.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.7"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56692,8205,9792,65039],[55357,56692,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='contact-form-7-css'  href='../wp-content/plugins/contact-form-7/includes/css/styles.css%3Fver=5.0.2.css' type='text/css' media='all' />
<link rel='stylesheet' id='wp-polls-css'  href='../wp-content/plugins/wp-polls/polls-css.css%3Fver=2.73.8.css' type='text/css' media='all' />
<style id='wp-polls-inline-css' type='text/css'>
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('../wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel='stylesheet' id='wp-syntax-css-css'  href='../wp-content/plugins/wp-syntax/css/wp-syntax.css%3Fver=1.1.css' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='../wp-includes/css/dashicons.min.css%3Fver=4.9.7.css' type='text/css' media='all' />
<link rel='stylesheet' id='customizr-skin-css'  href='../wp-content/themes/customizr/inc/assets/css/black2.min.css%3Fver=3.2.10.css' type='text/css' media='all' />
<style id='customizr-skin-inline-css' type='text/css'>

.sticky-enabled .tc-shrink-on .site-logo img {
						height:30px!important;width:auto!important
					}

					.sticky-enabled .tc-shrink-on .brand .site-title {
						font-size:0.6em;opacity:0.8;line-height:1.2em
					}

.tc-rectangular-thumb {
            max-height: 250px;
            height :250px
          }

          .single .tc-rectangular-thumb {
            max-height: 250px;
            height :250px
          }


</style>
<link rel='stylesheet' id='customizr-style-css'  href='../wp-content/themes/customizr/style.css%3Fver=3.2.10.css' type='text/css' media='all' />
<link rel='stylesheet' id='fancyboxcss-css'  href='../wp-content/themes/customizr/inc/assets/js/fancybox/jquery.fancybox-1.3.4.min.css%3Fver=4.9.7.css' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-widget-social-icons-styles-css'  href='../wp-content/plugins/jetpack/modules/widgets/social-icons/social-icons.css%3Fver=20170506.css' type='text/css' media='all' />
<link rel='stylesheet' id='social-logos-css'  href='../wp-content/plugins/jetpack/_inc/social-logos/social-logos.min.css%3Fver=1.css' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='../wp-content/plugins/jetpack/css/jetpack.css%3Fver=6.3.2.css' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/jquery/jquery.js%3Fver=1.12.4'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/jquery-migrate.min.js%3Fver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var TCParams = {"FancyBoxState":"1","FancyBoxAutoscale":"1","SliderName":"","SliderDelay":"","SliderHover":"1","SmoothScroll":"linear","ReorderBlocks":"1","CenterSlides":"1","HasComments":"","LeftSidebarClass":".span3.left.tc-sidebar","RightSidebarClass":".span3.right.tc-sidebar","LoadModernizr":"1","stickyCustomOffset":"0","stickyHeader":"1","dropdowntoViewport":"0","timerOnScrollAllBrowsers":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/themes/customizr/inc/assets/js/tc-scripts.min.js%3Fver=3.2.10'></script>
<link rel='https://api.w.org/' href='../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://sametmax.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Deux conneries à la seconde' href='../deux-conneries-a-la-seconde/index.html' />
<link rel='next' title='Créer un snippet pour Sublime Text' href='../creer-un-snippet-pour-sublime-text/index.html' />
<meta name="generator" content="WordPress 4.9.7" />
<link rel="canonical" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html" />
<link rel='shortlink' href='https://wp.me/p2ckfk-1vW' />
<link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embed%3Furl=http:%252F%252Fsametmax.com%252Flencoding-en-python-une-bonne-fois-pour-toute%252F" />
<link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed%3Furl=http:%252F%252Fsametmax.com%252Flencoding-en-python-une-bonne-fois-pour-toute%252F&amp;format=xml" />

<link rel='dns-prefetch' href='http://v0.wordpress.com/'/>
<style type="text/css" media="all">
/* <![CDATA[ */
@import url("../wp-content/plugins/wp-table-reloaded/css/plugin.css%3Fver=1.9.4.css");
@import url("../wp-content/plugins/wp-table-reloaded/css/datatables.css%3Fver=1.9.4.css");
/* ]]> */
</style><link rel="shortcut icon" href="../wp-content/uploads/2015/06/favicon.png" type="image/png">
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="L&#8217;encoding en Python, une bonne fois pour toute" />
<meta property="og:url" content="http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/" />
<meta property="og:description" content="A la fin de cet article, vous saurez vous sortir de toutes les situations merdiques liées aux encodages." />
<meta property="article:published_time" content="2013-04-21T07:02:43+00:00" />
<meta property="article:modified_time" content="2018-07-03T09:47:37+00:00" />
<meta property="og:site_name" content="Sam &amp; Max" />
<meta property="og:image" content="http://sametmax.com/wp-content/uploads/2013/04/OxpEP.jpg" />
<meta property="og:image:width" content="389" />
<meta property="og:image:height" content="528" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:text:title" content="L&#8217;encoding en Python, une bonne fois pour toute" />
<meta name="twitter:image" content="http://sametmax.com/wp-content/uploads/2013/04/OxpEP.jpg?w=640" />
<meta name="twitter:card" content="summary_large_image" />

<!-- End Jetpack Open Graph Tags -->
			<link rel="stylesheet" type="text/css" id="wp-custom-css" href="../index.html%3Fcustom-css=3b3670f11a.css" />
						    <!--Icons size hack for IE8 and less -->
				    <!--[if lt IE 9]>
				      <link href="http://sametmax.com/wp-content/themes/customizr/inc/assets/css/fonts/ie8-hacks.css" rel="stylesheet" type="text/css"/>
				    <![endif]-->
				</head>
				
	<body class="post-template-default single single-post postid-5824 single-format-standard tc-fade-hover-links tc-sticky-header tc-transparent-on-scroll" itemscope itemtype="http://schema.org/WebPage">
		
		
	   	<header class="tc-header clearfix row-fluid tc-tagline-off tc-title-logo-on  tc-shrink-on tc-menu-on logo-left" role="banner">
			      <div class="brand span3 pull-left ">

        <h1><a class="site-title" href="../index.html" title="Sam &amp; Max | Du code, du cul">Sam &amp; Max</a></h1>
      </div> <!-- brand span3 pull-left -->
      <div class="container outside"><h2 class="site-description">Du code, du cul</h2></div>      	<div class="navbar-wrapper clearfix span9 tc-submenu-fade tc-submenu-move tc-open-on-hover left">
        	<div class="navbar resp">
          		<div class="navbar-inner" role="navigation">
            		<div class="row-fluid">
              		<div class="social-block span5" ><a class="social-icon icon-feed" href="../feed/rss/index.html" title="Subscribe to my rss feed"  ></a></div><h2 class="span7 inside site-description">Du code, du cul</h2><button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="nav-collapse collapse tc-hover-menu-wrapper"><div class="menu-top-menu-container"><ul id="menu-top-menu-2" class="nav tc-hover-menu"><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1702"><a href="../category/programmation/index.html">Prog</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1703"><a href="../category/administration-system/index.html">Admin Sys</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1704"><a href="../category/philo-et-culture/index.html">Philo &#038; culture</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1706"><a href="../category/cul/index.html">Cul</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3340"><a href="../cours-et-tutos/index.html">Cours &#038; tutos</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1707"><a title="Les meilleurs blogs du Web" href="http://multiboards.net/">Multiboards</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12415"><a href="../planet-python-fr/index.html">Veille Python Fr</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15634"><a href="http://indexerror.net">Questions Python</a></li>
</ul></div></div>          			</div>
          		</div><!-- /.navbar-inner -->
        	</div><!-- /.navbar resp -->
      	</div><!-- /.navbar-wrapper -->
    			</header>
		<div id="tc-reset-margin-top" class="container-fluid" style="margin-top:103px"></div><div id="main-wrapper" class="container">

        
    <div class="container" role="main">
        <div class="row column-content-wrapper">

                            
                <div id="content" class="span9 article-container">
                    
                    
                        
                                                                                    
                                                                    <article id="post-5824" class="row-fluid post-5824 post type-post status-publish format-standard has-post-thumbnail hentry category-programmation tag-ascii tag-encoding tag-python tag-unicode tag-utf8">
                                                <header class="entry-header">
          <h1 class="entry-title format-icon">L&#8217;encoding en Python, une bonne fois pour toute</h1>            <div class="entry-meta">
                This entry was posted in <a class="btn btn-mini" href="../category/programmation/index.html" title="View all posts in Programmation"> Programmation </a> and tagged <a class="btn btn-mini btn-tag" href="../tag/ascii/index.html" title="View all posts in ascii"> ascii </a><a class="btn btn-mini btn-tag" href="../tag/encoding/index.html" title="View all posts in encoding"> encoding </a><a class="btn btn-mini btn-tag" href="../tag/python/index.html" title="View all posts in python"> python </a><a class="btn btn-mini btn-tag" href="../tag/unicode/index.html" title="View all posts in unicode"> unicode </a><a class="btn btn-mini btn-tag" href="../tag/utf8/index.html" title="View all posts in utf8"> utf8 </a> on <a href="../2013/04/21/index.html" title="07:02" rel="bookmark"><time class="entry-date updated" datetime="2013-04-21T07:02:43+00:00">21/04/2013</time></a> <span class="by-author">by <span class="author vcard"><a class="url fn n" href="../author/sam/index.html" title="View all posts by Sam" rel="author">Sam</a></span></span>             </div><!-- .entry-meta -->
            <hr class="featurette-divider __before_content">        </header>
            

          <section class="entry-content ">
              <p>J&#8217;avais oublié la zik, je rajoute:</p>
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/i-MAErg8q0w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></p>
<p>Vous avez tous un jour eu l&#8217;erreur suivante :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #008000;">UnicodeDecodeError</span>: <span style="color: #483d8b;">'machine'</span> codec can<span style="color: #483d8b;">'t decode character '</span>trucmuche<span style="color: #483d8b;">' in position x: ordinal not in range(z)</span></pre></td></tr></table><p class="theCode" style="display:none;">UnicodeDecodeError: 'machine' codec can't decode character 'trucmuche' in position x: ordinal not in range(z)</p></div>

<p>Et là, pour vous en sortir, vous en avez chié des ronds de pâté.</p>
<p>Le problème vient du fait que la plupart du temps, ignorer l&#8217;encoding marche : nous travaillons dans des environnements homogènes et toujours avec des données dans le même format, ou un format plus ou moins compatible.</p>
<p>Mais le texte, c&#8217;est compliqué, terriblement compliqué, et le jour où ça se gâte, si vous ne savez pas ce que vous faites, vous ne vous en sortirez pas.</p>
<p>C&#8217;est d&#8217;autant plus vrai en Python car :</p>
<ul>
<li>Par défaut, Python plante sur les erreurs d&#8217;encoding là où d&#8217;autres langages (comme le PHP) se débrouillent pour vous sortir un truc (qui ne veut rien dire, qui peut corrompre toute votre base de données, mais qui ne plante pas).</li>
<li>Python est utilisé dans des environnements hétérogènes. Quand vous codez en JS sur le navigateur, vous n&#8217;avez presque jamais à vous soucier de l&#8217;encoding : le browser gère quasiment tout pour vous. En Python dès que vous allez lire un fichier et l&#8217;afficher dans un terminal, cela fait potentiellement 3 encoding différents.</li>
<li>Python 2.7 a des réglages par défaut très stricts, et pas forcément adaptés à notre informatique moderne (fichier de code en ASCII par exemple).</li>
</ul>
<p>A la fin de cet article, vous saurez vous sortir de toutes les situations merdiques liées aux encodages.</p>
<h2>Règle numéro 1 : Le texte brut n&#8217;existe pas.</h2>
<p>Quand vous avez du texte quelque part (un terminal, un fichier, une base de données&#8230;), il est forcément représenté sous forme de 0 et de 1.</p>
<p>La corrélation entre cette suite de 0 et de 1 et la lettre est faite dans un énorme tableau qui contient toutes les lettres d&#8217;un côté, et toutes les combinaisons de 0 et de 1 de l&#8217;autre. Il n&#8217;y a pas de magie. C&#8217;est un énorme tableau stocké quelque part dans votre ordinateur. <strong>Si vous n&#8217;avez pas ce tableau, vous ne pouvez pas lire du texte. Même le texte le plus simple.</strong></p>
<p>Malheureusement, au début de l&#8217;informatique, <strong>presque chaque pays a créé son propre tableau, et ces tableaux sont incompatibles entre eux</strong> : pour la même combinaison de 0 et de 1, ils donnent un caractère différent voire rien du tout.</p>
<p>La mauvaise nouvelle, c&#8217;est qu&#8217;ils sont encore utilisés aujourd&#8217;hui.</p>
<p>Ces tableaux, c&#8217;est ce qu&#8217;on appelle les encodings, et il y en a beaucoup. Voici la liste de ceux que Python gère :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">encodings</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">''</span>.<span style="color: black;">join</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'- '</span> + e + <span style="color: #483d8b;">'<span style="color: #000099; font-weight: bold;">\n</span>'</span> <span style="color: #ff7700;font-weight:bold;">for</span> e <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">sorted</span><span style="color: black;">&#40;</span><span style="color: #008000;">set</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">encodings</span>.<span style="color: black;">aliases</span>.<span style="color: black;">aliases</span>.<span style="color: black;">values</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
- ascii
- base64_codec
- big5
- big5hkscs
- bz2_codec
- cp037
- cp1026
- cp1140
- cp1250
- cp1251
- cp1252
- cp1253
- cp1254
- cp1255
- cp1256
- cp1257
- cp1258
- cp424
- cp437
- cp500
- cp775
- cp850
- cp852
- cp855
- cp857
- cp858
- cp860
- cp861
- cp862
- cp863
- cp864
- cp865
- cp866
- cp869
- cp932
- cp949
- cp950
- euc_jis_2004
- euc_jisx0213
- euc_jp
- euc_kr
- gb18030
- gb2312
- gbk
- hex_codec
- hp_roman8
- hz
- iso2022_jp
- iso2022_jp_1
- iso2022_jp_2
- iso2022_jp_2004
- iso2022_jp_3
- iso2022_jp_ext
- iso2022_kr
- iso8859_10
- iso8859_11
- iso8859_13
- iso8859_14
- iso8859_15
- iso8859_16
- iso8859_2
- iso8859_3
- iso8859_4
- iso8859_5
- iso8859_6
- iso8859_7
- iso8859_8
- iso8859_9
- johab
- koi8_r
- latin_1
- mac_cyrillic
- mac_greek
- mac_iceland
- mac_latin2
- mac_roman
- mac_turkish
- mbcs
- ptcp154
- quopri_codec
- rot_13
- shift_jis
- shift_jis_2004
- shift_jisx0213
- tactis
- tis_620
- utf_16
- utf_16_be
- utf_16_le
- utf_32
- utf_32_be
- utf_32_le
- utf_7
- utf_8
- uu_codec
- zlib_codec</pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; import encodings
&gt;&gt;&gt; print ''.join('- ' + e + '\n' for e in sorted(set(encodings.aliases.aliases.values())))
- ascii
- base64_codec
- big5
- big5hkscs
- bz2_codec
- cp037
- cp1026
- cp1140
- cp1250
- cp1251
- cp1252
- cp1253
- cp1254
- cp1255
- cp1256
- cp1257
- cp1258
- cp424
- cp437
- cp500
- cp775
- cp850
- cp852
- cp855
- cp857
- cp858
- cp860
- cp861
- cp862
- cp863
- cp864
- cp865
- cp866
- cp869
- cp932
- cp949
- cp950
- euc_jis_2004
- euc_jisx0213
- euc_jp
- euc_kr
- gb18030
- gb2312
- gbk
- hex_codec
- hp_roman8
- hz
- iso2022_jp
- iso2022_jp_1
- iso2022_jp_2
- iso2022_jp_2004
- iso2022_jp_3
- iso2022_jp_ext
- iso2022_kr
- iso8859_10
- iso8859_11
- iso8859_13
- iso8859_14
- iso8859_15
- iso8859_16
- iso8859_2
- iso8859_3
- iso8859_4
- iso8859_5
- iso8859_6
- iso8859_7
- iso8859_8
- iso8859_9
- johab
- koi8_r
- latin_1
- mac_cyrillic
- mac_greek
- mac_iceland
- mac_latin2
- mac_roman
- mac_turkish
- mbcs
- ptcp154
- quopri_codec
- rot_13
- shift_jis
- shift_jis_2004
- shift_jisx0213
- tactis
- tis_620
- utf_16
- utf_16_be
- utf_16_le
- utf_32
- utf_32_be
- utf_32_le
- utf_7
- utf_8
- uu_codec
- zlib_codec</p></div>

<p>Et certains ont plusieurs noms (des alias), donc on pourrait en compter plus:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">len</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">encodings</span>.<span style="color: black;">aliases</span>.<span style="color: black;">aliases</span>.<span style="color: black;">keys</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">307</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; len(encodings.aliases.aliases.keys())
307</p></div>

<p>Quand vous affichez du texte sur un terminal avec un simple <code>print</code>, votre ordinateur va implicitement chercher le tableau qu&#8217;il pense être le plus adapté, et fait la traduction. Même pour le texte le plus simple. Même pour un espace tout seul.</p>
<p><strong>Mais surtout, ça veut dire que votre propre code EST dans un encoding. Et vous DEVEZ savoir lequel.</strong></p>
<h2>Règle numéro 2 : utf8 est le langage universel, utilisez-le</h2>
<p>Il existe un encoding qui essaye des regrouper toutes les langues du monde, et il s&#8217;appelle unicode. Unicode est un tableau gigantesque qui contient des combinaisons de 1 et de 0 d&#8217;un côté, et les caractères de toutes la langues possibles de l&#8217;autre : chinois, arabe, français, espagnol, russe&#8230;</p>
<p>Bon, il ne contient pas encore absolument tout, mais il couvre suffisamment de terrain pour éliminer 99.999999999% des problèmes de communications de texte entre machines dans le monde.</p>
<p>Le défaut d&#8217;Unicode est qu&#8217;il est plus lent et prend plus de place que d&#8217;autres représentations du même texte. Aujourd&#8217;hui le téléphone le plus pourri a 10 fois la puissance nécessaire, et ce n&#8217;est plus un souci : il peut être utilisé presque partout (sauf peut-être dans l&#8217;embarqué drastique) sans même réfléchir à la question. Tous les langages les plus importants, tous les services les plus importants, tous les logiciels les plus importants gèrent unicode.</p>
<p>Il y a plusieurs implémentations concrètes d&#8217;unicode, la plus célèbre est &#8220;UTF 8&#8221;.</p>
<p><strong>Moralité, par défaut, utilisez utf-8.</strong></p>
<p>Une fois, à l&#8217;entretien d&#8217;embauche, un mec m&#8217;avait reproché d&#8217;utiliser UTF8 parce que &#8220;ça posait des problèmes d&#8217;encoding&#8221;. Comprenez bien qu&#8217;utf-8 ne pose aucun problème d&#8217;encoding. Ce sont tous les autres codecs du monde qui posent des problèmes d&#8217;encoding. UTF-8 est certainement le seul à justement, ne poser aucun problème.</p>
<p>UTF 8 est le seul encoding vers lequel, aujourd&#8217;hui, on puisse convertir vers et depuis (pratiquement) n&#8217;importe quel autre codec du monde. C&#8217;est un espéranto. C&#8217;est une pierre de rosette. C&#8217;est au texte ce que l&#8217;or est à l&#8217;économie.</p>
<p>Si UTF8 vous pose &#8220;un problème d&#8217;encoding&#8221;, c&#8217;est que vous ne savez pas dans quel encoding votre texte est actuellement ou comment le convertir. C&#8217;est tout.</p>
<p>Il n&#8217;y a presque aucune raison de ne pas utiliser UTF8 aujourd&#8217;hui (à part sur des vieux systèmes ou des systèmes où les ressources sont tellement limitées que vous n&#8217;utiliseriez pas Python de toute façon).</p>
<p><strong>Utilisez utf8. Partout. Tout le temps.</strong></p>
<p>Si vous communiquez avec un système qui ne comprend pas UTF8, convertissez.</p>
<p>Mais gardez votre partie en UTF8.</p>
<h2>Règle numéro 3 : il faut maîtriser l&#8217;encoding de son code</h2>
<p>Le fichier dans lequel vous écrivez votre code est dans un encoding et ce n&#8217;est pas lié à votre OS. C&#8217;est votre éditeur qui s&#8217;en occupe. Apprenez à régler votre éditeur pour qu&#8217;il utilise l&#8217;encoding que vous voulez.</p>
<p>Et l&#8217;encoding que vous voulez est UTF8.</p>
<p><strong>Si vous ne savez pas dans quel encoding est votre code, vous ne pouvez pas manipuler du texte et garantir l&#8217;absence de bug.</strong></p>
<p>Vous ne POUVEZ PAS.</p>
<p>Donc réflexe : vous configurez votre éditeur de texte pour sauvegarder tous vos nouveaux fichiers par défaut en UTF8. Maintenant. Tout de suite.</p>
<p>Regardez dans la doc de l&#8217;éditeur, dans l&#8217;aide ou tapez sur Google, mais faites le.</p>
<p>Puis il faut déclarer cet encoding à la première ligne de chaque fichier de code avec l&#8217;expression suivante :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;"># coding: encoding</span></pre></td></tr></table><p class="theCode" style="display:none;"># coding: encoding</p></div>

<p>Par exemple :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;"># coding: utf8</span></pre></td></tr></table><p class="theCode" style="display:none;"># coding: utf8</p></div>

<p>C&#8217;est une spécificité de Python : si l&#8217;encoding du fichier est différent de l&#8217;encoding par défaut du langage, il faut le déclarer sinon le programme plantera à la première conversion. En Python 2.7, l&#8217;encoding par défaut est ASCII, donc il faut presque toujours le déclarer. En Python 3, l&#8217;encoding par défaut est UTF8 et on peut donc l&#8217;omettre si on l&#8217;utilise. Ce que vous allez faire après la lecture de cet article.</p>
<p>Ensuite, il existe deux types de chaînes de caractères en Python :</p>
<ul>
<li>La chaîne de caractères encodée: type &#8216;str&#8217; en Python 2.7, &#8216;byte&#8217; en Python 3.</li>
<li>La chaîne de caractères décodée: type &#8216;unicode&#8217; en Python 2.7, et &#8216;str&#8217; en python 3 (sic).</li>
</ul>
<p>Illustration :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">$ python2.7
Python 2.7.3 <span style="color: black;">&#40;</span>default<span style="color: #66cc66;">,</span> Aug  <span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2012</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">05</span>:<span style="color: #ff4500;">14</span>:<span style="color: #ff4500;">39</span><span style="color: black;">&#41;</span> 
<span style="color: black;">&#91;</span>GCC 4.6.3<span style="color: black;">&#93;</span> on linux2
Type <span style="color: #483d8b;">&quot;help&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;copyright&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;credits&quot;</span> <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #483d8b;">&quot;license&quot;</span> <span style="color: #ff7700;font-weight:bold;">for</span> more information.
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">type</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'chaine'</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># bits =&gt; encodée</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">'chaine'</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># unicode =&gt; décodée</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'unicode'</span><span style="color: #66cc66;">&gt;</span></pre></td></tr></table><p class="theCode" style="display:none;">$ python2.7
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; type('chaine') # bits =&gt; encodée
&lt;type 'str'&gt;
&gt;&gt;&gt; type(u'chaine') # unicode =&gt; décodée
&lt;type 'unicode'&gt;</p></div>


<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">$ python3
Python 3.2.3 <span style="color: black;">&#40;</span>default<span style="color: #66cc66;">,</span> Oct <span style="color: #ff4500;">19</span> <span style="color: #ff4500;">2012</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">20</span>:<span style="color: #ff4500;">10</span>:<span style="color: #ff4500;">41</span><span style="color: black;">&#41;</span> 
<span style="color: black;">&#91;</span>GCC 4.6.3<span style="color: black;">&#93;</span> on linux2
Type <span style="color: #483d8b;">&quot;help&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;copyright&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;credits&quot;</span> <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #483d8b;">&quot;license&quot;</span> <span style="color: #ff7700;font-weight:bold;">for</span> more information.
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">type</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;chaine&quot;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># unicode =&gt; decodée</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>b<span style="color: #483d8b;">&quot;chaine&quot;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># bits =&gt; encodée</span>
&nbsp;
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'bytes'</span><span style="color: #66cc66;">&gt;</span></pre></td></tr></table><p class="theCode" style="display:none;">$ python3
Python 3.2.3 (default, Oct 19 2012, 20:10:41) 
[GCC 4.6.3] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; type(&quot;chaine&quot;) # unicode =&gt; decodée
&lt;class 'str'&gt;
&gt;&gt;&gt; type(b&quot;chaine&quot;) # bits =&gt; encodée

&lt;class 'bytes'&gt;</p></div>

<p>Votre but, c&#8217;est de n&#8217;avoir dans votre code que des chaînes de type &#8216;unicode&#8217;.</p>
<p>En Python 3, c&#8217;est automatique. Toutes les chaînes sont de type &#8216;unicode&#8217; (appelé &#8216;str&#8217; dans cette version, je sais, je sais, c&#8217;est confusionant à mort) par défaut.</p>
<p>En Python 2.7 en revanche, il faut préfixer la chaîne par un <code>u</code>.</p>
<p>Donc, dans votre code, TOUTES vos chaînes doivent être déclarées ainsi :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="pyhton" style="font-family:monospace;">u&quot;votre chaîne&quot;</pre></td></tr></table><p class="theCode" style="display:none;">u&quot;votre chaîne&quot;</p></div>

<p>Oui, c&#8217;est chiant. Mais c&#8217;est indispensable. Encore une fois, il n&#8217;y a pas d&#8217;alternative (dites le avec la voix de Thatcher si ça vous excite).</p>
<p>Si vous voulez, vous pouvez activer le comportement de Python 3 dans Python 2.7 en mettant ceci au début de CHACUN de vos modules :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">__future__</span> <span style="color: #ff7700;font-weight:bold;">import</span> unicode_literals</pre></td></tr></table><p class="theCode" style="display:none;">from __future__ import unicode_literals</p></div>

<p>Ceci n&#8217;affecte que le fichier en cours, jamais les autres modules.</p>
<p>On peut le mettre <a href="../personnalisez-le-demarrage-dipython/index.html">au démarrage d&#8217;iPython également</a>.</p>
<p>Je résume :</p>
<ul>
<li>Réglez votre éditeur sur UTF8.</li>
<li>Mettez <code># coding: utf8 </code> au début de vos modules.</li>
<li>Préfixez toutes vos chaînes de <code>u</code> ou faites <code>from __future__ import unicode_literals</code> en début de chaque module.</li>
</ul>
<p>Si vous ne faites pas cela, votre code marchera. La plupart de temps. Et un jour, dans une situation particulière, il ne marchera plus. Plus du tout.</p>
<p>Oh, et ce n&#8217;est pas grave si vous avez d&#8217;anciens modules dans d&#8217;autres encodings. Tant que vous utilisez des objets &#8216;unicode&#8217; partout, ils marcheront sans problème ensemble.</p>
<h2>Règle numéro 4 : décodez toutes les entrées de votre programme</h2>
<p>La partie difficile de ce conseil, c&#8217;est de savoir ce qu&#8217;est une entrée.</p>
<p>Je vais vous donner une définition simple : <strong>tout ce qui ne fait pas partie du code de votre programme et qui est traité dans votre programme est une entrée.</strong></p>
<p>Le texte des fichiers, le nom de ces fichiers, le retour des appels système, le retour d&#8217;une ligne de commande parsée, la saisie utilisateur sur un terminal, le retour d&#8217;une requête SQL, le téléchargement d&#8217;une donnée sur le Web, etc.</p>
<p>Ce sont toutes des entrées.</p>
<p><strong>Comme tous les textes du monde, les entrées sont dans un encoding. Et vous DEVEZ savoir lequel.</strong></p>
<p>Comprenez bien, si vous ne connaissez pas l&#8217;encoding de vos entrées, ça marchera la plupart du temps, et un jour, ça va planter.</p>
<p>Il n&#8217;y a pas d&#8217;alternative (bis).</p>
<p>Or, <strong>il n&#8217;y a pas de moyen de détecter un encoding de façon fiable.</strong></p>
<p>Donc, soit le fournisseur de la donnée vous donne cette information (settings dans la base de données, doc de votre logiciel, configuration de votre OS, spec du client, coup de fils au fournisseur&#8230;), soit vous êtes baisés.</p>
<p>On ne peut pas lire un simple fichier si on ne connait pas son encoding. Point.</p>
<p>Si cela a marché jusqu&#8217;ici pour vous, c&#8217;est que vous avez eu de la chance : la plupart de vos fichiers étaient dans l&#8217;encoding de votre éditeur et de votre système. Tant qu&#8217;on travaille sur sa machine, tout va bien.</p>
<p>Si vous lisez une page HTML, l&#8217;encoding est souvent déclaré dans la balise META ou dans un header.</p>
<p>Si vous écrivez dans un terminal, l&#8217;encoding du terminal est accessible avec <code>sys.(stdin|stdout).encoding</code>.</p>
<p>Si vous manipulez des noms de fichier, on peut récupérer l&#8217;encoding du file system en cours avec <code>sys.getfilesystemencoding()</code>.</p>
<p>Mais parfois il n&#8217;y a pas d&#8217;autres moyens d&#8217;obtenir cette information que de demander à la personne qui a produit la donnée. Parfois même, l&#8217;encoding déclaré est faux.</p>
<p>Dans tous les cas, vous avez besoin de cette information.</p>
<p>Et une fois que vous l&#8217;avez, il faut décoder le texte reçu.</p>
<p>La manière la plus simple de faire cela est :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">votre_chaine <span style="color: #66cc66;">=</span> votre_chaine.<span style="color: black;">decode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'nom_du_codec'</span><span style="color: black;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;">votre_chaine = votre_chaine.decode('nom_du_codec')</p></div>

<p>Le texte sera de type &#8216;str&#8217;, et <code>decode()</code> retourne (si vous lui fournissez le bon codec ;-)), une version &#8216;unicode&#8217;.</p>
<p>Exemple, obtenir une chaîne &#8216;unicode&#8217; depuis une chaîne &#8216;str&#8217; encodée en utf8 :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> une_chaine <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'Chaîne'</span> <span style="color: #808080; font-style: italic;"># mon fichier est encodé en UTF8, donc la chaine est en UTF8</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>une_chaine<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> une_chaine <span style="color: #66cc66;">=</span> une_chaine.<span style="color: black;">decode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>une_chaine<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'unicode'</span><span style="color: #66cc66;">&gt;</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; une_chaine = 'Chaîne' # mon fichier est encodé en UTF8, donc la chaine est en UTF8
&gt;&gt;&gt; type(une_chaine)
&lt;type 'str'&gt;
&gt;&gt;&gt; une_chaine = une_chaine.decode('utf8')
&gt;&gt;&gt; type(une_chaine)
&lt;type 'unicode'&gt;</p></div>

<p>Donc dès que vous lisez un fichier, récupérez une réponse d&#8217;une base de données ou parsez des arguments d&#8217;un terminal, appelez <code>decode()</code> sur la chaîne reçue.</p>
<h2>Règle numéro 5 : encodez toutes les sorties de votre programme</h2>
<p>La partie difficile de ce conseil, c&#8217;est de savoir ce qu&#8217;est une sortie.</p>
<p>Encore une fois, une définition simple : <strong>toute donnée que vous traitez et qui va être lue par autre chose que votre code est une sortie.</strong></p>
<p>Un <code>print</code> dans un terminal est une sortie, un <code>write()</code> dans un fichier est une sortie, un <code>UPDATE</code> en SQL est une sortie, un envoi dans une socket est une sortie, etc.</p>
<p>Le reste du monde ne peut pas lire les objets &#8216;unicode&#8217; de Python. Si vous écrivez ces objets dans un fichier, un terminal ou dans une base de données, Python va les convertir automatiquement en objet &#8216;str&#8217;, et l&#8217;encoding utilisé dépendra du contexte.</p>
<p>Malheureusement, il y a une limite à la capacité de Python à décider du bon encoding.</p>
<p>Donc, tout comme il vous faut connaitre l&#8217;encoding d&#8217;un texte en entrée, il vous faut connaitre l&#8217;encoding attendu par le système avec lequel vous communiquez en sortie : sachez quel est l&#8217;encoding du terminal, de votre base de données ou système de fichiers sur lequel vous écrivez.</p>
<p>Si vous ne pouvez pas savoir (page Web, API, etc), utilisez UTF8.</p>
<p>Pour ce faire, il suffit d&#8217;appelez <code>encode()</code> sur tout objet de type &#8216;unicode&#8217; :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">une_chaine <span style="color: #66cc66;">=</span> une_chaine.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'nom_du_codec'</span><span style="color: black;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;">une_chaine = une_chaine.encode('nom_du_codec')</p></div>

<p>Par exemple, pour convertir un objet &#8216;unicode&#8217; en &#8216;str&#8217; utf8:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> une_chaine <span style="color: #66cc66;">=</span> u<span style="color: #483d8b;">'Chaîne'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>une_chaine<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'unicode'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> une_chaine <span style="color: #66cc66;">=</span> une_chaine.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>une_chaine<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; une_chaine = u'Chaîne'
&gt;&gt;&gt; type(une_chaine)
&lt;type 'unicode'&gt;
&gt;&gt;&gt; une_chaine = une_chaine.encode('utf8')
&gt;&gt;&gt; type(une_chaine)
&lt;type 'str'&gt;</p></div>

<h2>Résumé des règles</h2>
<ol>
<li>Le texte brut n&#8217;existe pas.</li>
<li>Utilisez UTF8. Maintenant. Partout.</li>
<li>Dans votre code, spécifiez l&#8217;encoding du fichier et déclarez vos chaînes comme &#8216;unicode&#8217;.</li>
<li>À l&#8217;entrée, connaissez l&#8217;encoding de vos données, et décodez avec <code>decode()</code>.</li>
<li>A la sortie, encodez dans l&#8217;encoding attendu par le système qui va recevoir la données, ou si vous ne pouvez pas savoir, en UTF8, avec <code>encode()</code>.</li>
</ol>
<p>Je sais que ça vous démange de voir un cas concret, alors voici un pseudo programme (<a href="https://github.com/sametmax/codes-des-articles/blob/master/2013/avril/encoding.py">téléchargeable ici</a>) :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;"># coding: utf-8 </span>
&nbsp;
&nbsp;
<span style="color: #808080; font-style: italic;"># toutes les chaines sont en unicode (même les docstrings)</span>
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">__future__</span> <span style="color: #ff7700;font-weight:bold;">import</span> unicode_literals
&nbsp;
<span style="color: #483d8b;">&quot;&quot;&quot;
    Un script tout pourri qui télécharge plein de page et les sauvegarde
    dans une base de données sqlites.
&nbsp;
    On écrit dans un fichier de log les opérations effectuées.
&quot;&quot;&quot;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">re</span>
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">urllib2</span>
<span style="color: #ff7700;font-weight:bold;">import</span> sqlite3
&nbsp;
pages <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span>
    <span style="color: black;">&#40;</span><span style="color: #483d8b;">'Snippets de Sebsauvage'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'http://www.sebsauvage.net/python/snyppets/'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
    <span style="color: black;">&#40;</span><span style="color: #483d8b;">'Top 50 de bashfr'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'http://danstonchat.com/top50.html'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
<span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># création de la base de données</span>
conn <span style="color: #66cc66;">=</span> sqlite3.<span style="color: black;">connect</span><span style="color: black;">&#40;</span>r<span style="color: #483d8b;">&quot;backup.db&quot;</span><span style="color: black;">&#41;</span>
c <span style="color: #66cc66;">=</span> conn.<span style="color: black;">cursor</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">try</span>:
    c.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'''
        CREATE TABLE pages (
            id INTEGER PRIMARY KEY,
            nom TEXT,
            html TEXT
        )'''</span>
    <span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> sqlite3.<span style="color: black;">OperationalError</span>:
    <span style="color: #ff7700;font-weight:bold;">pass</span>
&nbsp;
log <span style="color: #66cc66;">=</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'backup.log'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'wa'</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">for</span> nom<span style="color: #66cc66;">,</span> page <span style="color: #ff7700;font-weight:bold;">in</span> pages:
&nbsp;
    <span style="color: #808080; font-style: italic;"># ceci est une manière très fragile de télécharger et</span>
    <span style="color: #808080; font-style: italic;"># parser du HTML. Utilisez plutôt scrapy et beautifulsoup</span>
    <span style="color: #808080; font-style: italic;"># si vous faites un vrai crawler</span>
    response <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">urllib2</span>.<span style="color: black;">urlopen</span><span style="color: black;">&#40;</span>page<span style="color: black;">&#41;</span>
    html <span style="color: #66cc66;">=</span> response.<span style="color: black;">read</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">100000</span><span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># je récupère l'encoding à l'arrache</span>
    encoding <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">re</span>.<span style="color: black;">findall</span><span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'&lt;meta.*?charset=[&quot;<span style="color: #000099; font-weight: bold;">\'</span>]*(.+?)[&quot;<span style="color: #000099; font-weight: bold;">\'</span>&gt;]'</span><span style="color: #66cc66;">,</span> html<span style="color: #66cc66;">,</span> flags<span style="color: #66cc66;">=</span><span style="color: #dc143c;">re</span>.<span style="color: black;">I</span><span style="color: black;">&#41;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># html devient de l'unicode</span>
    html <span style="color: #66cc66;">=</span> html.<span style="color: black;">decode</span><span style="color: black;">&#40;</span>encoding<span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># ici je peux faire des traitements divers et varié avec ma chaîne</span>
    <span style="color: #808080; font-style: italic;"># et en fin de programme...</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># la lib sqlite convertie par défaut tout objet unicode en UTF8</span>
    <span style="color: #808080; font-style: italic;"># car c'est l'encoding de sqlite par défaut donc passer des chaînes</span>
    <span style="color: #808080; font-style: italic;"># unicode marche, et toutes les chaînes de mon programme sont en unicode</span>
    <span style="color: #808080; font-style: italic;"># grace à mon premier import</span>
    c.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;&quot;&quot;INSERT INTO pages (nom, html) VALUES (?, ?)&quot;&quot;&quot;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#40;</span>nom<span style="color: #66cc66;">,</span> html<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># j'écris dans mon fichier en UTF8 car c'est ce que je veux pouvoir lire</span>
    <span style="color: #808080; font-style: italic;"># plus tard</span>
    msg <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;Page '{}' sauvée<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span>.<span style="color: black;">format</span><span style="color: black;">&#40;</span>nom<span style="color: black;">&#41;</span>
    log.<span style="color: black;">write</span><span style="color: black;">&#40;</span>msg.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># notez que si je ne fais pas encode(), soit:</span>
    <span style="color: #808080; font-style: italic;"># - j'ai un objet 'unicode' et ça plante</span>
    <span style="color: #808080; font-style: italic;"># - j'ai un objet 'str' et ça va marcher mais mon fichier contiendra</span>
    <span style="color: #808080; font-style: italic;">#   l'encoding de la chaîne initiale (qui ici serait aussi UTF8, mais</span>
    <span style="color: #808080; font-style: italic;">#   ce n'est pas toujours le cas)</span>
&nbsp;
conn.<span style="color: black;">commit</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
c.<span style="color: black;">close</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
log.<span style="color: black;">close</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;"># coding: utf-8 


# toutes les chaines sont en unicode (même les docstrings)
from __future__ import unicode_literals

&quot;&quot;&quot;
    Un script tout pourri qui télécharge plein de page et les sauvegarde
    dans une base de données sqlites.

    On écrit dans un fichier de log les opérations effectuées.
&quot;&quot;&quot;

import re
import urllib2
import sqlite3

pages = (
    ('Snippets de Sebsauvage', 'http://www.sebsauvage.net/python/snyppets/'),
    ('Top 50 de bashfr', 'http://danstonchat.com/top50.html'),
)

# création de la base de données
conn = sqlite3.connect(r&quot;backup.db&quot;)
c = conn.cursor()

try:
    c.execute('''
        CREATE TABLE pages (
            id INTEGER PRIMARY KEY,
            nom TEXT,
            html TEXT
        )'''
    )
except sqlite3.OperationalError:
    pass

log = open('backup.log', 'wa')

for nom, page in pages:

    # ceci est une manière très fragile de télécharger et
    # parser du HTML. Utilisez plutôt scrapy et beautifulsoup
    # si vous faites un vrai crawler
    response = urllib2.urlopen(page)
    html = response.read(100000)

    # je récupère l'encoding à l'arrache
    encoding = re.findall(r'&lt;meta.*?charset=[&quot;\']*(.+?)[&quot;\'&gt;]', html, flags=re.I)[0]

    # html devient de l'unicode
    html = html.decode(encoding)

    # ici je peux faire des traitements divers et varié avec ma chaîne
    # et en fin de programme...

    # la lib sqlite convertie par défaut tout objet unicode en UTF8
    # car c'est l'encoding de sqlite par défaut donc passer des chaînes
    # unicode marche, et toutes les chaînes de mon programme sont en unicode
    # grace à mon premier import
    c.execute(&quot;&quot;&quot;INSERT INTO pages (nom, html) VALUES (?, ?)&quot;&quot;&quot;, (nom, html))

    # j'écris dans mon fichier en UTF8 car c'est ce que je veux pouvoir lire
    # plus tard
    msg = &quot;Page '{}' sauvée\n&quot;.format(nom)
    log.write(msg.encode('utf8'))

    # notez que si je ne fais pas encode(), soit:
    # - j'ai un objet 'unicode' et ça plante
    # - j'ai un objet 'str' et ça va marcher mais mon fichier contiendra
    #   l'encoding de la chaîne initiale (qui ici serait aussi UTF8, mais
    #   ce n'est pas toujours le cas)

conn.commit()
c.close()

log.close()</p></div>

<h2>Quelques astuces</h2>
<p>Certaines bibliothèques acceptent indifféremment des objets &#8216;unicode&#8217; et &#8216;str&#8217; :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">logging</span> <span style="color: #ff7700;font-weight:bold;">import</span> basicConfig<span style="color: #66cc66;">,</span> getLogger
<span style="color: #66cc66;">&gt;&gt;&gt;</span> basicConfig<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> log <span style="color: #66cc66;">=</span> getLogger<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> log.<span style="color: black;">warn</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Détécé&quot;</span><span style="color: black;">&#41;</span>
WARNING:root:Détécé
<span style="color: #66cc66;">&gt;&gt;&gt;</span> log.<span style="color: black;">warn</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">&quot;Détécé&quot;</span><span style="color: black;">&#41;</span>
WARNING:root:Détécé</pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; from logging import basicConfig, getLogger
&gt;&gt;&gt; basicConfig()
&gt;&gt;&gt; log = getLogger()
&gt;&gt;&gt; log.warn(&quot;Détécé&quot;)
WARNING:root:Détécé
&gt;&gt;&gt; log.warn(u&quot;Détécé&quot;)
WARNING:root:Détécé</p></div>

<p>Et ce n&#8217;est pas forcément une bonne chose car si il y a derrière écriture dans un fichier de log, cela peut poser problème.</p>
<p>D&#8217;autres ont besoin qu&#8217;on leur précise:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">re</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">re</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">re</span>.<span style="color: black;">search</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'é'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'télé'</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span>_sre.<span style="color: black;">SRE_Match</span> <span style="color: #008000;">object</span> at <span style="color: #ff4500;">0x7fa4d3f77238</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">re</span>.<span style="color: black;">search</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">'é'</span><span style="color: #66cc66;">,</span> u<span style="color: #483d8b;">'télé'</span><span style="color: #66cc66;">,</span> <span style="color: #dc143c;">re</span>.<span style="color: black;">UNICODE</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span>_sre.<span style="color: black;">SRE_Match</span> <span style="color: #008000;">object</span> at <span style="color: #ff4500;">0x7fa4d3f772a0</span><span style="color: #66cc66;">&gt;</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; import re
&gt;&gt;&gt; import re
&gt;&gt;&gt; re.search('é', 'télé')
&lt;_sre.SRE_Match object at 0x7fa4d3f77238&gt;
&gt;&gt;&gt; re.search(u'é', u'télé', re.UNICODE)
&lt;_sre.SRE_Match object at 0x7fa4d3f772a0&gt;</p></div>

<p>Le module <code>re</code> par exemple aura des résultats biaisés sur une chaîne &#8216;unicode&#8217; si on ne précise pas le flag <code>re.UNICODE</code>.</p>
<p>D&#8217;autres n&#8217;acceptent pas d&#8217;objet &#8216;str&#8217;:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> io
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">&gt;&gt;&gt;</span> io.<span style="color: #dc143c;">StringIO</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">'é'</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span>_io.<span style="color: #dc143c;">StringIO</span> <span style="color: #008000;">object</span> at <span style="color: #ff4500;">0x14a96d0</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> io.<span style="color: #dc143c;">StringIO</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">'é'</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-5-16988a0d4ac4&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    io.<span style="color: #dc143c;">StringIO</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'é'</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">TypeError</span>: initial_value must be <span style="color: #008000;">unicode</span> <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #008000;">None</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #008000;">str</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; import io
&gt;&gt;&gt; &gt;&gt;&gt; io.StringIO(u'é')
&lt;_io.StringIO object at 0x14a96d0&gt;
&gt;&gt;&gt; io.StringIO(u'é'.encode('utf8'))
Traceback (most recent call last):
  File &quot;&lt;ipython-input-5-16988a0d4ac4&gt;&quot;, line 1, in &lt;module&gt;
    io.StringIO('é'.encode('utf8'))
TypeError: initial_value must be unicode or None, not str</p></div>

<p>D&#8217;autres encore n&#8217;acceptent pas d&#8217;objet &#8216;unicode&#8217;:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">base64</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">base64</span>.<span style="color: black;">encodestring</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'é'</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'w6k=<span style="color: #000099; font-weight: bold;">\n</span>'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">base64</span>.<span style="color: black;">encodestring</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">'é'</span><span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-3-1714982ca68e&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    <span style="color: #dc143c;">base64</span>.<span style="color: black;">encodestring</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'é'</span><span style="color: black;">&#41;</span>
  File <span style="color: #483d8b;">&quot;/usr/lib/python2.7/base64.py&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">315</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> encodestring
    pieces.<span style="color: black;">append</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">binascii</span>.<span style="color: black;">b2a_base64</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">chunk</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">UnicodeEncodeError</span>: <span style="color: #483d8b;">'ascii'</span> codec can<span style="color: #483d8b;">'t encode character u'</span>\xe9<span style="color: #483d8b;">' in position 0: ordinal not in range(128)</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; import base64
&gt;&gt;&gt; base64.encodestring('é'.encode('utf8'))
'w6k=\n'
&gt;&gt;&gt; base64.encodestring(u'é')
Traceback (most recent call last):
  File &quot;&lt;ipython-input-3-1714982ca68e&gt;&quot;, line 1, in &lt;module&gt;
    base64.encodestring('é')
  File &quot;/usr/lib/python2.7/base64.py&quot;, line 315, in encodestring
    pieces.append(binascii.b2a_base64(chunk))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 0: ordinal not in range(128)</p></div>

<p>Cela peut être pour des raison de performances (certaines opérations sont plus rapides sur un objet &#8216;str&#8217;), ou pour des raisons historiques, d&#8217;ignorance ou de paresse.</p>
<p>Vous ne pouvez pas le deviner à l&#8217;avance. Souvent c&#8217;est marqué dans la doc, sinon il faut tester dans le shell.</p>
<p>Une bibliothèque bien faite demandera de l&#8217;unicode et vous retournera de l&#8217;unicode, vous libérant l&#8217;esprit. Par exemple, <a href="http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/sametmax.com/sept-petites-libs-qui-changent-la-vie-dun-dev-python/">requests</a> et l&#8217;ORM <a href="../quels-gros-sites-sont-faits-en-django/index.html">Django</a> le font, et communiquent avec le reste du monde (en l&#8217;occurence le Web et les bases de données) dans le meilleur encoding possible automatiquement de manière transparente. Quand c&#8217;est possible bien entendu, parfois il faudra forcer l&#8217;encoding car le fournisseur de votre donnée déclare le mauvais. Vous n&#8217;y pouvez rien, c&#8217;est pareil pour tous les langages du monde.</p>
<p>Enfin il existe des raccourcis pour certaines opérations, utilisez-les autant que possible. Par exemple, pour lire un fichier, au lieu de faire un simple <code>open()</code>, vous pouvez faire :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">codecs</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #008000;">open</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># open() de codec à exactement la même API, y compris avec &quot;with&quot;</span>
f <span style="color: #66cc66;">=</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'fichier'</span><span style="color: #66cc66;">,</span> encoding<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'encoding'</span><span style="color: black;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;">from codecs import open

# open() de codec à exactement la même API, y compris avec &quot;with&quot;
f = open('fichier', encoding='encoding')</p></div>

<p>Les chaînes récupérées seront automatiquement sous forme d&#8217;objet &#8216;unicode&#8217; au lieu d&#8217;objet &#8216;str&#8217; qu&#8217;il vous aurait fallu convertir à la main.</p>
<h2>Les outils de la dernière chance</h2>
<p>Je vous ai menti, si vous ne connaissez pas l&#8217;encoding de vos entrées ou de vos sorties, il vous reste encore quelques options.</p>
<p>Sachez cependant que ces options sont des hacks, des trucs à tenter quand tout ce qui a été décrit plus haut a foiré.</p>
<p>Si vous faites bien votre boulot, ça ne doit pas arriver souvent. Une à deux fois max dans votre année, sauf environnement de travail très très merdique.</p>
<p>D&#8217;abord, parlons de l&#8217;entrée.</p>
<p>Si vous recevez un objet et qu&#8217;il vous est impossible de trouver l&#8217;encoding, vous pouvez forcer un décodage imparfait avec <code>decode()</code> en spécifiant le paramètre <code>error</code>.</p>
<p>Il peut prendre les valeurs suivantes :</p>
<ul>
<li><code>'strict'</code> : lever une exception en cas d&#8217;erreur. C&#8217;est le comportement par défaut.</li>
<li><code>'ignore'</code> : tout caractère qui provoque une erreur est ignoré.</li>
<li><code>'replace'</code> : tout caractère qui provoque une erreur est remplacé par un point d&#8217;interrogation.</li>
</ul>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">'Père Noël'</span>.<span style="color: black;">decode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'ascii'</span><span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;stdin&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
<span style="color: #008000;">UnicodeDecodeError</span>: <span style="color: #483d8b;">'ascii'</span> codec can<span style="color: #483d8b;">'t decode byte 0xc3 in position 1: ordinal not in range(128)
&gt;&gt;&gt; print '</span>Pè<span style="color: #dc143c;">re</span> Noël<span style="color: #483d8b;">'.decode('</span>ascii<span style="color: #483d8b;">', errors='</span>ignore<span style="color: #483d8b;">')
Pre Nol
&gt;&gt;&gt; print '</span>Pè<span style="color: #dc143c;">re</span> Noël<span style="color: #483d8b;">'.decode('</span>ascii<span style="color: #483d8b;">', errors='</span>replace<span style="color: #483d8b;">')
P��re No��l</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; print 'Père Noël'.decode('ascii')
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 1: ordinal not in range(128)
&gt;&gt;&gt; print 'Père Noël'.decode('ascii', errors='ignore')
Pre Nol
&gt;&gt;&gt; print 'Père Noël'.decode('ascii', errors='replace')
P��re No��l</p></div>

<p>Mozilla vient également à la rescousse avec sa lib <a href="https://pypi.python.org/pypi/chardet">chardet</a> qu&#8217;il faut donc <a href="http://sametmax.com/votre-python-aime-les-pip/">installer</a> :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pip <span style="color: #c20cb9; font-weight: bold;">install</span> chardet</pre></td></tr></table><p class="theCode" style="display:none;">pip install chardet</p></div>

<p>Et qui TENTE (du verbe &#8216;tenter&#8217;, &#8220;qui essaye&#8221;, et qui donc peut échouer et se tromper) de détecter l&#8217;encoding utilisé.</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> chardet.<span style="color: black;">detect</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">'Le Père Noël est une ordure'</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#123;</span><span style="color: #483d8b;">'confidence'</span>: <span style="color: #ff4500;">0.8063275188616134</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'encoding'</span>: <span style="color: #483d8b;">'ISO-8859-2'</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> chardet.<span style="color: black;">detect</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">&quot;Le Père Noël est une ordure j'ai dis enculé&quot;</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#123;</span><span style="color: #483d8b;">'confidence'</span>: <span style="color: #ff4500;">0.87625</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'encoding'</span>: <span style="color: #483d8b;">'utf-8'</span><span style="color: black;">&#125;</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; chardet.detect(u'Le Père Noël est une ordure'.encode('utf8'))
{'confidence': 0.8063275188616134, 'encoding': 'ISO-8859-2'}
&gt;&gt;&gt; chardet.detect(u&quot;Le Père Noël est une ordure j'ai dis enculé&quot;.encode('utf8'))
{'confidence': 0.87625, 'encoding': 'utf-8'}</p></div>

<p>Cela marche pas trop mal, mais n&#8217;attendez pas de miracles. Plus il y a de texte, plus c&#8217;est précis, et plus le paramètre <code>confidence</code> est proche de 1.</p>
<p>Parlons maintenant de la sortie, c&#8217;est à dire le cas où le système qui va recevoir vos données est une grosse quiche qui plante dès qu&#8217;on lui donne autre chose que de l&#8217;ASCII.</p>
<p>Je ne veux balancer personne, mais mon regard se tourne vers l&#8217;administration américaine. Subtilement. De manière insistante.</p>
<p>D&#8217;abord, <code>encode()</code> accepte les mêmes valeurs pour <code>errors</code> que <code>decode()</code>. Mais en prime, il accepte <code>'xmlcharrefreplace'</code>, très pratique pour les fichiers XML :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> u<span style="color: #483d8b;">&quot;Et là-bas, tu vois, c'est la coulée du grand bronze&quot;</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'ascii'</span><span style="color: #66cc66;">,</span> errors<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'xmlcharrefreplace'</span><span style="color: black;">&#41;</span>
<span style="color: #483d8b;">&quot;Et l&amp;#224;-bas, tu vois, c'est la coul&amp;#233;e du grand bronze&quot;</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; u&quot;Et là-bas, tu vois, c'est la coulée du grand bronze&quot;.encode('ascii', errors='xmlcharrefreplace')
&quot;Et l&amp;#224;-bas, tu vois, c'est la coul&amp;#233;e du grand bronze&quot;</p></div>

<p>Enfin, on peut essayer d&#8217;obtenir un texte potable en remplaçant les caractères spéciaux par leur équivalent ASCII le plus proche.</p>
<p>Avec l&#8217;alphabet latin, c&#8217;est très facile :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">unicodedata</span>.<span style="color: black;">normalize</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'NFKD'</span><span style="color: #66cc66;">,</span> u<span style="color: #483d8b;">&quot;éçûö&quot;</span><span style="color: black;">&#41;</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'ascii'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'ignore'</span><span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'ecuo'</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; unicodedata.normalize('NFKD', u&quot;éçûö&quot;).encode('ascii', 'ignore')
'ecuo'</p></div>

<p>Pour des trucs plus avancés comme le cyrilique ou le mandarin, il faut installer <a href="https://pypi.python.org/pypi/Unidecode">unidecode</a> :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pip <span style="color: #c20cb9; font-weight: bold;">install</span> unidecode</pre></td></tr></table><p class="theCode" style="display:none;">pip install unidecode</p></div>


<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">from</span> unidecode <span style="color: #ff7700;font-weight:bold;">import</span> unidecode
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> unidecode<span style="color: black;">&#40;</span>u<span style="color: #483d8b;">&quot;En russe, Moscou s'écrit Москва&quot;</span><span style="color: black;">&#41;</span>
En russe<span style="color: #66cc66;">,</span> Moscou s<span style="color: #483d8b;">'ecrit Moskva</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; from unidecode import unidecode
&gt;&gt;&gt; print unidecode(u&quot;En russe, Moscou s'écrit Москва&quot;)
En russe, Moscou s'ecrit Moskva</p></div>

<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-official sd-sharing"><h3 class="sd-title">Partager:</h3><div class="sd-content"><ul><li class="share-twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/" data-text="L&#039;encoding en Python, une bonne fois pour toute"  >Tweet</a></li><li class="share-facebook"><div class="fb-share-button" data-href="http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/" data-layout="button_count"></div></li><li class="share-google-plus-1"><div class="googleplus1_button"><div class="g-plus" data-action="share" data-annotation="bubble" data-href="http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/"></div></div></li><li class="share-email"><a rel="nofollow" data-shared="" class="share-email sd-button" href="index.html%3Fshare=email.html" rel="noopener noreferrer" target="_blank" title="Click to email this to a friend"><span>Email</span></a></li><li><a href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#" class="sharing-anchor sd-button share-more"><span>More</span></a></li><li class="share-end"></li></ul><div class="sharing-hidden"><div class="inner" style="display: none;"><ul><li class="share-reddit"><div class="reddit_button"><iframe src="http://www.reddit.com/static/button/button1.html?newwindow=true&width=120&amp;url=http%3A%2F%2Fsametmax.com%2Flencoding-en-python-une-bonne-fois-pour-toute%2F&amp;title=L%27encoding%20en%20Python%2C%20une%20bonne%20fois%20pour%20toute" height="22" width="120" scrolling="no" frameborder="0"></iframe></div></li><li class="share-pinterest"><div class="pinterest_button"><a href="https://www.pinterest.com/pin/create/button/?url=http%3A%2F%2Fsametmax.com%2Flencoding-en-python-une-bonne-fois-pour-toute%2F&#038;media=http%3A%2F%2Fsametmax.com%2Fwp-content%2Fuploads%2F2013%2F04%2FOxpEP.jpg&#038;description=L%27encoding%20en%20Python%2C%20une%20bonne%20fois%20pour%20toute" data-pin-do="buttonPin" data-pin-config="beside"><img src="http://assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png" /></a></div></li><li class="share-end"></li><li class="share-tumblr"><a target="_blank" href="https://www.tumblr.com/share/link/?url=http%3A%2F%2Fsametmax.com%2Flencoding-en-python-une-bonne-fois-pour-toute%2F&name=L%27encoding%20en%20Python%2C%20une%20bonne%20fois%20pour%20toute" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:62px; height:20px; background:url('https://platform.tumblr.com/v1/share_2.png') top left no-repeat transparent;">Share on Tumblr</a></li><li class="share-pocket"><div class="pocket_button"><a href="https://getpocket.com/save" class="pocket-btn" data-lang="en" data-save-url="http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/" data-pocket-count="horizontal" >Pocket</a></div></li><li class="share-end"></li><li class="share-end"></li></ul></div></div></div></div></div>                        </section><!-- .entry-content -->

        <footer class="entry-meta"><hr class="featurette-divider"><div class="author-info"><div class="row-fluid"><div class="comment-avatar author-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=100&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=200&#038;d=retro&#038;r=x 2x' class='avatar avatar-100 photo' height='100' width='100' /></div> <div class="author-description span10"><h3>About Sam</h3><p>Waf !</p><div class="author-link"><a href="../author/sam/index.html" rel="author">View all posts by Sam <span class="meta-nav">&rarr;</span></a></div></div></div></div></footer>                                    </article>
                                
                            
                        
                    
<div id="comments" class="comments-area" >
	<h2 id="tc-comment-title" class="comments-title">119 thoughts on &ldquo;<span>L&#8217;encoding en Python, une bonne fois pour toute</span>&rdquo;</h2>              <ul class="commentlist">
                        <li class="comment even thread-even depth-1" id="li-comment-8246">
          
            <article id="comment-8246" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/fc32c6686686ecc595f05ad1885c2fb3?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/fc32c6686686ecc595f05ad1885c2fb3?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">roro  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8246"><time datetime="2013-04-21T08:31:36+00:00">21/04/2013 at 08:31</time></a></header>  <section class="comment-content comment"><p>Merci, merci, merci, et&#8230;MERCI.<br />
Ta statue sera équestre. Pas moins.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-8252">
          
            <article id="comment-8252" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8252"><time datetime="2013-04-21T09:16:52+00:00">21/04/2013 at 09:16</time></a></header>  <section class="comment-content comment"><p>Fait gaffe aux nombres de pieds en l&#8217;air pour le cheval. J&#8217;ai pas envie qu&#8217;on me prenne pour un macabé.</p>
<p>Pour la matière, le bronze est mon meilleur profile.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-8255">
          
            <article id="comment-8255" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/75be759a2751164a7cf44aeb38ef9b64?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/75be759a2751164a7cf44aeb38ef9b64?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">k3c  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8255"><time datetime="2013-04-21T13:02:06+00:00">21/04/2013 at 13:02</time></a></header>  <section class="comment-content comment"><p>s/et le jour où ça se gatte/et le jour où ça se gâte<br />
s/à ou d’autres langage/à où d’autres langages<br />
s/Et certains on plusieurs noms/Et certains ont plusieurs noms<br />
s/c’est ce qu’on appelles les encodings/c’est ce qu’on appelle les encodings<br />
s/Certaines bibliothèque /Certaines bibliothèques</p>
<p>Le sodomiseur de coléoptères :-)</p>
<p>Merci pour l&#8217;article, je pensais pas trop mal connaître le sujet, mais visiblement non.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-8256">
          
            <article id="comment-8256" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8256"><time datetime="2013-04-21T13:18:53+00:00">21/04/2013 at 13:18</time></a></header>  <section class="comment-content comment"><p>Bah tu sais moi je me dis après chaque article que j&#8217;ai bien tout relu et qu&#8217;il reste pas de faute. Mais visiblement non.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-8259">
          
            <article id="comment-8259" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/2cb6a22c42476804f59d6506b9df7dac?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/2cb6a22c42476804f59d6506b9df7dac?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">fab  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8259"><time datetime="2013-04-21T17:50:41+00:00">21/04/2013 at 17:50</time></a></header>  <section class="comment-content comment"><p>Franchement merci.<br />
Pour avoir lu plein de choses sur le sujet, mal compris, confondu le vocabulaire, oublié le lendemain, etc&#8230; c&#8217;est l&#8217;article qui explique le mieux et le plus concrètement l&#8217;encoding. C&#8217;est de la même veine que les articles sur la programmation orientée objet qui sont d&#8217;un niveau pédagogique inégalé parmis tout ce que j&#8217;ai pu lire. La théorie et les bases sont parfaitement expliquées avec toujours une application concrète. C&#8217;est limpide et efficace.<br />
Cela fait un petit moment que je suis régulièrement votre blog, c&#8217;est une petite pépite, donc bravo et surtout un grand merci pour le partage car mine du rien c&#8217;est du boulot.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-8261">
          
            <article id="comment-8261" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8261"><time datetime="2013-04-21T18:07:22+00:00">21/04/2013 at 18:07</time></a></header>  <section class="comment-content comment"><p>\ o /</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-8263">
          
            <article id="comment-8263" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/b92feba617e050ea5163b9bb6057eb91?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/b92feba617e050ea5163b9bb6057eb91?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://lyyn.fr.nf' rel='external nofollow' class='url'>Lyyn</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8263"><time datetime="2013-04-21T20:33:00+00:00">21/04/2013 at 20:33</time></a></header>  <section class="comment-content comment"><p>Yeah, ça part dans mes favoris ! Merci pour l&#8217;article !</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8264">
          
            <article id="comment-8264" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/de3d107ed1ccad362b44763106a78178?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/de3d107ed1ccad362b44763106a78178?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://www.olissea.com/' rel='external nofollow' class='url'>JeromeJ</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8264"><time datetime="2013-04-21T20:33:35+00:00">21/04/2013 at 20:33</time></a></header>  <section class="comment-content comment"><p>Premier commentaire constructif de la journée :</p>
<p>Vous avez déjà utilisé cette image d&#8217;entête d&#8217;article pour un autre article, c&#8217;est trop nul, vous perdez votre originalité.</p>
<p>&lt;3</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-even depth-1" id="li-comment-8266">
          
            <article id="comment-8266" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8266"><time datetime="2013-04-21T20:39:36+00:00">21/04/2013 at 20:39</time></a></header>  <section class="comment-content comment"><p>Meeeeeeeeeeeeerde, j&#8217;ai eu un doute en plus.</p>
<p>EDIT: m&#8217;en fout, je l&#8217;ai changé.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8273">
          
            <article id="comment-8273" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/de3d107ed1ccad362b44763106a78178?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/de3d107ed1ccad362b44763106a78178?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://www.olissea.com/' rel='external nofollow' class='url'>JeromeJ</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8273"><time datetime="2013-04-22T00:58:54+00:00">22/04/2013 at 00:58</time></a></header>  <section class="comment-content comment"><p>Sinon plus sérieusement … c&#8217;est un peu perturbant, vous parlez un peu des différences avec Python3 mais la majorité des exemples sont en Python2 et vu que les différences entre python2 et 3 (à ce niveau là en tout cas) sont super chiantes et prêtent à confusion, bah du coup c&#8217;est un peu plus dur de bien vous suivre partout (moi qui suis 100% Python3), dommage … Article bien complet sinon :) Merci.</p>
<p>Ah et si l&#8217;un de vous à une solution simple pour faire en sorte que les encodings de stdout et stdin se mettent en UTF-8 par défaut, ça serait pas mal. (Surtout que ce sont des propriétés en read only donc, à part des méthodes bizarroïde au lancement de Python (en console), je ne sais même pas si y a moyen de les modifier en live).</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-8275">
          
            <article id="comment-8275" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/de3d107ed1ccad362b44763106a78178?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/de3d107ed1ccad362b44763106a78178?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://www.olissea.com/' rel='external nofollow' class='url'>JeromeJ</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8275"><time datetime="2013-04-22T01:11:11+00:00">22/04/2013 at 01:11</time></a></header>  <section class="comment-content comment"><p>Au fait, <del>je veux</del> j&#8217;aurais bien voulu un tampon :( (tout ça pour ça bitch !)</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-max odd alt thread-odd thread-alt depth-1" id="li-comment-8287">
          
            <article id="comment-8287" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/eb8e400eec222e2b09bd901aba2cb2dc?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/eb8e400eec222e2b09bd901aba2cb2dc?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Max  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8287"><time datetime="2013-04-22T07:26:08+00:00">22/04/2013 at 07:26</time></a></header>  <section class="comment-content comment"><p>le tampon ça se mérite jeune homme ! N&#8217;est pas tamponné qui veut.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-even depth-1" id="li-comment-8288">
          
            <article id="comment-8288" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8288"><time datetime="2013-04-22T07:30:57+00:00">22/04/2013 at 07:30</time></a></header>  <section class="comment-content comment"><p>@JeromeJ: pour Python3, c&#8217;est pareil, exactement le même article sauf que:</p>
<p>&#8211; le type &#8216;unicode&#8217; est appelé &#8216;str&#8217; et est celui créé par défaut quand on fabrique une chaîne<br />
&#8211; le type décodé est appelé &#8216;byte&#8217;<br />
&#8211; pas besoin de déclarer &#8220;# -*- coding: utf-8 -*-&#8221; si ton fichier est en UTF8 car c&#8217;est maintenant la valeur par defaut </p>
<p>C&#8217;est tout. Tout le reste est pareil.</p>
<p>Quand à s&#8217;assurer que toute écriture sur sdtout est en UTF8, c&#8217;est sans doute possible en faisant un truc du genre :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">&nbsp;
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">sys</span>
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">codecs</span> <span style="color: #ff7700;font-weight:bold;">import</span> getwritter
&nbsp;
<span style="color: #dc143c;">sys</span>.__stdout__ <span style="color: #66cc66;">=</span>  getwriter<span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">sys</span>.<span style="color: black;">stdout</span>.<span style="color: black;">buffer</span><span style="color: black;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;">

import sys
from codecs import getwritter

sys.__stdout__ =  getwriter('utf8')(sys.stdout.buffer)</p></div>

<p>Mais je ne le recommanderais pas car :</p>
<p>&#8211; ça remplace stout pour tout le code, y compris les libs tierces parties et qui sait ce que ça peut provoquer<br />
&#8211; ça rend le code importable (stdout n&#8217;est pas en utf8 sous windows, et ça printera un truc illisible)<br />
&#8211; ton script peut changer de context en cours d&#8217;éxécution, et sdtout ne sera alors plus le même, avec potentiellement un encoding différent</p>
<p>D&#8217;une manière générale il vaut mieux spécifier l&#8217;encoding par défaut directement sur les fonctions qui font l&#8217;opération d&#8217;écriture. Par exemple:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">sys</span>
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">codecs</span> <span style="color: #ff7700;font-weight:bold;">import</span> getwriter
<span style="color: #ff7700;font-weight:bold;">from</span> functools <span style="color: #ff7700;font-weight:bold;">import</span> partial
&nbsp;
p <span style="color: #66cc66;">=</span> partial<span style="color: black;">&#40;</span><span style="color: #ff7700;font-weight:bold;">print</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">file</span><span style="color: #66cc66;">=</span><span style="color: #dc143c;">codecs</span>.<span style="color: black;">getwriter</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">sys</span>.<span style="color: black;">stdout</span>.<span style="color: black;">buffer</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
p<span style="color: black;">&#40;</span><span style="color: #483d8b;">'yéééééééé'</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># cette fonction print toujours sur stdout en UTF8</span></pre></td></tr></table><p class="theCode" style="display:none;">import sys
from codecs import getwriter
from functools import partial

p = partial(print, file=codecs.getwriter('utf8')(sys.stdout.buffer))
p('yéééééééé') # cette fonction print toujours sur stdout en UTF8</p></div>

<p>Une alternative est de setter la bonne variable d&#8217;environnement pour que Python remplisse stdout avec l&#8217;encoding que l&#8217;on souhaite. Par exemple sous Ubuntu :</p>
<p><a href="http://drj11.wordpress.com/2007/05/14/python-how-is-sysstdoutencoding-chosen/" rel="nofollow">http://drj11.wordpress.com/2007/05/14/python-how-is-sysstdoutencoding-chosen/</a></p>
<p>(ou PYTHONIOENCODING=utf-8:surrogateescape python somescript.py selon les versions)</p>
<p>Cela conditionne par ailleur le résultat de :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">locale</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">locale</span>.<span style="color: black;">getdefaultlocale</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; import locale
&gt;&gt;&gt; locale.getdefaultlocale()[1]</p></div>

</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8289">
          
            <article id="comment-8289" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/de3d107ed1ccad362b44763106a78178?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/de3d107ed1ccad362b44763106a78178?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://www.olissea.com/' rel='external nofollow' class='url'>JeromeJ</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8289"><time datetime="2013-04-22T07:48:56+00:00">22/04/2013 at 07:48</time></a></header>  <section class="comment-content comment"><p>@Max: J&#8217;aurais essayé !</p>
<p>@Sam: Bien ce que je craignais … Pas mal l&#8217;idée de wrapper print avec functools.partial, j&#8217;aime !</p>
<p>(C&#8217;est bien le prob c&#8217;est que je travaille à moitié sous Windows)</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-even depth-1" id="li-comment-8291">
          
            <article id="comment-8291" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8291"><time datetime="2013-04-22T08:07:53+00:00">22/04/2013 at 08:07</time></a></header>  <section class="comment-content comment"><p>Le terminal de windows n&#8217;est pas configuré pour afficher de l&#8217;UTF8, Python ne pourra rien y changer. Il faut soit y printer l&#8217;encoding qu&#8217;il utilise actuellement (et se limiter aux caractères qu&#8217;il accepte du coup). On peut le trouver en faisant (il me semble):</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">locale</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">locale</span>.<span style="color: black;">getdefaultlocale</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#40;</span><span style="color: #483d8b;">'fr_FR'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'UTF-8'</span><span style="color: black;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; import locale
&gt;&gt;&gt; locale.getdefaultlocale()
('fr_FR', 'UTF-8')</p></div>

<p>Mais print devrait se charger de le faire automatiquement en Python3 donc ça devrait pas poser de problème. Simplement tu oublis les caractères chinois.</p>
<p>Soit setter l&#8217;encoding avant avec une commande : </p>
<p><a href="http://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how" rel="nofollow">http://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how</a></p>
<p>Ce n&#8217;est pas particulièrement lié à Python, c&#8217;est pareil dans tous les langages sous Windows car cet OS n&#8217;a pas adopté utf8 par default.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8292">
          
            <article id="comment-8292" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/83b27f6ff2301ca0f4ed1c7628620757?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/83b27f6ff2301ca0f4ed1c7628620757?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://www.desfrenes.com/' rel='external nofollow' class='url'>desfrenes</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8292"><time datetime="2013-04-22T08:42:22+00:00">22/04/2013 at 08:42</time></a></header>  <section class="comment-content comment"><p>&#8220;Par défaut, Python plante sur les erreurs d&#8217;encoding là ou d&#8217;autres langage (comme le PHP) se débrouillent pour vous sortir un truc (qui ne veut rien dire, qui peut corrompre toute votre base de données, mais qui ne plante pas).&#8221;</p>
<p>Ouais&#8230; bah vaut mieux que ça plante, au moins ça donne l&#8217;occasion de réparer proprement.</p>
<p>Merci pour cet excellent résumé.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-8294">
          
            <article id="comment-8294" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/e02b4f39f9fc66bea03fee2240a8d09e?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/e02b4f39f9fc66bea03fee2240a8d09e?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">AxelF  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8294"><time datetime="2013-04-22T08:54:15+00:00">22/04/2013 at 08:54</time></a></header>  <section class="comment-content comment"><p>Il y a encore des choses plus rigolotes à faire avec l&#8217;encoding. Par exemple ce fichier est tout à fait valide :</p>
<p><code># -*- coding: rot13 -*-<br />
cevag h'Obawbhe fnz'</code></p>
<p>j&#8217;avais découvert ça il y a quelques temps <a href="http://linuxfr.org/users/guillaum/journaux/python-encodage-rot13-brainfuck" rel="nofollow">sur linuxfr</a>, avec même en prime l&#8217;encodage en brainfuck, mais on peut également imaginer encoder son fichier en whitespace ou tout autre encodage hyper pratique &#8230;</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-8296">
          
            <article id="comment-8296" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8296"><time datetime="2013-04-22T09:09:38+00:00">22/04/2013 at 09:09</time></a></header>  <section class="comment-content comment"><p>Tristement, ça ne marche plus avec Python 3. On pouvait aussi utiliser base64, zlib, etc.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-kontre even thread-even depth-1" id="li-comment-8297">
          
            <article id="comment-8297" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">kontre  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8297"><time datetime="2013-04-22T09:31:57+00:00">22/04/2013 at 09:31</time></a></header>  <section class="comment-content comment"><p>Uhu : <a href="http://sebsauvage.net/links/?Q3zlyg" rel="nofollow">http://sebsauvage.net/links/?Q3zlyg</a><br />
Coïncidence ?</p>
<p>C&#8217;est la première fois que j&#8217;ai l&#8217;espoir de comprendre et d&#8217;utiliser correctement les fichues chaînes de caractère en python. Chapeau les mecs ! Mais je flippe quand même de modifier mon code sur ce sujet, qui fonctionne actuellement à peu près.</p>
<p>Par rapport à codec.open, il y a ça dans la doc :</p>
<blockquote><p><strong>Note</strong><br />
Files are always opened in binary mode, even if no binary mode was specified. This is done to avoid data loss due to encodings using 8-bit values. This means that no automatic conversion of &#8216;\n&#8217; is done on reading and writing.</p></blockquote>
<p>Ça peut être emmerdant ça ? Il y a un moyen simple de faire la conversion à la main ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-8306">
          
            <article id="comment-8306" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8306"><time datetime="2013-04-22T11:44:31+00:00">22/04/2013 at 11:44</time></a></header>  <section class="comment-content comment"><p>Je dirais qu&#8217;un bon strip() fera bien l&#8217;affaire :-)</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-kontre even thread-even depth-1" id="li-comment-8312">
          
            <article id="comment-8312" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">kontre  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8312"><time datetime="2013-04-22T12:19:09+00:00">22/04/2013 at 12:19</time></a></header>  <section class="comment-content comment"><p>En effet, ça marche bien à la lecture, mais du coup pas à l&#8217;écriture. Y&#8217;a plus qu&#8217;à utiliser la version standard sans oublier de convertir, j&#8217;ai l&#8217;impression.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-kontre odd alt thread-odd thread-alt depth-1" id="li-comment-8321">
          
            <article id="comment-8321" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">kontre  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8321"><time datetime="2013-04-22T13:38:15+00:00">22/04/2013 at 13:38</time></a></header>  <section class="comment-content comment"><p>Autre différence python2/3 : les exceptions. En python3 on peut leur passer un message en unicode, alors qu&#8217;en python2 il faut le .encode(&#8220;utf-8). Et ça chie avec les docstrings, après&#8230;</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-8329">
          
            <article id="comment-8329" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/71c8468ff89b252f8a01aa2ce4c53053?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/71c8468ff89b252f8a01aa2ce4c53053?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">YvesD  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8329"><time datetime="2013-04-22T14:48:00+00:00">22/04/2013 at 14:48</time></a></header>  <section class="comment-content comment"><p>Bel article, bravo, j&#8217;aime bien la structuration en entrée (eh eh les entrées, règle #4, plat (le traitement python), dessert (les sorties, règle #5). </p>
<p>Cependant je vois souvent comme directivepython, les 2 écritures pour UTF8:</p>
<p><strong># -*- coding: utf8 -*-</strong><br />
ou<br />
<em># -*- coding: utf-8 -*-</em></p>
<p>Est-ce la même chose ? Laquelle est à privilégiée ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-8330">
          
            <article id="comment-8330" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8330"><time datetime="2013-04-22T14:57:24+00:00">22/04/2013 at 14:57</time></a></header>  <section class="comment-content comment"><p>C&#8217;est kif kif.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-8333">
          
            <article id="comment-8333" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/e2ed1646f3954f52a8a9d8b1cb4e719b?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/e2ed1646f3954f52a8a9d8b1cb4e719b?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Orlanth  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8333"><time datetime="2013-04-22T15:14:17+00:00">22/04/2013 at 15:14</time></a></header>  <section class="comment-content comment"><p>Copié collé direct dans mes notes, à côté de  : <a href="http://sebsauvage.net/python/charsets_et_encoding.html" rel="nofollow">http://sebsauvage.net/python/charsets_et_encoding.html</a></p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8367">
          
            <article id="comment-8367" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/f1e94121f75fd79a19595316bc3a7e2d?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/f1e94121f75fd79a19595316bc3a7e2d?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Gring  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8367"><time datetime="2013-04-23T09:49:38+00:00">23/04/2013 at 09:49</time></a></header>  <section class="comment-content comment"><p>Merc＀ p〇ʋr cごt art%cle tr⁋s instrucⁱf !</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-8391">
          
            <article id="comment-8391" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/9369e3d134cec4a408d88aa31920bec4?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/9369e3d134cec4a408d88aa31920bec4?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">mentat  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8391"><time datetime="2013-04-23T19:31:23+00:00">23/04/2013 at 19:31</time></a></header>  <section class="comment-content comment"><p>stdin et pas stding dans :<br />
sys.(stding|stdout).encoding.</p>
<p>A part çà, rien à redire, c&#8217;est nickel comme d&#8217;hab !</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-8397">
          
            <article id="comment-8397" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8397"><time datetime="2013-04-23T21:38:03+00:00">23/04/2013 at 21:38</time></a></header>  <section class="comment-content comment"><p>C&#8217;est l&#8217;acceng, c&#8217;est pour ça.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-8678">
          
            <article id="comment-8678" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/e5176cded08b65b91099dc61f31d43c8?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/e5176cded08b65b91099dc61f31d43c8?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://sebastien-dupire.info' rel='external nofollow' class='url'>Kyoku57</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-8678"><time datetime="2013-05-05T10:42:26+00:00">05/05/2013 at 10:42</time></a></header>  <section class="comment-content comment"><p>Alors là, très bon article !</p>
<p>Quelque soit le langage, le problème le plus récurrent est toujours celui de la manipulation des différents types d&#8217;encoding.</p>
<p>Je ne te parle pas de ceux qui développent sous Windows avec un CP-1252 par défaut dans tous les logiciels et qui même avec un réglage de l&#8217;IDE finit un jour où l&#8217;autre par te ressortir l&#8217;encoding par défaut genre .. à la réouverture.</p>
<p>Bref, éternel problème que tu as très bien mis en évidence. Tout le problème est d&#8217;origine interface chaise-clavier. Il faut se sortir les doigts du boule pour faire du propre.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12441">
          
            <article id="comment-12441" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/680b846ea80b0ef20759890ba41d387a?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/680b846ea80b0ef20759890ba41d387a?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">yuiio  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-12441"><time datetime="2013-08-05T14:26:15+00:00">05/08/2013 at 14:26</time></a></header>  <section class="comment-content comment"><p>Juste merci</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-14435">
          
            <article id="comment-14435" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/28233f8e47f1e832a10624a099b164d8?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/28233f8e47f1e832a10624a099b164d8?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">A_Vgyle  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-14435"><time datetime="2013-09-27T20:25:02+00:00">27/09/2013 at 20:25</time></a></header>  <section class="comment-content comment"><p>Merci grandement!<br />
2 jours que je plante sur ces %?!/%££!! d&#8217;encoding, et en 15 minutes&#8230; Réglé<br />
Thanx<br />
Continue!!!</p>
</section></div></div></article>          <!-- #comment-## -->
        <ul class="children">
        <li class="comment byuser comment-author-max odd alt depth-2" id="li-comment-14444">
          
            <article id="comment-14444" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/eb8e400eec222e2b09bd901aba2cb2dc?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/eb8e400eec222e2b09bd901aba2cb2dc?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Max  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-14444"><time datetime="2013-10-01T10:27:52+00:00">01/10/2013 at 10:27</time></a></header>  <section class="comment-content comment"><p>C&#8217;est laborieux chez leaseweb :/<br />
Ensuite ça a été un probleme de varnish qui s&#8217;est bien lancé quand leaseweb a reboot les VPS mais qui pour une raison mystérieuse ne voulait rien savoir :/</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-14882">
          
            <article id="comment-14882" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/e78fd560fdb27287f18a9c6d6adb7ac1?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/e78fd560fdb27287f18a9c6d6adb7ac1?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://geotribu.net/' rel='external nofollow' class='url'>Guts</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-14882"><time datetime="2013-10-16T10:29:48+00:00">16/10/2013 at 10:29</time></a></header>  <section class="comment-content comment"><p>Merci pour l&#8217;article qui m&#8217;a bien aidé sur certains points de blocage mais il y a toujours quelque chose que je ne parviens pas à résoudre : le parsing (avec os.walk) de fichiers qui contiennent des accents. Ce qui me déroute surtout c&#8217;est la différence entre Windows et Ubuntu.</p>
<p>Dans mon <a href="https://github.com/Guts/Metadator" rel="nofollow">programme</a> j&#8217;ai une fonction (li_geofiles()) chargée de lister les fichiers compatibles (selon leur extension et l&#8217;existence de leurs dépendances) contenus dans une arborescence à partir d&#8217;un dossier indiqué par l&#8217;utilisateur (foldertarget retourné via tkMessageBox.askdirectory) et qui bloque sur les noms de fichiers qui contiennent un accent&#8230;mais seulement sur Ubuntu ! Ça fait 2 jours que je me flagelle là-dessus et j&#8217;ai essayé qqls solutions :<br />
&#8211; un try/except sur le nom de fichier et réencodage à la volée (solution choisie) mais qui a le (gros) défaut de ne pas lister les fichiers avec accents (os.path.isfile ne les reconnaît pas&#8230;)<br />
&#8211; passer foldertarget en unicode mais ça marche pô (idem avec path.normpath(foldertarget)</p>
<p>Voici la fonction en question :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">for</span> root<span style="color: #66cc66;">,</span> dirs<span style="color: #66cc66;">,</span> files <span style="color: #ff7700;font-weight:bold;">in</span> walk<span style="color: black;">&#40;</span>foldertarget<span style="color: black;">&#41;</span>:
    <span style="color: #008000;">self</span>.<span style="color: black;">num_folders</span> <span style="color: #66cc66;">=</span> <span style="color: #008000;">self</span>.<span style="color: black;">num_folders</span> + <span style="color: #008000;">len</span><span style="color: black;">&#40;</span>dirs<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">for</span> f <span style="color: #ff7700;font-weight:bold;">in</span> files:
            <span style="color: #ff7700;font-weight:bold;">try</span>:
                <span style="color: #008000;">unicode</span><span style="color: black;">&#40;</span>path.<span style="color: black;">join</span><span style="color: black;">&#40;</span>root<span style="color: #66cc66;">,</span> f<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
                full_path <span style="color: #66cc66;">=</span> path.<span style="color: black;">join</span><span style="color: black;">&#40;</span>root<span style="color: #66cc66;">,</span> f<span style="color: black;">&#41;</span>
            <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">UnicodeDecodeError</span><span style="color: #66cc66;">,</span> e:
                full_path <span style="color: #66cc66;">=</span> path.<span style="color: black;">join</span><span style="color: black;">&#40;</span>root<span style="color: #66cc66;">,</span> f.<span style="color: black;">decode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'latin1'</span><span style="color: black;">&#41;</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
                <span style="color: #008000;">self</span>.<span style="color: black;">logger</span>.<span style="color: black;">error</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;%s:%s&quot;</span> % <span style="color: black;">&#40;</span>e<span style="color: #66cc66;">,</span> f.<span style="color: black;">decode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf-8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
            <span style="color: #808080; font-style: italic;"># Looping on files contained</span>
            <span style="color: #ff7700;font-weight:bold;">if</span> path.<span style="color: black;">splitext</span><span style="color: black;">&#40;</span>full_path.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span> <span style="color: #66cc66;">==</span> <span style="color: #483d8b;">'.shp'</span> <span style="color: #ff7700;font-weight:bold;">and</span> 
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'%s.dbf'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> % full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">and</span> 
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'%s.shx'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> % full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">and</span> 
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'%s.prj'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> % full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>:
                    <span style="color: #808080; font-style: italic;"># add complete path of shapefile</span>
                    <span style="color: #008000;">self</span>.<span style="color: black;">li_shp</span>.<span style="color: black;">append</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#41;</span>
            <span style="color: #ff7700;font-weight:bold;">elif</span> path.<span style="color: black;">splitext</span><span style="color: black;">&#40;</span>full_path.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span> <span style="color: #66cc66;">==</span> <span style="color: #483d8b;">'.tab'</span> <span style="color: #ff7700;font-weight:bold;">and</span> 
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>+ <span style="color: #483d8b;">'.dat'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">and</span> 
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>+ <span style="color: #483d8b;">'.map'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">and</span> 
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>+ <span style="color: #483d8b;">'.id'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>:
                    <span style="color: #808080; font-style: italic;"># add complete path of MapInfo file</span>
                    <span style="color: #008000;">self</span>.<span style="color: black;">li_tab</span>.<span style="color: black;">append</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;">for root, dirs, files in walk(foldertarget):
    self.num_folders = self.num_folders + len(dirs)
        for f in files:
            try:
                unicode(path.join(root, f))
                full_path = path.join(root, f)
            except UnicodeDecodeError, e:
                full_path = path.join(root, f.decode('latin1').encode('utf8'))
                self.logger.error(&quot;%s:%s&quot; % (e, f.decode('utf-8')))
            # Looping on files contained
            if path.splitext(full_path.lower())[1] == '.shp' and 
                path.isfile('%s.dbf'.lower() % full_path[:-4]) and 
                path.isfile('%s.shx'.lower() % full_path[:-4]) and 
                path.isfile('%s.prj'.lower() % full_path[:-4]):
                    # add complete path of shapefile
                    self.li_shp.append(full_path)
            elif path.splitext(full_path.lower())[1] == '.tab' and 
                path.isfile(full_path[:-4]+ '.dat'.lower()) and 
                path.isfile(full_path[:-4]+ '.map'.lower()) and 
                path.isfile(full_path[:-4]+ '.id'.lower()):
                    # add complete path of MapInfo file
                    self.li_tab.append(full_path)</p></div>

<p>Si quelqu&#8217;un voit le problème&#8230;et surtout la solution !</p>
<p>PS : je suis géographe à la base donc pas vraiment un développeur&#8230; #indulgence</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-15398">
          
            <article id="comment-15398" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/c055f36fe773e826e501205297f314e6?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/c055f36fe773e826e501205297f314e6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Adrien  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-15398"><time datetime="2013-11-04T14:41:52+00:00">04/11/2013 at 14:41</time></a></header>  <section class="comment-content comment"><p>Un grand merci, enfin un tuto qui va à l&#8217;essentiel. J&#8217;ai enfin compris comment ça fonctionne.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-17557">
          
            <article id="comment-17557" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/0a17b925c74e4866698b382890452410?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/0a17b925c74e4866698b382890452410?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Bromway  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-17557"><time datetime="2013-12-26T22:43:53+00:00">26/12/2013 at 22:43</time></a></header>  <section class="comment-content comment"><p>Juste au Top!<br />
Un super cadeau de Noel qui vient de m&#8217;offrir une ou deux nuit planche de moins</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-18737">
          
            <article id="comment-18737" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/ea8f752e4ca2c76ec567486750b68bea?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/ea8f752e4ca2c76ec567486750b68bea?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://recher.wordpress.com/' rel='external nofollow' class='url'>Réchèr</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-18737"><time datetime="2014-01-20T23:01:08+00:00">20/01/2014 at 23:01</time></a></header>  <section class="comment-content comment"><p>Article auquel je me réfère régulièrement, car à chaque fois que je résout mes problèmes d&#8217;encodage, je ne me souviens plus comment je les ais résolus et je dois refaire le raisonnement dans mon cerveau.</p>
<p>Juste pour info : y&#8217;a des fois, syt.stdout.encoding renvoie None.</p>
<p>Je suis en python 2.7 sous Windows (oui, je sais), quand j&#8217;exécute mon script dans la console, j&#8217;ai &#8220;cp850&#8221;. Quand je l&#8217;exécute avec Ctrl-B dans Sublime Text, j&#8217;ai None.</p>
<p>Du coup, je fais le bourrin comme ça pour écrire sur stdout :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;"># récupération de l'encodage de la sortie standard.</span>
encoding_out <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">stdout</span>.<span style="color: black;">encoding</span>
<span style="color: #ff7700;font-weight:bold;">if</span> encoding_out <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #008000;">None</span>:
    encoding_out <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;utf-8&quot;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> pri<span style="color: black;">&#40;</span>whatever<span style="color: black;">&#41;</span>:
    unicode_string <span style="color: #66cc66;">=</span> <span style="color: #008000;">unicode</span><span style="color: black;">&#40;</span>whatever<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span> unicode_string.<span style="color: black;">encode</span><span style="color: black;">&#40;</span>encoding_out<span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;replace&quot;</span><span style="color: black;">&#41;</span>
&nbsp;
pri<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;é mon cul cé du poulé.&quot;</span><span style="color: black;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;"># récupération de l'encodage de la sortie standard.
encoding_out = sys.stdout.encoding
if encoding_out is None:
    encoding_out = &quot;utf-8&quot;

def pri(whatever):
    unicode_string = unicode(whatever)
    print unicode_string.encode(encoding_out, &quot;replace&quot;)

pri(&quot;é mon cul cé du poulé.&quot;)</p></div>

</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-18744">
          
            <article id="comment-18744" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/ea8f752e4ca2c76ec567486750b68bea?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/ea8f752e4ca2c76ec567486750b68bea?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://recher.wordpress.com' rel='external nofollow' class='url'>Réchèr</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-18744"><time datetime="2014-01-21T08:47:13+00:00">21/01/2014 at 08:47</time></a></header>  <section class="comment-content comment"><p>Cela va sans dire, mais je précise que dans mon code précédent, j&#8217;ai bien évidemment mis le &#8220;from __future__ import unicode_literals&#8221; au début de mes fichiers.</p>
<p>Du coup la chaîne &#8220;é mon cul cé du poulé&#8221; est de l&#8217;unicode.</p>
<p>Et ça marche, je vois mes accents, aussi bien dans la console DOS que dans la console Sublime Text.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-19410">
          
            <article id="comment-19410" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/42bea47e0da1af52f054aedaa04a80ed?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/42bea47e0da1af52f054aedaa04a80ed?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://outofoffice.regepe.com' rel='external nofollow' class='url'>Frederic</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-19410"><time datetime="2014-02-06T21:55:25+00:00">06/02/2014 at 21:55</time></a></header>  <section class="comment-content comment"><p>Article salvateur!<br />
Juste une question:<br />
os.mkdir(stringenutf8.encode(sys.getfilesystemencoding())) ne marche pas sur windows avec python 2.7<br />
Tu sais pourquoi?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-19417">
          
            <article id="comment-19417" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-19417"><time datetime="2014-02-07T08:55:16+00:00">07/02/2014 at 08:55</time></a></header>  <section class="comment-content comment"><p>Parce qu&#8217;il y a plusieurs notions mélangées dans cette ligne.</p>
<p>mkdir a besoin d&#8217;une chaîne encodée dans l&#8217;encoding du file system.</p>
<p>stringenutf8 est visiblement déjà encodée. On ne peut pas appelée &#8220;encode()&#8221; dessus.</p>
<p>Soit l&#8217;encoding du fs est utf8, auquel cas tu peux l&#8217;utiliser directement, soit il faut décoder la string vers unicode, et la réencoder vers l&#8217;encoding du fs.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-23309">
          
            <article id="comment-23309" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/7f0380eef9c7bcd732517e423ef189cc?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/7f0380eef9c7bcd732517e423ef189cc?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">benjamin  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-23309"><time datetime="2014-04-04T08:22:03+00:00">04/04/2014 at 08:22</time></a></header>  <section class="comment-content comment"><p>tu m&#8217;as sauvé la vie, 1 semaine à me battre sur un code car un pu### de &#8220;°&#8221; dans l&#8217;adresse !!<br />
bref, je te vénère. Merci pour cet excellent article en VF.<br />
ps : j&#8217;aime bien l&#8217;exemple str(&#8220;Détécé&#8221;) &#8230;</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-24150">
          
            <article id="comment-24150" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/cdc7f38c47e249eb8d88b45695b112f9?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/cdc7f38c47e249eb8d88b45695b112f9?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Goldy  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-24150"><time datetime="2014-04-17T23:32:01+00:00">17/04/2014 at 23:32</time></a></header>  <section class="comment-content comment"><p>Une petite chose qui me semble avoir été omise dans l&#8217;explication, c&#8217;est que utf-8 est compatible avec ascii.</p>
<p>C&#8217;est à dire que les 128 premiers caractères de la table utf-8 correspondent à la table ascii (c&#8217;est d&#8217;ailleurs une des raisons pour laquelle utf-8 est utilisé aux détriments des autres unicodes qui sont utf-16 et utf-32).</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-24170">
          
            <article id="comment-24170" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/7517bb7abc49e6f712046154728489fe?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/7517bb7abc49e6f712046154728489fe?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://fredtantini.free.fr' rel='external nofollow' class='url'>fredtantini</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-24170"><time datetime="2014-04-18T07:28:56+00:00">18/04/2014 at 07:28</time></a></header>  <section class="comment-content comment"><p>Je retombe dessus ; toujours très bon, comme d&#8217;habitude.</p>
<p>J&#8217;en profite pour corriger quelques typos :</p>
<p>Le texte sera de type ‘str’, et decode() retourne (si vous lui fournissez le bon codec ;-)), une version ‘unicode’.<br />
-&gt; soit virer la virgule, soit changer les parenthèses en virgules.</p>
<p>un envoie dans une socket<br />
-&gt; envoi</p>
<p>A la sortie<br />
-&gt; À</p>
<p>Les outils de la dernières chance<br />
-&gt; dernière</p>
<p>cyrilique<br />
-&gt; cyrillique</p>
<p>Merci à vous et continuez en restant comme vous êtes.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-24318">
          
            <article id="comment-24318" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/57757fbf569001c78c6fa859a2ad9e14?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/57757fbf569001c78c6fa859a2ad9e14?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">e-jambon  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-24318"><time datetime="2014-04-20T01:15:03+00:00">20/04/2014 at 01:15</time></a></header>  <section class="comment-content comment"><p>Il eut été plaisant que je commençasse à lire ce blog il y a quelques mois, avant de décider d&#8217;apprendre ruby&amp;rails. </p>
<p>C&#8217;est fou ce que python ressemble à ruby, soit dit en passant.<br />
Peut être un chouilla moins élégant, mais moins tortueux à relire quand on connaît pas&#8230;la preuve j&#8217;arrive à comprendre presque tout sans faire trop d&#8217;efforts.<br />
Given I&#8217;am as bright as a dark night&#8230;excellents articles très bien rédigés. Un grand merci.</p>
<p>@Goldy merci pour la précision, ça me chiffonnait justement.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-even depth-1" id="li-comment-24349">
          
            <article id="comment-24349" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-24349"><time datetime="2014-04-20T12:11:54+00:00">20/04/2014 at 12:11</time></a></header>  <section class="comment-content comment"><p>@Goldy: j&#8217;étais persuadé de l&#8217;avoir mis, je deviens gaga.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-25127">
          
            <article id="comment-25127" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/34fec3e6399215627b7ff146c855e596?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/34fec3e6399215627b7ff146c855e596?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Jean-Marie Sézérat  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-25127"><time datetime="2014-05-02T12:52:48+00:00">02/05/2014 at 12:52</time></a></header>  <section class="comment-content comment"><p>Vrabo<br />
Disons tous en choeur : &#8220;àéèùçÀÉÈÙÇ&#8221; &#8211; non : en chœur, c&#8217;est quand même plus joli&#8230;</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-kontre odd alt thread-even depth-1" id="li-comment-25254">
          
            <article id="comment-25254" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='https://github.com/Nodd' rel='external nofollow' class='url'>kontre</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-25254"><time datetime="2014-05-05T08:10:56+00:00">05/05/2014 at 08:10</time></a></header>  <section class="comment-content comment"><p>Dans python3, on peut passer un encoding à la fonction open(), le décodage se fera de manière transparente. Super pratique !<br />
C&#8217;est possible en python2 avec le module coding, mais celui-ci, ne gère pas les différentes fin de ligne, ce qui est bof pour un truc sensé être plus compatible.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-25838">
          
            <article id="comment-25838" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/0fc98a591e9e93601e116aa374bc1ee5?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/0fc98a591e9e93601e116aa374bc1ee5?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">vecenzomene  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-25838"><time datetime="2014-05-07T14:37:03+00:00">07/05/2014 at 14:37</time></a></header>  <section class="comment-content comment"><p>bonjour,<br />
si par exemple je telecharge la page de google qui est securisé et ya du sharabiaya dans le code source et qui est en binaire comment faire pour convertir en utf-8 sachant que j&#8217;ai une erreur de conversion quand j&#8217;essai et puis comment faire pour lire les vrai contenue par exemple les resulats des recherche avec les liens et non le charabiya de truc securisé</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-even depth-1" id="li-comment-26631">
          
            <article id="comment-26631" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-26631"><time datetime="2014-05-09T09:38:25+00:00">09/05/2014 at 09:38</time></a></header>  <section class="comment-content comment"><p>Je ne connais aucune page de google sécursé avec un code source en binaire.</p>
<p>Quand je vais sur google.com, je vois bien le code source : </p>
<p><a href="http://0bin.net/paste/9-wDHADDZvekQFyC#G1VToTRNQslSE7ZaWWYI1eAK5l8k1sEjNyaFWej+DfQ=" rel="nofollow">http://0bin.net/paste/9-wDHADDZvekQFyC#G1VToTRNQslSE7ZaWWYI1eAK5l8k1sEjNyaFWej+DfQ=</a></p>
<p>C&#8217;est beaucoup de javascript compressé, mais c&#8217;est un code source en clair.</p>
<p>Le charset n&#8217;est pas déclaré dans la page, mais par les headers :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">⟩ <span style="color: #c20cb9; font-weight: bold;">wget</span> <span style="color: #660033;">--server-response</span> <span style="color: #660033;">--spider</span> https:<span style="color: #000000; font-weight: bold;">//</span>google.com
Mode « spider » activé. Vérification de l<span style="color: #ff0000;">'existence d'</span>un fichier distant.
<span style="color: #660033;">--2014-05-09</span> <span style="color: #000000;">16</span>:06:05--  https:<span style="color: #000000; font-weight: bold;">//</span>google.com<span style="color: #000000; font-weight: bold;">/</span>
Résolution de google.com <span style="color: #7a0874; font-weight: bold;">&#40;</span>google.com<span style="color: #7a0874; font-weight: bold;">&#41;</span>… 74.125.135.100, 74.125.135.113, 74.125.135.139, ...
Connexion à google.com <span style="color: #7a0874; font-weight: bold;">&#40;</span>google.com<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #000000; font-weight: bold;">|</span>74.125.135.100<span style="color: #000000; font-weight: bold;">|</span>:<span style="color: #000000;">443</span>… connecté.
requête HTTP transmise, en attente de la réponse… 
  HTTP<span style="color: #000000; font-weight: bold;">/</span><span style="color: #000000;">1.1</span> <span style="color: #000000;">302</span> Found
  Location: https:<span style="color: #000000; font-weight: bold;">//</span>www.google.co.th<span style="color: #000000; font-weight: bold;">/</span>?<span style="color: #007800;">gws_rd</span>=cr<span style="color: #000000; font-weight: bold;">&amp;</span><span style="color: #007800;">ei</span>=f5psU5LRBIOyrgeS64HoBA
  Cache-Control: private
  Content-Type: text<span style="color: #000000; font-weight: bold;">/</span>html; <span style="color: #007800;">charset</span>=UTF-<span style="color: #000000;">8</span></pre></td></tr></table><p class="theCode" style="display:none;">⟩ wget --server-response --spider https://google.com
Mode « spider » activé. Vérification de l'existence d'un fichier distant.
--2014-05-09 16:06:05--  https://google.com/
Résolution de google.com (google.com)… 74.125.135.100, 74.125.135.113, 74.125.135.139, ...
Connexion à google.com (google.com)|74.125.135.100|:443… connecté.
requête HTTP transmise, en attente de la réponse… 
  HTTP/1.1 302 Found
  Location: https://www.google.co.th/?gws_rd=cr&amp;ei=f5psU5LRBIOyrgeS64HoBA
  Cache-Control: private
  Content-Type: text/html; charset=UTF-8</p></div>

<p>Donc c&#8217;est bien de l&#8217;utf8.</p>
<p>Obtenir les résultats de la recherche plutôt que le code n&#8217;a rien à voir avec cela. Ce n&#8217;est pas une question d&#8217;encoding, ni de binaire, c&#8217;est simplement le niveau de fonctionalité que google choisit d&#8217;utiliser en fonction du client. Si tu te fais passer pour lynx par exemple, google n&#8217;utilisera pas javascript et tu récupéreras du HTML pure, plus facile à parser. Par exemple, avec la lib requets :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;https://google.com/search?q=sametmax&quot;</span><span style="color: #66cc66;">,</span> headers<span style="color: #66cc66;">=</span><span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;User-Agent&quot;</span>: <span style="color: #483d8b;">&quot;Lynx/2.8.7rel.2 libwww-FM/2.14 SSL-MM/1.4.1 OpenSSL/1.0.0a&quot;</span><span style="color: black;">&#125;</span><span style="color: black;">&#41;</span>.<span style="color: black;">content</span></pre></td></tr></table><p class="theCode" style="display:none;">requests.get(&quot;https://google.com/search?q=sametmax&quot;, headers={&quot;User-Agent&quot;: &quot;Lynx/2.8.7rel.2 libwww-FM/2.14 SSL-MM/1.4.1 OpenSSL/1.0.0a&quot;}).content</p></div>

<p>Et ça me file du HTML que je peux lire avec beautifulsoup.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-32126">
          
            <article id="comment-32126" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/6c8ae2b6b7fe6954f088a32e3acb5065?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/6c8ae2b6b7fe6954f088a32e3acb5065?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">thieery  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-32126"><time datetime="2014-05-20T22:51:32+00:00">20/05/2014 at 22:51</time></a></header>  <section class="comment-content comment"><p>Bonjour,<br />
je cherche à lire le fichier dump windows et rien à faire, avez-vous une idée merci</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-even depth-1" id="li-comment-32232">
          
            <article id="comment-32232" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-32232"><time datetime="2014-05-21T05:34:56+00:00">21/05/2014 at 05:34</time></a></header>  <section class="comment-content comment"><p>Il faut manger des crêpes au chocolat. Tout va mieux avec des crêpes au chocolat.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-51957">
          
            <article id="comment-51957" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/f4b94e3d2b98d05ed47501bf4d579fac?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/f4b94e3d2b98d05ed47501bf4d579fac?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Heavy27z  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-51957"><time datetime="2014-06-13T09:14:40+00:00">13/06/2014 at 09:14</time></a></header>  <section class="comment-content comment"><p>Parfait cet article pour se dépatouiller quand on y comprend queudal :).<br />
Merci pour ce gros travail. En 20 minutes de lecture, ce blog me fait gagner à chaque fois minimum 2h. Faudrait que j&#8217;vous verse une partie de mon salaire&#8230;</p>
<p>Petit détail concernant l&#8217;article : Perso, j&#8217;ai du mal avec la notion d&#8217;encode et de decode (dans quel sens est-ce que ça marche), puisque finalement le texte de brute n&#8217;existe pas comme c&#8217;est dit, à quoi correspondent les données que l&#8217;on a de part et d&#8217;autre d&#8217;une chaine str ou byte (pas simple de se faire comprendre, bref).</p>
<p>J&#8217;ai trouvé des éléments de réponses dans un article détaillé de la doc python : <a href="https://docs.python.org/3/howto/unicode.html" rel="nofollow">https://docs.python.org/3/howto/unicode.html</a> (Existe aussi pour python 2)</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-even depth-1" id="li-comment-52006">
          
            <article id="comment-52006" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-52006"><time datetime="2014-06-13T10:18:20+00:00">13/06/2014 at 10:18</time></a></header>  <section class="comment-content comment"><p>Le texte est un flux de bits. Ce flux de bits est dans un encoding. Quand on décode, on récupère un objet python qui peut être traduit vers n&#8217;importe quel autre flux de bits. Ce qu&#8217;il y dans cet objet Python n&#8217;est pas important. Il faut imaginer qu&#8217;il est neutre. Decoder fait passer du flux de bits à cet objet Python, encoder fait passer de cet objet python aux flux de bits.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-52036">
          
            <article id="comment-52036" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/f4b94e3d2b98d05ed47501bf4d579fac?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/f4b94e3d2b98d05ed47501bf4d579fac?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Heavy27z  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-52036"><time datetime="2014-06-13T10:46:26+00:00">13/06/2014 at 10:46</time></a></header>  <section class="comment-content comment"><p>Merci d&#8217;avoir pris le temps de répondre, la doc python m&#8217;avait fait comprendre quelque chose de ce genre, mais là c&#8217;est très clair :).</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-80168">
          
            <article id="comment-80168" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/4310af6df1c3bb3d71bbb34e7d7f8a74?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/4310af6df1c3bb3d71bbb34e7d7f8a74?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">gmarceau  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-80168"><time datetime="2014-07-01T20:43:59+00:00">01/07/2014 at 20:43</time></a></header>  <section class="comment-content comment"><p>Merci pour cet article clair et utile.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-95445">
          
            <article id="comment-95445" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/1c5fbf0b65e76860769936556953f23b?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/1c5fbf0b65e76860769936556953f23b?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Mars Prosac  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-95445"><time datetime="2014-07-19T22:19:01+00:00">19/07/2014 at 22:19</time></a></header>  <section class="comment-content comment"><p>Petit bémol à l&#8217;article : <em>&#8220;En Python 2.7, l’encoding par défaut est ASCII, donc il faut presque toujours le déclarer&#8221;</em><br />
Oui, il faut le déclarer si on souhaite coder autrement qu&#8217;en ascii, et dans ce cas, ça revient à dire &#8220;si on souhaite coder des strings autre qu&#8217;en ascii&#8221;. Autre précision qu&#8217;il ne me semble pas avoir lu : UTF8 est compatible ASCII (pas le contraire évidemment). Donc, un code 2.7 codé/enregistré en ascii est compatible avec un interpréteur 3.x. Enfin, l&#8217;encoding sqlite3 par défaut est l&#8217;utf8 (pragma encoding), ce qui lui confère également une compatiblité totale avec du code 2.7 en ascii (et autre création de table ou injection de données interne au programme).<br />
Et pour terminer : <em>&#8220;régler son éditeur sur le bon encoding&#8221;</em> : oui et non : vim va régler l&#8217;encoding par défaut sur le &#8220;locale&#8221; en cours (:set encoding=&#8230;) ; mais, si on code en C ou en Python, un :w écrira bien le fichier en ascii à moins d&#8217;utiliser des caractères non ascii propre au &#8220;locale&#8221; en cours (éè &#8230;). Eclipse travaille de la même façon, je peux avoir un &#8220;locale&#8221; en latin-1 (iso8859-1), coder sous PyDev ou CDT, le résultat sera bien un fichier ascii. Mes 2 kopecs. Merci pour l&#8217;article. cdt,</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-104523">
          
            <article id="comment-104523" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Marco  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-104523"><time datetime="2014-08-02T12:42:56+00:00">02/08/2014 at 12:42</time></a></header>  <section class="comment-content comment"><p>J&#8217;essai un peu le langage python sur l&#8217;ide netbeans, franchement pas convaincu&#8230; la doc existe en français ? (mais c pas sûr d&#8217;y comprendre d&#8217;avantage).</p>
<p>Kel bordel l&#8217;encoding, j&#8217;arrive jamais à savoir kel encode y faut utiliser mais dans netbeans, tou s&#8217;affiche bien (lequel utilise par défaut windows-1252). dans la console y&#8217;a pas un accent qui s&#8217;affiche correc. jamais vu un langage aussi ambigue et confus&#8230; chiotte !</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-104567">
          
            <article id="comment-104567" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-104567"><time datetime="2014-08-02T16:25:26+00:00">02/08/2014 at 16:25</time></a></header>  <section class="comment-content comment"><p>J&#8217;ai jamais vu de doc en fr.</p>
<p>Pour ton encoding, il faut que tu relise l&#8217;article. Il te faut connaitre l&#8217;encoding de ta console, comme pour tous les langages du monde.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-105271">
          
            <article id="comment-105271" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Marco  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-105271"><time datetime="2014-08-03T11:04:52+00:00">03/08/2014 at 11:04</time></a></header>  <section class="comment-content comment"><p>Bon, ok, j&#8217;ai fini par comprendre un peu mieux le sujet et comment Python s&#8217;est adapté à la norme Unicode. J&#8217;ai surtout compris qu&#8217;à force de fouiller un <em>string </em>on finit par découvrir qu&#8217;il est en fait constitué de <em>Bytes</em> lesquels on des possibilités de &#8220;petits&#8221; ou &#8220;gros bouts&#8221; selon les types utf-16 BE et LE ?</p>
<p>Cela dit, le comportement du code n&#8217;a pas les mêmes répercussions depuis la console de Netbeans ou exécuté par le fichier sur le desktop. Dans l&#8217;interpréteur Python, j&#8217;ai bien les caractères accentués qd varText.decode(&#8216;utf-8&#8217;). La même instruction dans la console de l&#8217;IDE léve une erreur:<br />
<strong>AttributeError: &#8216;str&#8217; object has no attribute &#8216;decode&#8217;</strong><br />
Sauf si VarText =&#8217;chaine&#8217;.encode(&#8216;utf-8&#8217;) à été auparavant formulé. Donc, ça roule qd même pas mal mais faut bien comprendre quel type d&#8217;objet est restitué dans les manip.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-105314">
          
            <article id="comment-105314" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-105314"><time datetime="2014-08-03T12:57:52+00:00">03/08/2014 at 12:57</time></a></header>  <section class="comment-content comment"><p>Il y a une différence fondamentale entre Python 2 et 3, et selon que tu manipule une chaîne ou des bytes. Et bien entendu, il y a une différence entre l&#8217;encoding de ton IDE, celui de la console de l&#8217;IDE, et celui de la console de l&#8217;OS.</p>
<p>Encore une fois, relis l&#8217;article. Il te faut ces informations pour répondre à ta question. </p>
<p>Ce n&#8217;est pas spécifique à Python, il faut connaitre l&#8217;encoding dans tous les langages du mondes.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-105835">
          
            <article id="comment-105835" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Marco  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-105835"><time datetime="2014-08-04T08:09:22+00:00">04/08/2014 at 08:09</time></a></header>  <section class="comment-content comment"><p><span class="relis"></span>Ok pour l&#8217;encoding, qu&#8217;en est-il de la charmap de Python ?</p>
<p><strong>print(&#8216;\u0100&#8217;)</strong><br />
UnicodeEncodeError: &#8216;charmap&#8217; codec can&#8217;t encode character &#8216;\u0100&#8217; in position 0: character maps to </p>
<p>Pourquoi Python ne trouve pas un point de codage dans la table Utf-8 ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-105951">
          
            <article id="comment-105951" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-105951"><time datetime="2014-08-04T12:49:55+00:00">04/08/2014 at 12:49</time></a></header>  <section class="comment-content comment"><p>Ce n&#8217;est pas que Python ne trouve pas le point de codage dans la table UTF8, c&#8217;est que ce caractère n&#8217;existe pas dans l&#8217;encodage de sortie. Tu essayes de faire passer un cube dans un trou rond.</p>
<p>Si tu affiche ce caractère dans une console supportant l&#8217;UTF8, ça marche parfaitement.</p>
<p>Je me répète donc pour la 3eme fois, relis l&#8217;article car tu n&#8217;as récupéré aucune des informations que je souligne comme étant indispensables à avoir.</p>
<p>Tu ne m&#8217;as jamais donné ton OS. Ni ta version de Python. Ni quelle était ta sortie et son encoding.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-106281">
          
            <article id="comment-106281" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Marco  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-106281"><time datetime="2014-08-04T23:08:08+00:00">04/08/2014 at 23:08</time></a></header>  <section class="comment-content comment"><p>Effectivement ça manque d&#8217;infos, je suis sur W7-64 et j&#8217;utilise Python33.<br />
Apparemment le pluggin Python pour Netbeans développé par le support Oracle comporte un bug. J&#8217;ai contacté le support pour avoir des infos et comment résoudre ça, j&#8217;attend la réponse.</p>
<p>Je crois devoir chercher un autre IDE pour le dév en Python.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-106485">
          
            <article id="comment-106485" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Marco  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-106485"><time datetime="2014-08-05T06:42:40+00:00">05/08/2014 at 06:42</time></a></header>  <section class="comment-content comment"><p>Re, j&#8217;insiste encore, quitte à devenir un peu lourd, j&#8217;ai beau relire l&#8217;article, je ne vois nulle part le principal intéressé&#8230;</p>
<p>On est bien d&#8217;accord que l&#8217;encoding sert à transformer une grille de chose d&#8217;une matrice sur une autre, au final c&#8217;est ce que ça fait, découvrir où sont placés des éléments dans un tableau&#8230;</p>
<p>Ici les éléments en question sont des signes typographiques, lesquels plus globalement sont des dessins appelés glyphes.</p>
<p>Nulle part cet article n&#8217;explique comment ces glyphes peuvent s&#8217;afficher sur un écran &#8230; nulle part ni Unicode ni les grilles UTF-8 n&#8217;indique comment dessiner sur un écran ces glyphes.<br />
Je n&#8217;ai pas été assez précis sur la nature des erreurs rencontrés certes, mais bien souvent il n&#8217;y a simplement rien ou bien juste des carrés qui s&#8217;affichent pour remplacer les glyphes. Ça veut dire que l&#8217;encoding fonctionne mais l&#8217;affichage est incapable de produire le glyphes correspondant.<br />
En changeant la police d&#8217;Output par défaut de l&#8217;IDE (Arial MS Unicode), les caractères à présent s&#8217;affiche correctement.<br />
CQFD. Peut être sur d&#8217;autres terminaux cette substitution de caractères est automatique mais en l’occurrence Netbeans avec le pluggin Python ne la produit pas. Au moins ça aura servit à clarifier ce point non négligeable.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-even depth-1" id="li-comment-106680">
          
            <article id="comment-106680" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-106680"><time datetime="2014-08-05T12:11:03+00:00">05/08/2014 at 12:11</time></a></header>  <section class="comment-content comment"><p>Ah, mais ça n&#8217;a rien à voir avec Python ça, c&#8217;est juste que tu utilises des polices qui n&#8217;ont pas les glyphes en UTF8. Imagines si chaque articles doit répondre à toutes les config, on est pas rendu&#8230;</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-107615">
          
            <article id="comment-107615" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/473fe0edd6a4d4b44052adb280e66c1d?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Marco  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-107615"><time datetime="2014-08-06T11:18:11+00:00">06/08/2014 at 11:18</time></a></header>  <section class="comment-content comment"><p>Oui, c&#8217;est vrai que c&#8217;est parallèle au sujet&#8230;</p>
<p>Autre question: j’essaie de changer l&#8217;encoding de sortie qui semble boulonné à l&#8217;objet STDOUT.<br />
En parcourant Stackoverflow il y a une flopée de post sur ce sujet mais pas de réponse ouvrant sur une modif de la config.</p>
<p>Toujours en <strong>Python 3.x</strong> sous W7 64, voilà les données:<br />
print(sys.getdefaultencoding())      →UTF-8<br />
print(locale.getpreferredencoding())   →cp1252</p>
<p>Je comprend pourquoi alors que tout est UTF-8, je n&#8217;arrive pas à mettre le STDOUT de même. Une solution à été formulé, elle fonctionne et c&#8217;est la plus courte observé:<br />
<code>utf8stdout = open(1, 'w', encoding='utf-8', closefd=False)<br />
# fd 1 is stdout<br />
	print(everyfile, file=utf8stdout)</code><br />
Avec ça effectivement il n&#8217;y a plus d&#8217;erreur de charmap mais bon c’est juste un hack, y&#8217;a pas une soluce plus propre ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-even depth-1" id="li-comment-108753">
          
            <article id="comment-108753" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-108753"><time datetime="2014-08-07T14:40:15+00:00">07/08/2014 at 14:40</time></a></header>  <section class="comment-content comment"><p>Mettre le sdtout en en UTF8 ne veut rien dire. Sdtout est juste un objet qui représente la sortie standard.</p>
<p>Python n&#8217;a aucun contrôle sur le périphérique de sortie. Si le périphérique ne supporte pas l&#8217;encoding donné, on ne peut pas l&#8217;utiliser. C&#8217;est aussi simple que ça. On ne peut pas afficher des caractères UTF8 sur une console qui ne supporte pas l&#8217;UTF8. Avec aucun langage du monde. Ce n&#8217;est pas particulièrement lié à Python.</p>
<p>Vu que je ne sais toujours pas ce que vous voulez faire car vous ne l&#8217;avez toujours pas écris, je n&#8217;ai aucun moyen de vous aider. De surcroit, les commentaires de blog sont très mal adaptés à l&#8217;aide des gens en ligne.</p>
<p>Mon conseil :</p>
<p>&#8211; relisez l&#8217;article (bis, ter, etc). Vous avez visiblement raté des choses importantes.<br />
&#8211; suivez les conseils des choses à lister pour s&#8217;en sortir avec l&#8217;encoding. Après autant de message et autant d&#8217;appel de ma part à relire l&#8217;article, vous n&#8217;avez TOUJOURS PAS listé l&#8217;encoding de votre sortie ni précisé si votre texte était uniquement issu de strings du code où d&#8217;une autre source.<br />
&#8211; rédigez votre message de demande d&#8217;aide en suivant ce template : <a href="../template-de-demande-daide-en-informatique/index.html" rel="nofollow">http://sametmax.com/template-de-demande-daide-en-informatique/</a>. Vraiment, jouer au chat et à la souris pour récupérer des bouts d&#8217;indices pour aider quelqu&#8217;un qui programme à rédiger une demande d&#8217;aide décente, c&#8217;est fatiguant.<br />
&#8211; postez le dit message sur un forum.</p>
<p>Je pense comprendre votre problème, mais vous ne me facilitez pas la tâche pour le résoudre. Je m&#8217;arrête donc là.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-113118">
          
            <article id="comment-113118" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bdc31f0dc292994f304f0741488cffaa?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bdc31f0dc292994f304f0741488cffaa?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">WhatTheHell  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-113118"><time datetime="2014-08-12T11:27:34+00:00">12/08/2014 at 11:27</time></a></header>  <section class="comment-content comment"><p>Merci&#8230;<br />
au delà du fait de la qualité de l&#8217;article.<br />
Il exprime mon état de nerf face à ce p***** de problème d&#8217;encoding entre 2 PC avec 2 versions de windows et 2 versions de python qui essaient de communiquer ensemble. (oui, j&#8217;aime me faire du mal&#8230;&#8221;foooouettez-moi bien fort, maîtresse!!&#8221;</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-137238">
          
            <article id="comment-137238" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/0698013968f08a2619305442e0c2a4fb?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/0698013968f08a2619305442e0c2a4fb?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Thomas  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-137238"><time datetime="2014-09-12T09:12:43+00:00">12/09/2014 at 09:12</time></a></header>  <section class="comment-content comment"><p>Superbe article.<br />
Il m&#8217;a beaucoup éclairé sur le sujet.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-141442">
          
            <article id="comment-141442" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/808fe1aefb216d326a6be78487f5e4c2?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/808fe1aefb216d326a6be78487f5e4c2?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://transfermeback.com' rel='external nofollow' class='url'>hengys</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-141442"><time datetime="2014-09-27T12:06:00+00:00">27/09/2014 at 12:06</time></a></header>  <section class="comment-content comment"><p>Vraiment merci pour le tuto. Cela fait plus de 3 semaines que je galère avec cette histoire d&#8217; encodage. Probleme enfin resolu. Merci vraiment.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-146923">
          
            <article id="comment-146923" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/308a3596152a79231f3feedc49afa4ef?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/308a3596152a79231f3feedc49afa4ef?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Yax  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-146923"><time datetime="2014-10-15T06:57:31+00:00">15/10/2014 at 06:57</time></a></header>  <section class="comment-content comment"><p>Une explication complète de A à Z pour éviter la migraine :-) </p>
<p>Merci beaucoup</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-148328">
          
            <article id="comment-148328" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/8053f3be275eb36ca2e64435b787aa32?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/8053f3be275eb36ca2e64435b787aa32?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://yvesmasur.ch' rel='external nofollow' class='url'>Yves Masur</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-148328"><time datetime="2014-11-15T16:46:50+00:00">15/11/2014 at 16:46</time></a></header>  <section class="comment-content comment"><p>Excellent! Merci pour cette synthèse appréciée, je partage.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-149581">
          
            <article id="comment-149581" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/a94cb1274493b4e181019caaf709c085?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/a94cb1274493b4e181019caaf709c085?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Biganon  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-149581"><time datetime="2014-12-02T22:06:09+00:00">02/12/2014 at 22:06</time></a></header>  <section class="comment-content comment"><p>Pourquoi avoir préfixé d&#8217;un &#8220;u&#8221; la chaîne dans <code>msg = u"Page '{}' sauvée\n".format(nom)</code> alors que tu importé unicode_literals ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-150116">
          
            <article id="comment-150116" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-150116"><time datetime="2014-12-04T14:55:37+00:00">04/12/2014 at 14:55</time></a></header>  <section class="comment-content comment"><p>La force de l&#8217;habitude. Ca n&#8217;a aucune impact.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-153359">
          
            <article id="comment-153359" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/57b79178e2abcea075754918604c6308?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/57b79178e2abcea075754918604c6308?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Pwalkour  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-153359"><time datetime="2014-12-28T23:44:29+00:00">28/12/2014 at 23:44</time></a></header>  <section class="comment-content comment"><p>Bonsoir, python, c&#8217;est tout nouveau pour moi désolé si je dis des bêtises &#8230;</p>
<p>j&#8217;vu dans les commentaire qu&#8217;une autre personne a rencontré le même que moi, à savoir le problème dees noms de fichiers avec des accents lorsque que l&#8217;on utilise walk pour parcourir une arboresence. Je ne pense pas avoir vu de solution où de suggestion &#8230;</p>
<p>l&#8217;un de vouspurrait-il m&#8217;aider ?</p>
<p>Avant d&#8217;oublier, merci pour cette synthèse très pratique.</p>
<p>A bientôt et bonnes fêtes de fin d&#8217;année à tout le monde.</p>
<p>Pwalkour</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-153368">
          
            <article id="comment-153368" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-153368"><time datetime="2014-12-29T08:36:50+00:00">29/12/2014 at 08:36</time></a></header>  <section class="comment-content comment"><p>En pyhton 2.7 :</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">__future__</span> <span style="color: #ff7700;font-weight:bold;">import</span> print_function
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">os</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">os</span>.<span style="color: black;">path</span>.<span style="color: black;">walk</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/tmp'</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">lambda</span> args<span style="color: #66cc66;">,</span> root<span style="color: #66cc66;">,</span> files: <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #008000;">type</span><span style="color: black;">&#40;</span>root<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #008000;">type</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; from __future__ import print_function
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.path.walk('/tmp', lambda args, root, files: print(type(root)), ())
&lt;type 'str'&gt;
&lt;type 'str'&gt;
&lt;type 'str'&gt;
&lt;type 'str'&gt;
&lt;type 'str'&gt;
&lt;type 'str'&gt;
&lt;type 'str'&gt;
&lt;type 'str'&gt;</p></div>

<p>Donc les chemins sont de types bytes, et il faut décoder, comme indiquer dans l&#8217;article.</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">os</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> root<span style="color: #66cc66;">,</span> dirs<span style="color: #66cc66;">,</span> files <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #dc143c;">os</span>.<span style="color: black;">walk</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/tmp'</span><span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #008000;">type</span><span style="color: black;">&#40;</span>root<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
...     
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span><span style="color: #ff7700;font-weight:bold;">class</span> <span style="color: #483d8b;">'str'</span><span style="color: #66cc66;">&gt;</span></pre></td></tr></table><p class="theCode" style="display:none;">&gt;&gt;&gt; import os
&gt;&gt;&gt; for root, dirs, files in os.walk('/tmp'):
    print(type(root))
...     
&lt;class 'str'&gt;
&lt;class 'str'&gt;
&lt;class 'str'&gt;
&lt;class 'str'&gt;
&lt;class 'str'&gt;
&lt;class 'str'&gt;
&lt;class 'str'&gt;
&lt;class 'str'&gt;</p></div>

<p>Donc les chemins sont de types unicode, et il n&#8217;y a rien à faire.</p>
<p>Si tu lis l&#8217;article, tu sauras exactement quoi faire avec ces informations, il n&#8217;y a rien de magique.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-153750">
          
            <article id="comment-153750" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/f589a689b7faaa2064fe26413084bba2?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/f589a689b7faaa2064fe26413084bba2?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">enebre  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-153750"><time datetime="2015-01-10T00:20:14+00:00">10/01/2015 at 00:20</time></a></header>  <section class="comment-content comment"><p>Bonjour à tous,</p>
<p>les recherches pour un soucis avec python m&#8217;ont amené ici, alors je me disais que peut être trouverais-je la solution au problème.</p>
<p>J’utilise depuis quelques temps mps-youtube, petit outils fort sympathique je dois dire.</p>
<p>Mais depuis une mise à niveau rien ne va plus, il me sort une erreur tel que celle exposée ici&#8230;</p>
<p>donc j&#8217;installe:</p>
<p><code></code></p>
<p>sudo pip install mps-youtube</p>
<p>puis je lance le soft :</p>
<p><code>mpsyt</code></p>
</p>
<p>j&#8217;envoie une recherche,</p>
<p><code>.pantera</code></p>
<p>je lui demande les infos d&#8217;une vidéo</p>
<p><code>d2</code></p>
<p>ensuite je demande le téléchargement, c&#8217;est là que l&#8217;erreur se présente :</p>
<p><code>10</code></p>
<p>mps-youtube a écrit :</p>
<p><code></code></p>
<p>Problem playing last item: 'ascii' codec can't decode byte 0xc3 in position 13: ordinal not in range(128)</p>
<p>Que puis-je faire ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-153755">
          
            <article id="comment-153755" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-153755"><time datetime="2015-01-10T08:07:59+00:00">10/01/2015 at 08:07</time></a></header>  <section class="comment-content comment"><p>Ta question n&#8217;est pas vraiment lié à l&#8217;article car tu ne programmes pas, mais utilise le logiciel, donc le mieux c&#8217;est que tu la pose ici : indexerror.net.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-154576">
          
            <article id="comment-154576" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/0e639c4a8349ca5943f1c55bf28415f1?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/0e639c4a8349ca5943f1c55bf28415f1?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Dominique  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-154576"><time datetime="2015-01-27T12:30:00+00:00">27/01/2015 at 12:30</time></a></header>  <section class="comment-content comment"><p>Bonjour, j&#8217;essaye d&#8217;envoyer des séquences d&#8217;échappement à une imprimante HP en réseau (python 2.7 sous Windows, &#8216;cp850&#8217; pour stdout et &#8216;mbcs&#8217; pour le système de fichier ).</p>
<p>J&#8217;ai essayé de fixer mes problème d&#8217;encoding en lisant l&#8217;article et fait des gros gros gros efforts (voir code ci-dessous) pour bosser en unicode!</p>
<p>Si je tape le tout en python interactif, cela marche a moitier (mais séquences d&#8217;échappement sont ignorées&#8230; tout ce qui est événtuellement lisible est imprimer&#8230; comme @PJL JOB NAME =)</p>
<p>Le plus étrange, si j&#8217;exécute script avec python script.py j&#8217;ai l&#8217;erreur d&#8217;encodage suivante (le script est pourtant sauvé en utf8 par l&#8217;éditeur PSPAD).</p>
<p>Traceback (most recent call last):</p>
<p>File &#8220;hp-minimal-job.py&#8221;, line 55, in</p>
<p>do_simple_pcl_print_job()</p>
<p>File &#8220;hp-minimal-job.py&#8221;, line 45, in do_simple_pcl_print_job</p>
<p>print (u&#8221;.join( l )) #.encode( sys.stdout.encoding )</p>
<p>File &#8220;C:&#092;Python27&#092;lib&#092;encodings&#092;cp850.py&#8221;, line 12, in encode</p>
<p>return codecs.charmap_encode(input,errors,encoding_map)</p>
<p>UnicodeEncodeError: &#8216;charmap&#8217; codec can&#8217;t encode character u&#8217;&#092;u2013&#8242; in position</p>
<p>2: character maps to</p>
<p>Qu&#8217;est ce que j&#8217;ai bien pu raté?</p>
<p>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;- LE SCRIPT &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;</p>
<p>!/usr/bin/env python</p>
<p>&#8211;<em>&#8211; coding: utf8 &#8211;</em>&#8211;</p>
<p>import socket</p>
<p>import sys</p>
<p>HP Network Printer Connexion Point</p>
<p>PRINTER_IP = &#8216;192.168.1.206&#8217;</p>
<p>PRINTER_PORT = 9100</p>
<p>PJL is used to manage the job and encapsulate a PCL page</p>
<p>PCL is the content to be printer.</p>
<p>#</p>
<p>def pjl_escape( cmd ):</p>
<p>&#8220;&#8221;&#8221; Prepare an escaped command string with cmd as command content &#8220;&#8221;&#8221;</p>
<p>return u&#8221;+chr(27)+cmd</p>
<p>def pjl_eol():</p>
<p>&#8220;&#8221;&#8221; return the pjl Enf-of-Line composed of space+cr+lf &#8220;&#8221;&#8221;</p>
<p>return u&#8217; &#8216;+chr(13)+chr(10)</p>
<p>def prepare_pjl_job( jobname ):</p>
<p>&#8220;&#8221;&#8221; initiable a PJL job + switch to PCL language &#8220;&#8221;&#8221;</p>
<p>l = [] # prepare list of string</p>
<p>l.append( pjl_escape(u&#8217;%–12345x&#8217;)+str(u&#8217;@PJL JOB NAME = &#8220;&#8216;)+jobname+str(u'&#8221;&#8216;)+pjl_eol() )</p>
<p>l.append( u&#8217;@PJL ENTER LANGUAGE = PCL&#8217;+pjl_eol() )</p>
<p>return u&#8221;.join(l)</p>
<p>def close_pjl_job():</p>
<p>return pjl_escape(u&#8217;%–12345x&#8217;)+str(u&#8217; @PJL EOF&#8217;)+pjl_eol()+pjl_escape(u&#8217;%–12345x&#8217;)</p>
<p>def do_simple_pcl_print_job():</p>
<p>s = socket.socket( socket.AF_INET, socket.SOCK_STREAM )</p>
<p>s.connect( (PRINTER_IP, PRINTER_PORT) )</p>
<p>l = []</p>
<p>l.append( prepare_pjl_job(u&#8221;invoice x customer y&#8221;) )</p>
<p>l.append( u&#8217;Essai d impression é@ testing&#8217; ) # PCL command here</p>
<p>l.append( close_pjl_job() )</p>
<p>A imprimer</p>
<p>print (u&#8221;.join( l )) #.encode( sys.stdout.encoding )</p>
<p>for c in (u&#8221;.join( l ))[0:-1]:</p>
<p>print( (&#8216;%03i &#8216; % ord(c)).encode( sys.stdout.encoding) )</p>
<p>Envoyer à l&#8217;imprimante</p>
<p>s.sendall( (u&#8221;.join(l)).encode( &#8216;cp850&#8217; ) ) # Ne pas envoyer le dernier caractère qui est un NULL</p>
<p>s.close()</p>
<p>if <strong>name</strong> == &#8216;<strong>main</strong>&#8216;:</p>
<p>do_simple_pcl_print_job()</p>
</section></div></div></article>          <!-- #comment-## -->
        <ul class="children">
        <li class="comment byuser comment-author-sam bypostauthor even depth-2" id="li-comment-154580">
          
            <article id="comment-154580" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-154580"><time datetime="2015-01-27T13:53:34+00:00">27/01/2015 at 13:53</time></a></header>  <section class="comment-content comment"><p>Bonjour dominique,</p>
<p>Pose ta question ici : indexerror.net</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-156081">
          
            <article id="comment-156081" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/01873fcaf827334a2a79431eb93f3e26?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/01873fcaf827334a2a79431eb93f3e26?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">dacrovinunghi  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-156081"><time datetime="2015-02-14T21:24:19+00:00">14/02/2015 at 21:24</time></a></header>  <section class="comment-content comment"><p>putain merci !</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-157359">
          
            <article id="comment-157359" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/0794e59ad5d92c6048d175a9bec37c0b?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/0794e59ad5d92c6048d175a9bec37c0b?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://www.freshports.org' rel='external nofollow' class='url'>TurtleCrazy</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-157359"><time datetime="2015-03-06T14:27:48+00:00">06/03/2015 at 14:27</time></a></header>  <section class="comment-content comment"><p>Il faudrait toutefois clarifier ce que demande python3, parce que dire que c&#8217;est de l&#8217; <strong>Unicode</strong> par défaut n&#8217;est pas suffisant.</p>
<p>Unicode est un standard et une norme. C&#8217;est tout.</p>
<p>UTF décrit une &#8220;transformation&#8221; qui répond au standard Unicode et UTF-8 en est le pendant codé sur 8bits.</p>
<p>Par contre, préfixer les chaines avec un &#8220;u&#8221; correspond en général à déclarer une chaine de caractères codée en UTF-8.</p>
<p>Donc quel est l&#8217;encodage par défaut d&#8217;un compilateur python3 ? Sachant que dans le monde Windows, le terme &#8216;Unicode&#8217; est mal employé pour désigner de l&#8217;UTF-16(*) alors que dans le monde Unix, il est tout aussi mal employé pour désigner de l&#8217; UTF-8 &#8230;</p>
<p>D&#8217;autant que le compilateur ou l&#8217;interpréteur peut lire un fichier dans un encodage et en utiliser un autre en interne (un pratique courante est de lire de l&#8217;utf-8 ou du latin-1 par défaut &#8211; voire exclusivement-  et de stocker les chaines en UTF-16 )</p>
<p>Ce qui d&#8217;ailleurs enfonce le clou pour affirmer que l&#8217;encodage <em>doit</em> être précisé et ne doit jamais être &#8220;supposé&#8221; par défaut&#8230;</p>
<p>(*): pire encore, il y a deux UTF-16 (selon l&#8217; endianess) et je ne sais pas lequel est utilisé en interne sous Windows.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-157666">
          
            <article id="comment-157666" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/d0c317a94f1879c3b7c53ebbf81c34e6?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/d0c317a94f1879c3b7c53ebbf81c34e6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://julian-didier.fr' rel='external nofollow' class='url'>Julian</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-157666"><time datetime="2015-03-13T23:44:51+00:00">13/03/2015 at 23:44</time></a></header>  <section class="comment-content comment"><p>Salut et merci pour l&#8217;article!</p>
<p>J&#8217;ai relevé une mini erreur pour la déclaration d&#8217;encoding du fichier : # &#8211;<em>&#8211; coding: utf8 &#8211;</em>&#8211;</p>
<p>Après essai python2.7 retourne une erreur car c&#8217;est : # &#8211;<em>&#8211; coding: utf-8 &#8211;</em>&#8211;</p>
<p>C&#8217;est tout, simple correction de mini coquille :)</p>
<p>Good night</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-even depth-1" id="li-comment-157678">
          
            <article id="comment-157678" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-157678"><time datetime="2015-03-14T08:57:12+00:00">14/03/2015 at 08:57</time></a></header>  <section class="comment-content comment"><p>Hum, normalement ce sont des alias, et les deux marchent sur ma machine. Une spécificité windows ? A creuser.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-160449">
          
            <article id="comment-160449" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/54164aa5da9b5ebb76d2989e7e170ce5?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/54164aa5da9b5ebb76d2989e7e170ce5?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Fred  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-160449"><time datetime="2015-05-08T08:54:53+00:00">08/05/2015 at 08:54</time></a></header>  <section class="comment-content comment"><p>Oh *;:@&#092;#% de *;:@&#092;#% ! L&#8217;article que je cherchais depuis 2~3 ans !</p>
<p>Une nouvelle ère s&#8217;ouvre pour moi désormais.</p>
<p>Merci</p>
<p>&#8220;Je sais une chose : c&#8217;est que j&#8217;étais aveugle, maintenant je vois&#8221; Jean IX.25</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-162445">
          
            <article id="comment-162445" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/3a2f8f8131aebba9b1bb50b573f6a13f?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/3a2f8f8131aebba9b1bb50b573f6a13f?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Drico  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-162445"><time datetime="2015-06-22T19:32:46+00:00">22/06/2015 at 19:32</time></a></header>  <section class="comment-content comment"><p>J&#8217;adore le thon employé sur ce site (c&#8217;est pas une faute au niveau cul ;-)))</p>
<p>Dans le genre branlette, je suis tombé sur (je parle d&#8217;accent en l&#8217;occurrence)</p>
<p>sur la différence entre les accents composés et les accents décomposés (même moi je n&#8217;y ai pas cru)</p>
<p>Genre un ë et un ë voire un è et un è, ça saute pas à l&#8217;œil mais il y&#8217;a plusieurs manières de le faire, vu le niveau</p>
<p>des agitateurs je me dis, et vu l&#8217;article que je viens de lire (c&#8217;est bon les gars, respect :-))</p>
<p>Si ça continue je file élever des chèvres dans le Larzac ;-)</p>
<p>(et comme disais @Coluche il n&#8217;y a pas de meeeeehhhhh)</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-163837">
          
            <article id="comment-163837" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/be5a80eff82ee6c2a12351be262b4f61?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/be5a80eff82ee6c2a12351be262b4f61?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Gwenmael  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-163837"><time datetime="2015-08-13T10:15:48+00:00">13/08/2015 at 10:15</time></a></header>  <section class="comment-content comment"><p>Bonjour,</p>
<p>Pouvez vous m&#8217;expliquer pourquoi j&#8217;obteint systèmatiquement une erreur ? faut-il que j&#8217;importe une bibliotèque particulière ?</p>
<p>IDLE 2.6.5      ==== No Subprocess ====</p>
<blockquote>
<blockquote>
<blockquote><p>
      coding: utf8</p>
<p>      une_chaine = &#8216;Chaîne&#8217;</p>
<p>      type(une_chaine)</p>
<p>      une_chaine = une_chaine.decode(&#8216;utf8&#8217;)</p>
<p>      Traceback (most recent call last):</p>
<p>      File &#8220;&lt;pyshell#4&gt;&#8221;, line 1, in </p>
<p>      une_chaine = une_chaine.decode(&#8216;utf8&#8217;)</p>
<p>      File &#8220;C:&#092;ESRI&#092;Python26&#092;ArcGIS10.0&#092;lib&#092;encodings&#092;utf_8.py&#8221;, line 16, in decode</p>
<p>      return codecs.utf_8_decode(input, errors, True)</p>
<p>      UnicodeDecodeError: &#8216;utf8&#8217; codec can&#8217;t decode bytes in position 3-5: invalid data
    </p></blockquote>
</blockquote>
</blockquote>
</section></div></div></article>          <!-- #comment-## -->
        <ul class="children">
        <li class="comment byuser comment-author-max even depth-2" id="li-comment-163842">
          
            <article id="comment-163842" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/eb8e400eec222e2b09bd901aba2cb2dc?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/eb8e400eec222e2b09bd901aba2cb2dc?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Max  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-163842"><time datetime="2015-08-13T18:11:33+00:00">13/08/2015 at 18:11</time></a></header>  <section class="comment-content comment"><p>Salut,</p>
<p>Tu devrais poser ta question sur <a href="http://indexerror.net" rel="nofollow">http://indexerror.net</a>, tu auras plus de chance d&#8217;avoir une réponse et ça pourra servir à d&#8217;autres.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-164405">
          
            <article id="comment-164405" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/58de788049511c348293616bc532f3eb?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/58de788049511c348293616bc532f3eb?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Eildosa  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-164405"><time datetime="2015-09-15T11:34:13+00:00">15/09/2015 at 11:34</time></a></header>  <section class="comment-content comment"><p>Bon je croyais avoir tous compris mais je tombe sur cet article.</p>
<p>Pourquoi ASCII est dans la liste des encodage alors que c&#8217;est suposé etre un jeux de caractère? (qui pourrais etre encodé en utf-8 par exemple)</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-164415">
          
            <article id="comment-164415" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-164415"><time datetime="2015-09-16T06:19:35+00:00">16/09/2015 at 06:19</time></a></header>  <section class="comment-content comment"><p>ASCII et UTF8 sont tous les deux des jeux de caractères (caracter sets). L&#8217;encodage (encoding) est le processus qui transforme un jeu de caractères en un autre. Ppour cette raison, on fait , comme dans cet article, souvent l&#8217;abus de langage en parlant d'&#8221;encoding ASCII&#8221; ou &#8220;encoding UTF8&#8221; alors qu&#8217;on devrait dire &#8220;charset ASCII&#8221; et &#8220;charset UTF8&#8221;.</p>
<p>Comme les jeux de caractères ne sont pas équivalent, l&#8217;encoding en Python se fait par une forme intermédiaire, vers laquelle on decode() et depuis laquelle on encode(), ce qui permet de facilement identifier quand le processus échoue : au niveau du charset de départ ou de celui d&#8217;arrivée. Cela permet aussi d&#8217;isoler le texte comme un type à part en Python 3 : str est considéré comme du texte pur, tandis que tout texte encodé est sous forme de bytes.</p>
<p>En vérité, str est implémenté en utilisant utf8. Mais on a pas besoin de le savoir, et cela peut changer. C&#8217;est juste une API pour donner :</p>
<ul>
<li>une abstraction du texte. Le jour où le texte évolue, on garde la même API et on peut changer l&#8217;implémentation.</li>
<li>de bonnes habitudes sur le mécanisme d&#8217;encodage/décodage.</li>
<li>un débuggage plus facile avec des erreurs très précises et des choix explicites sur leurs traitements.</li>
</ul>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-168252">
          
            <article id="comment-168252" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://olivierpons.fr' rel='external nofollow' class='url'>Olivier Pons</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-168252"><time datetime="2015-11-22T23:00:16+00:00">22/11/2015 at 23:00</time></a></header>  <section class="comment-content comment"><p>Si jamais on met</p>
<p>coding: utf8</p>
<p>alors sous Django, makemessages ne fonctionne pas, il ne reconnait pas &#8220;utf8&#8221;</p>
<p>Si on met :</p>
<p>coding: utf-8</p>
<p>alors sous Django, makemessages fonctionne, et python fonctionne tout aussi bien. Voilà ma petite contribution&#8230;</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-168433">
          
            <article id="comment-168433" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-168433"><time datetime="2015-11-24T14:19:16+00:00">24/11/2015 at 14:19</time></a></header>  <section class="comment-content comment"><p>Bon à savoir.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-170511">
          
            <article id="comment-170511" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bcebda8ba97ca45dd49aebaec5836f0f?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bcebda8ba97ca45dd49aebaec5836f0f?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Jérome  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-170511"><time datetime="2015-12-13T22:53:42+00:00">13/12/2015 at 22:53</time></a></header>  <section class="comment-content comment"><p>Salut j&#8217;ai testé un truc à la con:</p>
<p>le script contient:</p>
<pre> 
# encoding: utf8
from __future__ import unicode_literals, print_function

for v in sys.argv:   
    v2 = v.decode(locale.getdefaultlocale()[1]) 
    print(v2, type(v2), locale.getdefaultlocale()[1])
</pre>
<p>J&#8217;ai lancé le script en ligne de commande éxécuter <code>cmd /k</code></p>
<p>contenu de la fenêtre cmd:</p>
<pre>
E:\temp&gt;chcp
Page de codes active : 850

E:\temp&gt;python pytest.py "à@^¨ùéôö"
pytest.py  cp1252
à@^¨ùéôö  cp1252
</pre>
<p>Donc le stdin est réinterprété avec la l&#8217;encodage local par défaut et la commande print converti automatiquement l&#8217;encodage du script vers celui du stdout</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-odd thread-alt depth-1" id="li-comment-170627">
          
            <article id="comment-170627" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-170627"><time datetime="2015-12-14T20:55:30+00:00">14/12/2015 at 20:55</time></a></header>  <section class="comment-content comment"><p>Ca serait intéressant de voir si ce comportement est :</p>
<ul>
<li>commun à tous les OS et les terminaux;</li>
<li>identique en 2.7 et 3</li>
</ul>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-170631">
          
            <article id="comment-170631" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bcebda8ba97ca45dd49aebaec5836f0f?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bcebda8ba97ca45dd49aebaec5836f0f?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Jérome  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-170631"><time datetime="2015-12-14T21:19:44+00:00">14/12/2015 at 21:19</time></a></header>  <section class="comment-content comment"><p>En effet avec une machine virtuelle surement mais ce qui est bon a savoir c&#8217;est que si l&#8217;on fait un chcp avec un autre encodage python est perdu</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-170831">
          
            <article id="comment-170831" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/ae46ed8d7a83728aae37a59b03306c11?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/ae46ed8d7a83728aae37a59b03306c11?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://www.youtube.com/amontlc2014' rel='external nofollow' class='url'>Jerome AMON</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-170831"><time datetime="2015-12-16T16:38:03+00:00">16/12/2015 at 16:38</time></a></header>  <section class="comment-content comment"><p>Merci pour ce post. Très riche. Je viens de m&#8217;en servir pour régler le problème d&#8217;encoding dans mon application personnel de Chat en Python 2.7. Excellent ! Je migre bientôt vers la 3.x</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-even depth-1" id="li-comment-173777">
          
            <article id="comment-173777" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/3ed9f823a485eebffaaabd41a0ea2225?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/3ed9f823a485eebffaaabd41a0ea2225?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Jean-Baptiste  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-173777"><time datetime="2016-01-11T15:21:56+00:00">11/01/2016 at 15:21</time></a></header>  <section class="comment-content comment"><p>Bonjour,</p>
<p>Merci pour cet article. Cependant vous dites que :</p>
<blockquote cite=""><p>
Il existe un encoding qui essaye des regrouper toutes les langues du monde, et il s’appelle unicode.
</p></blockquote>
<p>Or Unicode n&#8217;est pas un encoding, c&#8217;est un jeu de caractères (un character set), un concept théorique détaché de la problématique du stockage sur disque dur si je comprends bien l&#8217;article de Joël Spolsky à ce sujet en <a href="http://french.joelonsoftware.com/Articles/Unicode.html" rel="nofollow">français</a> ou en <a href="http://www.joelonsoftware.com/articles/Unicode.html" rel="nofollow">anglais</a>. Unicode associe des caractères à des &#8220;points de code&#8221; en héxadécimal, sans se soucier du stockage. Par ex. le point de code Unicode de &#8220;A&#8221; est U+0041. D&#8217;après Spolsky, &#8220;UTF-8 est un [autre] système pour stocker en mémoire vos chaînes de points de code Unicode&#8221; et comme il le dit plus loin dans son article &#8220;on encode de l&#8217;unicode&#8221; [en UTF-8, en UTF-7]. Mais on n&#8217;encode pas une chaîne de caractères en Unicode, ça ne veut rien dire.</p>
<p>Ce qui permet de comprendre pourquoi vous dites plus loin que :</p>
<blockquote cite=""><p>
Ensuite, il existe deux types de chaînes de caractères en Python :<br />
    &#8230;<br />
    La chaîne de caractères <strong>décodée</strong>: type ‘unicode’ en Python 2.7, et ‘str’ en python 3 (sic).
</p></blockquote>
<p>Sinon, si Unicode est un encoding et si une chaîne est en Unicode, pourquoi dirait-on qu&#8217;elle est &#8220;décodée&#8221;. On dirait plutôt qu&#8217;elle est &#8220;encodée&#8221; en Unicode. Ce qui n&#8217;est pas le cas.</p>
</section></div></div></article>          <!-- #comment-## -->
        <ul class="children">
        <li class="comment even depth-2" id="li-comment-176723">
          
            <article id="comment-176723" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bcebda8ba97ca45dd49aebaec5836f0f?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bcebda8ba97ca45dd49aebaec5836f0f?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Jérôme  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-176723"><time datetime="2016-03-03T17:32:12+00:00">03/03/2016 at 17:32</time></a></header>  <section class="comment-content comment"><p>@Jean-Baptiste</p>
<p>En effet c&#8217;est un abus de langage de dire ce c&#8217;est un encodage mais&#8230;</p>
<p>Le fait d&#8217;encoder ou décoder que l&#8217;on soit en unicode ou non. Tout  dépend de quel charset ou codepage défini comme natif sur ton système ou ton language&#8230; donc il y a décodage pour faire correspondre vers ton système et encodage pour les sorties différentes du codepage système employé.</p>
<p>@ast</p>
<p>Oui est non. le codepage d&#8217;un fichier texte n&#8217;est pas forcément reconnu si le codepage n&#8217;est pas présent dans celui-ci. Il y a aussi des application qui ne prennent que le codepage du système pour l&#8217;ouverture et qui enregistre dans ce même codepage si le fichier n&#8217;en avait pas un de renseigné au départ. C&#8217;est dans ces cas que l&#8217;on se retrouve en base de données avec des caractères des plus bizarres&#8230;</p>
<p>En clair : amuses toi à ouviri un csv avec Excel en Utf-8 avec un Windows et tu verra qu&#8217;il te fera bien de la merde. le codepage par défaut est le CP-1252 (en France) donc tous les caractères non ascii&#8230; ben&#8230;  tu peux toujours te les mettre ou je pense. Certains fichiers n&#8217;ont pas cette info car elle se trouve dans une en-têtes du format de fichier, dans des métadonnées, en balise dans le contenu du texte (cas du xml et de ses dérivées comme xhtml) Certaines applications ne s&#8217;en préoccupe pas donc c&#8217;est a toi de savoir comment fonctionne ton application ou ton langage et de t&#8217;adapter aux besoins&#8230;</p>
<p>On peut aller encore plus loin&#8230; Ton windows FR travaille en CP-1252 et tu travailles sur un soft anglais de traitement de données GPS qui lui est codé pour travailler avec un charset différent et des paramètre de séparateur décimal en . et non en virgule.</p>
<p>Résultat : Les données stockées dans le fichier avec des vigules ne sont pas reconnu comme étant du numérique. Le texte à l&#8217;affichage est pas propre car il ne reconnait pas le charset&#8230;</p>
<p>Du coup, lors de l&#8217;ouverture tu dois proposer: 1) choisir l&#8217;encodage du fichier d&#8217;entrer, 2) choisir le type de séparateur. Rien n&#8217;est vraiment automatique.</p>
<p>En clair, il faut connaitre si le charset et sockées dans le fichier ou dans le jeu-de-données ou dans certains cas dans une readme.txt ou encore (de mémoire du fournisseur&#8230;). Dans certains cas c&#8217;est une fichier situé au même endroit avec une extention *.cpg qui donne cette info d&#8217;où la notion de jeu de données. Encore faut-il que l&#8217;application qui ouvre ce fichier soit capable d&#8217;identifier son existence&#8230;</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-173784">
          
            <article id="comment-173784" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-173784"><time datetime="2016-01-11T17:53:01+00:00">11/01/2016 at 17:53</time></a></header>  <section class="comment-content comment"><p>Oui c&#8217;est un abus de langage.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-176721">
          
            <article id="comment-176721" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/b762db391f5e802cf9f7a5423f4af771?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/b762db391f5e802cf9f7a5423f4af771?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">ast  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-176721"><time datetime="2016-03-03T16:42:31+00:00">03/03/2016 at 16:42</time></a></header>  <section class="comment-content comment"><p>Quand on ouvre un fichier texte avec n&#8217;importe quel éditeur, jamais on ne nous demande quel est l&#8217;encodage, et heureusement lol. L&#8217;éditeur se débrouille.</p>
<p>Comment ? Avec une fonction de détection comme chardet peut être ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-177011">
          
            <article id="comment-177011" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/db742ca9523b385f9eab6c0b7cc58309?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/db742ca9523b385f9eab6c0b7cc58309?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">foxmask  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-177011"><time datetime="2016-03-11T21:44:06+00:00">11/03/2016 at 21:44</time></a></header>  <section class="comment-content comment"><p>Toujours à l&#8217;affut de saloperies qui trainent, je tombe sur un pb de ce genre et me dit qu&#8217;un de flux RSS que je grab est mal goalé alors je retourne voir FeedParser et tombe sur <a href="http://pythonhosted.org/feedparser/character-encoding.html" rel="nofollow">Universal Encoding Detector</a> (aka chardet) qui semble etre de FeedParser et non de mozilla, à moins que mr FeedParser ne soit un Mozillian.</p>
<p>Bon en tout cas me v&#8217;la reparti check les flux &#8230;.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-177789">
          
            <article id="comment-177789" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/c74de5d1e8208fea85b9fe89d2960baa?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/c74de5d1e8208fea85b9fe89d2960baa?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">turboiii  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-177789"><time datetime="2016-04-20T07:51:01+00:00">20/04/2016 at 07:51</time></a></header>  <section class="comment-content comment"><p>Bonjour</p>
<p>comme prédit par l&#8217;oracle « Sam »  j&#8217;ai fini par tomber dans le cas où mon programme buggue à cause de l&#8217;encodage.</p>
<p>Fatal error !!!!!!! blocage complet je ne comprends plus …..doute…..</p>
<p>et puis je reviens sur le site. Retour aux sources…&#8230;divines</p>
<p>Ah oui, ben oui.</p>
<p>Bêtement j&#8217;applique les 5 règles.</p>
<p>Que se passe t-il ce con de DrPython ne veut même plus de mon fichier source. Ouf j&#8217;ai une sauvegarde….</p>
<p>Je repars de zero avec un fichier qui trempe dans gtk3 ou gtk+ comme tu veux.</p>
<p>Et là catastrophe</p>
<p><a href="https://python-gtk-3-tutorial.readthedocs.org/en/latest/unicode.html" rel="nofollow">https://python-gtk-3-tutorial.readthedocs.org/en/latest/unicode.html</a></p>
<p>==&gt; gtk semble ne pas respecter tout les critères pas gloop</p>
<p>du coup j&#8217;investigue et …&#8230;</p>
<p>point 1</p>
<p>coding: utf-8 en première ligne avec mon éditeur en utf-8  est ok</p>
<p>point 2</p>
<p>avec gtk</p>
<p>from <strong>future</strong> import unicode_literals n&#8217;est pas applicable sinon sa plante</p>
<p>par conséquent je suis contraint d&#8217;écrire les chaines comme suit</p>
<p>text = u&#8221;Fichier sélectionné&#8221;</p>
<p>surprise refus !!</p>
<p>je reviens sur</p>
<p>text = &#8220;Fichier sélectionné&#8221;</p>
<p>je vérifie les types je ne fais plus confiance à rien</p>
<p>plus de bug, RUN</p>
<p>en sortie de stout je sors des caractères non ascii????bigre</p>
<p>vite vite l&#8217;option &#8216;replace&#8217;</p>
<p>ah Fichier s�lectionn� c&#8217;est beaucoup mieux :-)</p>
<p>je retourne à un vieux projet</p>
<p>pour déterrer ça</p>
<p>sys.stdout = codecs.getwriter(&#8220;utf-8&#8221;)(sys.stdout)</p>
<p>ca à l&#8217;air de fonctionner au détail près que je suis obligé d&#8217;encoder en latin pour une sortie propre à la console</p>
<p>le code employé de la salle de torture</p>
<p><code></p>
<p>coding: utf-8</p>
<p>toutes les chaines sont en unicode (même les docstrings)</p>
<p>from <strong>future</strong> import unicode_literals</p>
<p>filechooserdialog.py</p>
<p>inspiré de test_filechooserdialog_1.py</p>
<p>import sys</p>
<p>import gi</p>
<p>import codecs</p>
<p>gi.require_version('Gtk', '3.0')</p>
<p>from gi.repository import Gtk</p>
<p>class FileChooserDialog():</p>
<p>""" choose file widget with Gtk.FileChooserDialog"""</p>
<p>def <strong>init</strong>(self,debug= False):</p>
<p>#Stores your path</p>
<p>self.path = None</p>
<p>self.debug = debug</p>
<p>self.dia = Gtk.FileChooserDialog("Please choose a file", None,</p>
<p>Gtk.FileChooserAction.OPEN,</p>
<p>(Gtk.STOCK_CANCEL, Gtk.ResponseType.CANCEL,</p>
<p>Gtk.STOCK_OPEN, Gtk.ResponseType.OK))</p>
<p>self.add_filters(self.dia)</p>
<p>self.dia.set_select_multiple(True)</p>
<pre><code>def run(self):
    self.reponse = self.dia.run()
    if self.reponse == Gtk.ResponseType.OK:
        if self.debug:
            print("Open clicked")
            print("File selected: " + self.dia.get_filenames())
            for e in self.dia.get_filenames():
                print e
        self.path = self.dia.get_filenames()
    elif self.reponse == Gtk.ResponseType.CANCEL:
        if self.debug:print("Cancel clicked")
    self.dia.destroy()
    return self.reponse

def get_files(self):
    ''' return list of selected file  '''
    return self.path

def add_filters(self,dialog):
    ''' example could be filtered file '''
    filter_text = Gtk.FileFilter()
    filter_text.set_name("Text files")
    filter_text.add_mime_type("text/plain")
    dialog.add_filter(filter_text)

    filter_py = Gtk.FileFilter()
    filter_py.set_name("Python files")
    filter_py.add_mime_type("text/x-python")
    dialog.add_filter(filter_py)

    filter_any = Gtk.FileFilter()
    filter_any.set_name("Any files")
    filter_any.add_pattern("*")
    dialog.add_filter(filter_any)
</code></pre>
<p>if <strong>name</strong> == "<strong>main</strong>":</p>
<p>exemple = FileChooserDialog()</p>
<p>response = exemple.run()</p>
<p>if response == Gtk.ResponseType.OK:</p>
<p>text = "Fichier sélectionné"</p>
<p>print type(text) # donne  normal</p>
<p>text = unicode(text,'utf-8', 'replace')</p>
<p>print type(text) # donne  normal</p>
<p>text = text.encode('utf8', 'replace')</p>
<p>print(text) # sortie avec les caratères non ascii remplacé par des ? normal</p>
<p>####################</p>
<p>print '####################'</p>
<p>sys.stdout = codecs.getwriter("utf-8")(sys.stdout)</p>
<p>text = "Fichier sélectionné"</p>
<p>text = unicode(text,'utf8', 'replace')</p>
<p>print(text)</p>
<p>text = "Fichier sélectionné"</p>
<p>text = unicode(text,'ISO-8859-1', 'replace')</p>
<p>print(text) # va sortir propre sur la console allors que la console serait codé en utf-8 ????</p>
<p>for e in exemple.get_files():</p>
<p>print e</p>
<p></code></p>
<p>Ton avis sur cette affaire ?</p>
<p>Sans remettre en cause gtk bien sur</p>
<p>MA QUESTION : avant de continuer à redresser les divers codes de mon projet suis-je sur la bonne voie et à l&#8217;abri de nouvelles  surprises ???</p>
<p>désolé j&#8217;ai utilisé les tag code  et /code mais je perds l&#8217;indentation</p>
<p>sinon merci Sam pour cette prose fournie sur python. C&#8217;est inspirant en tout cas. Humblement il y a des articles qui me dépassent d&#8217;autres qui me permettent de progresser et çà c&#8217;est génial</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-177798">
          
            <article id="comment-177798" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-177798"><time datetime="2016-04-21T06:37:22+00:00">21/04/2016 at 06:37</time></a></header>  <section class="comment-content comment"><p>=> indexerror.net</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-179812">
          
            <article id="comment-179812" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/1724828766d24e40f36719c283a197fa?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/1724828766d24e40f36719c283a197fa?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">tocard 2016 wiiiz  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-179812"><time datetime="2016-07-24T23:03:39+00:00">24/07/2016 at 23:03</time></a></header>  <section class="comment-content comment"><p>petite source d&#8217;inspiration:</p>
<p>Ce MONSIEUR est un core dev de cython et a écrit un manifest sur l&#8217;unicode en python:</p>
<p><a href="https://github.com/haypo/unicode_book/blob/master/good_practices.rst" rel="nofollow">https://github.com/haypo/unicode_book/blob/master/good_practices.rst</a></p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-181639">
          
            <article id="comment-181639" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/f1ab310a2c61242e2e73a0691d1d8916?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/f1ab310a2c61242e2e73a0691d1d8916?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Pomme  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-181639"><time datetime="2016-10-07T08:31:54+00:00">07/10/2016 at 08:31</time></a></header>  <section class="comment-content comment"><p>En pratique sur un texte en français, le surcoût de l&#8217;utf-8 par rapport à l&#8217;ignoble ascii est de moins de 5 % : en effet les caractères latins non accentués restent encodés sur 1 octet (comme l&#8217;ascii) et seuls les caractères accentués le sont sur deux octets&#8230; Donc à mon humble avis l&#8217;optimisation de la mémoire n&#8217;est pas une bonne excuse pour utiliser l&#8217;ascii. En fait si vous utilisez l&#8217;ascii, on va vous taper. fort.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-182097">
          
            <article id="comment-182097" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/b536f694d89d330385d5a6f663e26b4d?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/b536f694d89d330385d5a6f663e26b4d?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Tidus  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-182097"><time datetime="2016-10-23T10:14:44+00:00">23/10/2016 at 10:14</time></a></header>  <section class="comment-content comment"><p>Bonjour,</p>
<p>Tout d&#8217;abord un grand merci pour ces explications.</p>
<p>Toutefois j&#8217;ai un gros problème d&#8217;encodage et je ne comprends pas tout ce qui est indiqué ci-dessous (faut dire que je suis un gros débutant par rapport à vous autres). Voici mon problème:</p>
<p>File &#8220;C:&#092;Python27&#092;lib&#092;encodings&#092;cp1252.py&#8221;, line 15, in decode</p>
<p>return codecs.charmap_decode(input,errors,decoding_table)</p>
<p>UnicodeDecodeError: &#8216;charmap&#8217; codec can&#8217;t decode byte 0x81 in position 60: character maps to </p>
<p>Cela fait presque 24h que j&#8217;essaye de régler le problème mais je n&#8217;y arrive pas. Je comprends qu&#8217;il y a un problème d&#8217;unicode et d&#8217;ansi, mais malgré tout ce que j&#8217;ai pu voir et faire je n&#8217;y arrive pas.</p>
<p>(Pour plus de précision j&#8217;essaye pour ceux qui connaissent d&#8217;installer &#8220;wrye bash&#8221; sur le jeu Oblivion)</p>
<p>Bien à vous.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-182109">
          
            <article id="comment-182109" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-182109"><time datetime="2016-10-23T21:18:27+00:00">23/10/2016 at 21:18</time></a></header>  <section class="comment-content comment"><p>Bonjour Tidus. Va sur indexerror.net, on pourra mieux t&#8217;aider là bas.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-185330">
          
            <article id="comment-185330" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/7cfe859ba117aad9c007b0a332b7354f?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/7cfe859ba117aad9c007b0a332b7354f?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Gio  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-185330"><time datetime="2017-02-10T14:31:01+00:00">10/02/2017 at 14:31</time></a></header>  <section class="comment-content comment"><p>Salut,</p>
<p>article bien complet et utile &#8230; sauf que je n&#8217;arrive pas à m&#8217;en sortir :</p>
<p>je suis sur une VM Debian , je travaille avec eclipse.</p>
<p>Je liste une directory qui contient un fichier &#8220;scène.txt&#8221;</p>
<p>Le résultat de os.listdir(dir)  est &#8220;sc?ne.txt&#8221;  et c&#8217;est bien un point d&#8217;interrogation code ascii 63.</p>
<p>Un sys.getfilesystemencoding()  donne   ANSI_X3.4-1968  (d&#8217;où ça sort ???)</p>
<p>echo  $LANG     donne   en_US.utf8</p>
<p>Que faire ?</p>
<p>muchas gracias.</p>
<p>Sergio</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-185335">
          
            <article id="comment-185335" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-185335"><time datetime="2017-02-10T16:03:54+00:00">10/02/2017 at 16:03</time></a></header>  <section class="comment-content comment"><p>Va plutôt poster ta question sur indexerror.net, on y répond là bas. Ici c&#8217;est pas pratique.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-186327">
          
            <article id="comment-186327" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/85174845765df276b2ea1bbf8649d4ee?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/85174845765df276b2ea1bbf8649d4ee?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn"><a href='http://quentindurantay.me' rel='external nofollow' class='url'>Quentin</a>  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-186327"><time datetime="2017-03-17T14:32:00+00:00">17/03/2017 at 14:32</time></a></header>  <section class="comment-content comment"><p>Merci tellement pour cet article !</p>
<p>On est en 2017, mais c&#8217;est encore aujourd&#8217;hui le seul article français (voire du net), à expliquer aussi bien l&#8217;encoding. Surtout pour un pauvre mec comme moi qui a appris à coder seul (sans background académique) et qui galérait comme un con avec ma pauvre BDD qui me donnait des charactères chelous quand j&#8217;entrais du texte français&#8230;</p>
<p>Sam, je t&#8217;aime &lt;3</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-186356">
          
            <article id="comment-186356" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/6c3044d356f70993fa377a7b1706ca1e?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/6c3044d356f70993fa377a7b1706ca1e?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">AlainFELER  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-186356"><time datetime="2017-03-19T14:49:27+00:00">19/03/2017 at 14:49</time></a></header>  <section class="comment-content comment"><p>Depuis le temps que je reviens à cet article&#8230; faute d&#8217;orthographe dans le titre : une fois pour toute &#8211;&gt; une fois pour touteS !</p>
<p>En tout cas merci(s).</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-186357">
          
            <article id="comment-186357" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/6c3044d356f70993fa377a7b1706ca1e?s=80&#038;d=retro&#038;r=x' srcset='http://0.gravatar.com/avatar/6c3044d356f70993fa377a7b1706ca1e?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">AlainFELER  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-186357"><time datetime="2017-03-19T15:10:06+00:00">19/03/2017 at 15:10</time></a></header>  <section class="comment-content comment"><p>&#8230; je ne comprend pas comment (en Python 2.7) combiner vos infos et l&#8217;usage du module csv natif de Python.</p>
<p>Je veux modifier des csv en Windows-1252 ou UTF-8 (je reçois l&#8217;info en paramètre).</p>
<p>Par ex. j&#8217;ai en entrée des colonnes du genre &#8220;Prénom Nom&#8221; et des valeurs du genre &#8216;Rémi Dufrêne&#8217; et je veux en sortie &#8216;PRENOM&#8217;,&#8217;NOM&#8217; et &#8216;Rémi&#8217;,&#8217;Dufrêne&#8217;</p>
<p>La doc Python <a href="https://docs.python.org/2/library/csv.html" rel="nofollow">https://docs.python.org/2/library/csv.html</a> dit que le module csv ne gère pas l&#8217;unicode et explique des trucs en 13.1.5 que je ne comprends pas.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-186358">
          
            <article id="comment-186358" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-186358"><time datetime="2017-03-19T15:58:11+00:00">19/03/2017 at 15:58</time></a></header>  <section class="comment-content comment"><p>C&#8217;est exactement ça: csv en 2.7 ne gère pas l&#8217;unicode. Il existe un backport du module csv de python 3 pour y pallier : <a href="https://pypi.python.org/pypi/unicodecsv/0.14.1" rel="nofollow">https://pypi.python.org/pypi/unicodecsv/0.14.1</a></p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-187980">
          
            <article id="comment-187980" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/5ba52b129c2d92a57ab654d6f42f4fa0?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/5ba52b129c2d92a57ab654d6f42f4fa0?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">vchalmel  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-187980"><time datetime="2017-06-29T08:49:27+00:00">29/06/2017 at 08:49</time></a></header>  <section class="comment-content comment"><p><span class="relis"></span>Bonjour, et merci pour cet article de référence !</p>
<p>J&#8217;ai un comportement curieux d&#8217;un ETL incluant des scripts python</p>
<p><code></code></p>
<h1>-<em>- coding: utf-8 -</em>-</h1>
<p>print(type(unicode("Début Logging")))</p>
<p>print(type(u"Début logging"))</p>
</p>
<p>renvoient une erreur &#8216;utf8&#8217; codec can&#8217;t decode byte 0xe9</p>
<p>Et effectivement si je fais un print d&#8217;un chardet.detect de la chaîne de caractère (non unicode) dans ce logiciel il retourne &#8216;windows-1252&#8217; (ou Latin-2 selon les accents que j&#8217;utilise, comme tu le dis bien la détection n&#8217;est pas une science exacte), du coup j&#8217;ai l&#8217;impression que python en lisant u&#8221;Debut Logging&#8221; tente de faire un &#8220;Début Logging&#8221;.decode(&#8216;utf-8&#8217;) alors que la chaine d&#8217;entrée est resté dans un autre encodage.</p>
<p>Est-il possible que ma déclaration # coding : utf8 induise en erreur l&#8217;interpréteur python ? J&#8217;avais l&#8217;impression que ce n&#8217;était qu&#8217;une consigne pour les éditeurs de texte&#8230;</p>
<p>Confirmez vous ? Une solution ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-187982">
          
            <article id="comment-187982" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-187982"><time datetime="2017-06-29T12:57:20+00:00">29/06/2017 at 12:57</time></a></header>  <section class="comment-content comment"><blockquote>
<p>C’est une spécificité de Python : si l’encoding du fichier est différent de l’encoding par défaut du langage, il faut le déclarer sinon le programme plantera à la première conversion.</p>
</blockquote>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-195650">
          
            <article id="comment-195650" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/a8a95fa76b61e0966924db8e8c34c394?s=80&#038;d=retro&#038;r=x' srcset='http://1.gravatar.com/avatar/a8a95fa76b61e0966924db8e8c34c394?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">pouet  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-195650"><time datetime="2018-06-07T15:53:40+00:00">07/06/2018 at 15:53</time></a></header>  <section class="comment-content comment"><p>Salut. Je déterre le thread (c&#8217;est moche mais tant pis) pour plusieurs raisons.</p>
<p>La première, c&#8217;est pour remercier. Ces dernières années j&#8217;ai relu cet article un certain et il m&#8217;a beaucoup aidé à comprendre comment fonctionne l&#8217;encoding en Python, qui soyons clair, est passablement merdique&#8230; Donc voilà, merci beaucoup pour ces infos précieuses.</p>
<p>Deuxièmement, pour émettre des réserves sur un principe énoncé ici et que j&#8217;ai longtemps essayé d&#8217;appliquer sans succès, à savoir préfixer toutes ses chaînes avec u&#8221;machin&#8221; pour que toutes les chaînes aient le type unicode. De mon expérience, faire ça débouche presque obligatoirement sur de nouveaux plantages d&#8217;encoding. Pour deux raisons, mais qui au final reviennent à la même :</p>
<p>1) le type str est différent du type unicode et par conséquent, une fonction qui attend un type str peut avoir un comportement différent si on lui transmet une variable de type unicode voire (et c&#8217;est le cas la plupart du temps) planter, souvent pour la raison en 2)</p>
<p>2) la fonction str() de python (en version 2.7 du moins) est de la merde et plantera sur toute variable de type unicode contenant un caractère non-ascii, bien que d&#8217;après sa doc officielle &#8220;return a string containing a nicely printable representation of an object.&#8221;. Peut importe donc que tu te sois fais chier à gentiment décoder ta chaîne avec le bon codec, python s&#8217;en branle et essaie de la réencoder en ascii à l&#8217;appel de str()&#8230;</p>
<p>Or, en revanche, l&#8217;appel de str() sur une chaîne encodée (str) contenant des caractères non-ascii ne plante pas. C&#8217;est un comportement qu&#8217;on peut critiquer, mais on peut aussi le voir autrement en estimant que python délègue simplement la responsabilité d&#8217;interpréter les caractères au terminal de sortie, SI terminal de sortie il y a. Et justement, dans de nombreux cas, dans le cadre d&#8217;utilisation de la chaîne au sein du programme python, on utilise de nombreuses chaînes &#8220;transitoires&#8221; qui n&#8217;ont pas vocation à être imprimées (par python du moins) : clés de dictionnaire, requêtes SQL, etc. Il n&#8217;y a donc strictement aucun intérêt à les décoder.</p>
<p>Pour en revenir au comportement de str(), pour moi c&#8217;est une énorme aberration, surtout que par ailleurs, on a le même problème dans l&#8217;autre sens : un appel de unicode() sur une chaîne encodée (str donc) contenant des caractères non-ascii va planter. La conséquence misérable, c&#8217;est qu&#8217;il n&#8217;existe aucune fonction universelle en python permettant d&#8217;extraire la valeur imprimable d&#8217;une variable quel que soit son type, alors que c&#8217;est ce que str() devrait faire ! Dès qu&#8217;on construit une fonction de type logger() par exemple qui va faire du str() sur toutes les variables qu&#8217;on lui envoit (peut importe leur type), on va être obligé de vérifier leur type avant JUSTE pour gérer le cas des chaînes décodées, ce qui soyons clair, est complètement débile&#8230;.</p>
<p>Je suis ouvert bien sûr aux remarques et critiques  (si vous avez eu le courage de lire mon pavé :P)</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-195656">
          
            <article id="comment-195656" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-195656"><time datetime="2018-06-07T18:02:07+00:00">07/06/2018 at 18:02</time></a></header>  <section class="comment-content comment"><p>Le comportement de <code>str()</code> est aberrant parce qu&#8217;il ne gère pas du texte, mais des octets bruts representant du texte.</p>
<p>Quand on a voulu faire le split octets / texte en Python 2, on s&#8217;est hurté à un problème: on avait déjà donné le nom <code>str</code> à quelque chose qui n&#8217;était PAS du texte selon la nouvelle API.</p>
<p>Donc a on fait str / unicode, et str est le nom resté pour représenter &#8230; ce qui n&#8217;est pas du texte.</p>
<p>Du coup tout le monde continue de se gourer en Python 2, voulant manipuler du texte, mais manipulant des bytes sans comprendre la plupart du temps.</p>
<p>En Python 3, on a corrigé ça, et str() représente / converti bien du texte, tandis que bytes() represente / converti bien des bytes.</p>
<p>Le comportement de Python est donc logique, et même sain, mais pour des raisons de compatibilité, on ne peut pas avoir une sémantique clair en Python 2. Il est en effet, hors de question de casser python 2.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-196301">
          
            <article id="comment-196301" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/b63fd4a86a726d32f3c0ad7cda982641?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/b63fd4a86a726d32f3c0ad7cda982641?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">le Fatumbi  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-196301"><time datetime="2018-07-03T09:45:37+00:00">03/07/2018 at 09:45</time></a></header>  <section class="comment-content comment"><p>ah bhen super) <em>le</em> truc à lire avant de tenter d&#8217;ouvrir le moindre txt en python 2.7</p>
<p>merci merci :-)</p>
<p>sauf que la video est bloquée pour des raisons de droit d&#8217;auteur, mais le reste ça va)</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-196302">
          
            <article id="comment-196302" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-196302"><time datetime="2018-07-03T09:48:17+00:00">03/07/2018 at 09:48</time></a></header>  <section class="comment-content comment"><p>Ok, c&#8217;est corrigé.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-197288">
          
            <article id="comment-197288" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://2.gravatar.com/avatar/8de877b6f634064976d9542e24baa41f?s=80&#038;d=retro&#038;r=x' srcset='http://2.gravatar.com/avatar/8de877b6f634064976d9542e24baa41f?s=160&#038;d=retro&#038;r=x 2x' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">christophe  </cite> <a class="comment-date" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#comment-197288"><time datetime="2018-08-11T14:34:53+00:00">11/08/2018 at 14:34</time></a></header>  <section class="comment-content comment"><p>Eh bien on peut dire que ça c&#8217;est un post aussi long qu&#8217;utile !!<br />
Je me bat depuis deux jours avec un module qui grace à tes lumières m&#8217;ont permis de comprendre qu&#8217;il ne supporte pas l&#8217;unicode (img2pdf)<br />
Mille merci pour m&#8217;avoir éclairé sur ces foutus problèmes de tables, j&#8217;ai enfin pu corriger ce qui n&#8217;allait pas<br />
Merci beaucup !</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
              </ul><!-- .commentlist -->
            <p class="nocomments">Comments are closed.</p></div><!-- #comments .comments-area -->


<div class="ie-comment">
Des questions Python sans rapport avec l'article ? Posez-les sur <a href="http://indexerror.net">IndexError</a>.

</div>
        
          <hr class="featurette-divider __after_loop">
          <nav id="nav-below" class="navigation" role="navigation">

              <h3 class="assistive-text">
                Post navigation              </h3>

              <ul class="pager">
                                  <li class="previous">
                    <span class="nav-previous">
                      <a href="../deux-conneries-a-la-seconde/index.html" rel="prev"><span class="meta-nav">&larr;</span> Deux conneries à la seconde</a>                    </span>
                  </li>
                                                  <li class="next">
                    <span class="nav-next">
                        <a href="../creer-un-snippet-pour-sublime-text/index.html" rel="next">Créer un snippet pour Sublime Text <span class="meta-nav">&rarr;</span></a>                    </span>
                  </li>
                              </ul>

          </nav><!-- #nav-below .navigation -->

        
        
                </div><!--.article-container -->

                    
        <div class="span3 right tc-sidebar">
           <div id="right" class="widget-area" role="complementary">
                                                      <aside id="text-9" class="widget widget_text">			<div class="textwidget"><p style="font-size:1.3em"><a href="../mais-ou-je-suis-tombee-la/index.html">Mais où je suis tombé(e) là ?</a></p></div>
		</aside><aside id="text-7" class="widget widget_text">			<div class="textwidget"><img src="http://www.adobe.com/images/pdficon_small.png" width="16" height="16"/> <a href="http://pdfcrowd.com/url_to_pdf/">Télécharger cette page en PDF</a> </div>
		</aside><aside id="text-4" class="widget widget_text">			<div class="textwidget"><br><br><a href="../appel-a-contributeurs-impertinents/index.html"><img src="../wp-content/uploads/2012/07/contributeur.png" width="288px" style="vertical-align: middle;margin-top:-40px;margin-bottom:10px;"></a> </div>
		</aside><aside id="blog_subscription-4" class="widget jetpack_subscription_widget"><h3 class="widget-title">Souscrire à nos conneries</h3>
			<form action="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#" method="post" accept-charset="utf-8" id="subscribe-blog-blog_subscription-4">
				<div id="subscribe-text"><p>Entrez votre adresse mail et vous recevrez une notification à chaque nouvel article.</p>
</div><p>Join 1,492 other subscribers</p>
					<p id="subscribe-email">
						<label id="jetpack-subscribe-label" for="subscribe-field-blog_subscription-4">
							Email Address						</label>
						<input type="email" name="email" required="required" class="required" value="" id="subscribe-field-blog_subscription-4" placeholder="Email Address" />
					</p>

					<p id="subscribe-submit">
						<input type="hidden" name="action" value="subscribe" />
						<input type="hidden" name="source" value="http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/" />
						<input type="hidden" name="sub-type" value="widget" />
						<input type="hidden" name="redirect_fragment" value="blog_subscription-4" />
												<input type="submit" value="J&#039;adhère, bon dieu !" name="jetpack_subscriptions_widget" />
					</p>
							</form>

			<script>
			/*
			Custom functionality for safari and IE
			 */
			(function( d ) {
				// In case the placeholder functionality is available we remove labels
				if ( ( 'placeholder' in d.createElement( 'input' ) ) ) {
					var label = d.querySelector( 'label[for=subscribe-field-blog_subscription-4]' );
						label.style.clip 	 = 'rect(1px, 1px, 1px, 1px)';
						label.style.position = 'absolute';
						label.style.height   = '1px';
						label.style.width    = '1px';
						label.style.overflow = 'hidden';
				}

				// Make sure the email value is filled in before allowing submit
				var form = d.getElementById('subscribe-blog-blog_subscription-4'),
					input = d.getElementById('subscribe-field-blog_subscription-4'),
					handler = function( event ) {
						if ( '' === input.value ) {
							input.focus();

							if ( event.preventDefault ){
								event.preventDefault();
							}

							return false;
						}
					};

				if ( window.addEventListener ) {
					form.addEventListener( 'submit', handler, false );
				} else {
					form.attachEvent( 'onsubmit', handler );
				}
			})( document );
			</script>
				
</aside><aside id="tag_cloud-3" class="widget widget_tag_cloud"><h3 class="widget-title">TagCloud</h3><div class="tagcloud"><a href="../tag/0bin/index.html" class="tag-cloud-link tag-link-148 tag-link-position-1" style="font-size: 9.04pt;" aria-label="0bin (11 items)">0bin</a>
<a href="../tag/angularjs/index.html" class="tag-cloud-link tag-link-443 tag-link-position-2" style="font-size: 8.4pt;" aria-label="angularjs (9 items)">angularjs</a>
<a href="../tag/asyncio/index.html" class="tag-cloud-link tag-link-922 tag-link-position-3" style="font-size: 9.04pt;" aria-label="asyncio (11 items)">asyncio</a>
<a href="../tag/autobahn/index.html" class="tag-cloud-link tag-link-979 tag-link-position-4" style="font-size: 8.4pt;" aria-label="autobahn (9 items)">autobahn</a>
<a href="../tag/bash/index.html" class="tag-cloud-link tag-link-14 tag-link-position-5" style="font-size: 10.8pt;" aria-label="bash (19 items)">bash</a>
<a href="../tag/bitcoin/index.html" class="tag-cloud-link tag-link-320 tag-link-position-6" style="font-size: 8.4pt;" aria-label="bitcoin (9 items)">bitcoin</a>
<a href="../tag/blog/index.html" class="tag-cloud-link tag-link-107 tag-link-position-7" style="font-size: 11.84pt;" aria-label="blog (26 items)">blog</a>
<a href="../tag/cache/index.html" class="tag-cloud-link tag-link-333 tag-link-position-8" style="font-size: 8.72pt;" aria-label="cache (10 items)">cache</a>
<a href="../tag/comprehension-lists/index.html" class="tag-cloud-link tag-link-20 tag-link-position-9" style="font-size: 8pt;" aria-label="comprehension-lists (8 items)">comprehension-lists</a>
<a href="../tag/crossbar/index.html" class="tag-cloud-link tag-link-1046 tag-link-position-10" style="font-size: 8.4pt;" aria-label="crossbar (9 items)">crossbar</a>
<a href="../tag/css/index.html" class="tag-cloud-link tag-link-188 tag-link-position-11" style="font-size: 8.4pt;" aria-label="css (9 items)">css</a>
<a href="../tag/cul-2/index.html" class="tag-cloud-link tag-link-33 tag-link-position-12" style="font-size: 9.28pt;" aria-label="cul (12 items)">cul</a>
<a href="../tag/dict/index.html" class="tag-cloud-link tag-link-435 tag-link-position-13" style="font-size: 8pt;" aria-label="dict (8 items)">dict</a>
<a href="../tag/django/index.html" class="tag-cloud-link tag-link-28 tag-link-position-14" style="font-size: 16pt;" aria-label="django (89 items)">django</a>
<a href="../tag/don/index.html" class="tag-cloud-link tag-link-1210 tag-link-position-15" style="font-size: 10.48pt;" aria-label="don (17 items)">don</a>
<a href="../tag/encoding/index.html" class="tag-cloud-link tag-link-54 tag-link-position-16" style="font-size: 8.72pt;" aria-label="encoding (10 items)">encoding</a>
<a href="../tag/git/index.html" class="tag-cloud-link tag-link-18 tag-link-position-17" style="font-size: 12.88pt;" aria-label="git (35 items)">git</a>
<a href="../tag/http/index.html" class="tag-cloud-link tag-link-204 tag-link-position-18" style="font-size: 9.6pt;" aria-label="http (13 items)">http</a>
<a href="../tag/import/index.html" class="tag-cloud-link tag-link-215 tag-link-position-19" style="font-size: 8.4pt;" aria-label="import (9 items)">import</a>
<a href="../tag/ipython/index.html" class="tag-cloud-link tag-link-164 tag-link-position-20" style="font-size: 8.72pt;" aria-label="ipython (10 items)">ipython</a>
<a href="../tag/iterable/index.html" class="tag-cloud-link tag-link-217 tag-link-position-21" style="font-size: 9.84pt;" aria-label="iterable (14 items)">iterable</a>
<a href="../tag/javascript/index.html" class="tag-cloud-link tag-link-96 tag-link-position-22" style="font-size: 14.08pt;" aria-label="javascript (50 items)">javascript</a>
<a href="../tag/jquery/index.html" class="tag-cloud-link tag-link-112 tag-link-position-23" style="font-size: 8pt;" aria-label="jquery (8 items)">jquery</a>
<a href="../tag/linux/index.html" class="tag-cloud-link tag-link-238 tag-link-position-24" style="font-size: 9.04pt;" aria-label="linux (11 items)">linux</a>
<a href="../tag/meta/index.html" class="tag-cloud-link tag-link-102 tag-link-position-25" style="font-size: 17.52pt;" aria-label="meta (138 items)">meta</a>
<a href="../tag/mysql/index.html" class="tag-cloud-link tag-link-82 tag-link-position-26" style="font-size: 8pt;" aria-label="mysql (8 items)">mysql</a>
<a href="../tag/nginx/index.html" class="tag-cloud-link tag-link-183 tag-link-position-27" style="font-size: 9.84pt;" aria-label="nginx (14 items)">nginx</a>
<a href="../tag/nsfw/index.html" class="tag-cloud-link tag-link-319 tag-link-position-28" style="font-size: 9.84pt;" aria-label="nsfw (14 items)">nsfw</a>
<a href="../tag/pep8/index.html" class="tag-cloud-link tag-link-552 tag-link-position-29" style="font-size: 8pt;" aria-label="pep8 (8 items)">pep8</a>
<a href="../tag/pip/index.html" class="tag-cloud-link tag-link-344 tag-link-position-30" style="font-size: 8.72pt;" aria-label="pip (10 items)">pip</a>
<a href="../tag/poo/index.html" class="tag-cloud-link tag-link-549 tag-link-position-31" style="font-size: 10pt;" aria-label="poo (15 items)">poo</a>
<a href="../tag/python/index.html" class="tag-cloud-link tag-link-4 tag-link-position-32" style="font-size: 22pt;" aria-label="python (496 items)">python</a>
<a href="../tag/python-3/index.html" class="tag-cloud-link tag-link-365 tag-link-position-33" style="font-size: 8.4pt;" aria-label="python 3 (9 items)">python 3</a>
<a href="../tag/redis/index.html" class="tag-cloud-link tag-link-196 tag-link-position-34" style="font-size: 8.72pt;" aria-label="redis (10 items)">redis</a>
<a href="../tag/ruby/index.html" class="tag-cloud-link tag-link-325 tag-link-position-35" style="font-size: 8pt;" aria-label="ruby (8 items)">ruby</a>
<a href="../tag/shell/index.html" class="tag-cloud-link tag-link-202 tag-link-position-36" style="font-size: 8.72pt;" aria-label="shell (10 items)">shell</a>
<a href="../tag/sublime-text/index.html" class="tag-cloud-link tag-link-76 tag-link-position-37" style="font-size: 8.4pt;" aria-label="sublime text (9 items)">sublime text</a>
<a href="../tag/ubuntu/index.html" class="tag-cloud-link tag-link-255 tag-link-position-38" style="font-size: 10.24pt;" aria-label="ubuntu (16 items)">ubuntu</a>
<a href="../tag/unicode/index.html" class="tag-cloud-link tag-link-53 tag-link-position-39" style="font-size: 8.4pt;" aria-label="unicode (9 items)">unicode</a>
<a href="../tag/unit-tests/index.html" class="tag-cloud-link tag-link-302 tag-link-position-40" style="font-size: 8.72pt;" aria-label="unit tests (10 items)">unit tests</a>
<a href="../tag/unpacking/index.html" class="tag-cloud-link tag-link-180 tag-link-position-41" style="font-size: 8pt;" aria-label="unpacking (8 items)">unpacking</a>
<a href="../tag/virtualenv/index.html" class="tag-cloud-link tag-link-259 tag-link-position-42" style="font-size: 9.04pt;" aria-label="virtualenv (11 items)">virtualenv</a>
<a href="../tag/wamp/index.html" class="tag-cloud-link tag-link-1039 tag-link-position-43" style="font-size: 10pt;" aria-label="wamp (15 items)">wamp</a>
<a href="../tag/web-2/index.html" class="tag-cloud-link tag-link-758 tag-link-position-44" style="font-size: 8pt;" aria-label="web (8 items)">web</a>
<a href="../tag/yield/index.html" class="tag-cloud-link tag-link-287 tag-link-position-45" style="font-size: 8.4pt;" aria-label="yield (9 items)">yield</a></div>
</aside><aside id="text-5" class="widget widget_text"><h3 class="widget-title"> Envoyez des sioux</h3>			<div class="textwidget"><p><img src="../wp-content/uploads/2013/07/bitcoin.png" width="16" height="16"/> On adooooore les bitcoins :</p>

<p>

<a href="bitcoin:19zAHPPuce4BAhsdy9KaFwVLurEJXMhMAn?amount=1X8&label=SamEtMax">19zAHPPuce4BAhsdy9KaFwVLurEJXMhMAn</a>

</p></div>
		</aside><aside id="nav_menu-3" class="widget widget_nav_menu"><h3 class="widget-title">Nos projets</h3><div class="menu-nos-projets-container"><ul id="menu-nos-projets" class="menu"><li id="menu-item-15841" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15841"><a href="http://multiboards.net/">Multiboards &#8211; l&#8217;actu geek fr en une page</a></li>
<li id="menu-item-15837" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15837"><a href="http://0bin.net">0bin &#8211; le pastebin chiffré</a></li>
<li id="menu-item-15838" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15838"><a href="http://allthatcounts.net">All that counts &#8211; compteur pour jeux</a></li>
<li id="menu-item-15839" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15839"><a href="https://github.com/sametmax/django-quicky">Django quicky &#8211; quick views for Django</a></li>
<li id="menu-item-15840" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15840"><a href="https://github.com/sametmax/VizHash.js">VizHash.js &#8211; Hash visuels</a></li>
<li id="menu-item-15842" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15842"><a href="https://github.com/sametmax/codes-des-articles">Code des articles du blog</a></li>
</ul></div></aside><aside id="text-11" class="widget widget_text"><h3 class="widget-title"> </h3>			<div class="textwidget"> </div>
		</aside><aside id="meta-3" class="widget widget_meta"><h3 class="widget-title">Meta</h3>			<ul>
						<li><a href="../wp-login.php.html">Log in</a></li>
			<li><a href="../feed.1">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="../comments/feed/index.html">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
			</aside>                                              </div><!-- #left or #right-->
        </div><!--.tc-sidebar -->

        
        </div><!--.row -->
    </div><!-- .container role: main -->

    
</div><!--#main-wrapper"-->

		<!-- FOOTER -->
		<footer id="footer" class="">
		 					<div class="container footer-widgets ">
					<div class="row widget-area" role="complementary">
												
							<div id="footer_one" class="span4">
																
										<aside id="nav_menu-2" class="widget widget_nav_menu"><h3 class="widget-title">Hors du blog</h3><div class="menu-bottom-menu-container"><ul id="menu-bottom-menu" class="menu"><li id="menu-item-2391" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2391"><a href="../contactez-nous/index.html">Page de contact</a></li>
<li id="menu-item-12230" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12230"><a href="http://twitter.com/sam_et_max">@sam_et_max sur twitter</a></li>
<li id="menu-item-12285" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12285"><a href="http://bridge.suumitsu.eu/?action=display&#038;bridge=TwitterBridge&#038;u=sam_et_max&#038;format=AtomFormat">Nos tweets en RSS</a></li>
<li id="menu-item-12231" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12231"><a href="https://github.com/sametmax/">Fork me, I&#8217;m famous (github)</a></li>
</ul></div></aside>
																							</div><!-- .{$key}_widget_class -->

						
							<div id="footer_two" class="span4">
																
										<aside id="text-8" class="widget widget_text">			<div class="textwidget">Tous les textes de ce blog, sauf signalement contraire, sont sous licence <a href="http://creativecommons.org/licenses/by/3.0/">creative common 3.0 unported</a>.</div>
		</aside>
																							</div><!-- .{$key}_widget_class -->

						
							<div id="footer_three" class="span4">
																
										<aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">Toi aussi, trouve un article obsolète sur notre blog</h3>		<ul>
			<li><a href='../2019/09/index.html'>September 2019</a>&nbsp;(1)</li>
	<li><a href='../2019/06/index.html'>June 2019</a>&nbsp;(1)</li>
	<li><a href='../2019/02/index.html'>February 2019</a>&nbsp;(1)</li>
	<li><a href='../2019/01/index.html'>January 2019</a>&nbsp;(3)</li>
	<li><a href='../2018/12/index.html'>December 2018</a>&nbsp;(1)</li>
	<li><a href='../2018/09/index.html'>September 2018</a>&nbsp;(2)</li>
	<li><a href='../2018/08/index.html'>August 2018</a>&nbsp;(1)</li>
	<li><a href='../2018/07/index.html'>July 2018</a>&nbsp;(3)</li>
	<li><a href='../2018/06/index.html'>June 2018</a>&nbsp;(4)</li>
	<li><a href='../2018/05/index.html'>May 2018</a>&nbsp;(2)</li>
	<li><a href='../2018/03/index.html'>March 2018</a>&nbsp;(2)</li>
	<li><a href='../2018/02/index.html'>February 2018</a>&nbsp;(1)</li>
	<li><a href='../2017/12/index.html'>December 2017</a>&nbsp;(4)</li>
	<li><a href='../2017/11/index.html'>November 2017</a>&nbsp;(5)</li>
	<li><a href='../2017/10/index.html'>October 2017</a>&nbsp;(2)</li>
	<li><a href='../2017/09/index.html'>September 2017</a>&nbsp;(1)</li>
	<li><a href='../2017/07/index.html'>July 2017</a>&nbsp;(5)</li>
	<li><a href='../2017/06/index.html'>June 2017</a>&nbsp;(3)</li>
	<li><a href='../2017/05/index.html'>May 2017</a>&nbsp;(3)</li>
	<li><a href='../2017/04/index.html'>April 2017</a>&nbsp;(2)</li>
	<li><a href='../2017/03/index.html'>March 2017</a>&nbsp;(3)</li>
	<li><a href='../2017/02/index.html'>February 2017</a>&nbsp;(5)</li>
	<li><a href='../2017/01/index.html'>January 2017</a>&nbsp;(5)</li>
	<li><a href='../2016/10/index.html'>October 2016</a>&nbsp;(2)</li>
	<li><a href='../2016/09/index.html'>September 2016</a>&nbsp;(5)</li>
	<li><a href='../2016/08/index.html'>August 2016</a>&nbsp;(2)</li>
	<li><a href='../2016/03/index.html'>March 2016</a>&nbsp;(8)</li>
	<li><a href='../2016/02/index.html'>February 2016</a>&nbsp;(9)</li>
	<li><a href='../2016/01/index.html'>January 2016</a>&nbsp;(16)</li>
	<li><a href='../2015/12/index.html'>December 2015</a>&nbsp;(6)</li>
	<li><a href='../2015/11/index.html'>November 2015</a>&nbsp;(7)</li>
	<li><a href='../2015/10/index.html'>October 2015</a>&nbsp;(2)</li>
	<li><a href='../2015/09/index.html'>September 2015</a>&nbsp;(6)</li>
	<li><a href='../2015/08/index.html'>August 2015</a>&nbsp;(10)</li>
	<li><a href='../2015/07/index.html'>July 2015</a>&nbsp;(18)</li>
	<li><a href='../2015/06/index.html'>June 2015</a>&nbsp;(13)</li>
	<li><a href='../2015/05/index.html'>May 2015</a>&nbsp;(12)</li>
	<li><a href='../2015/04/index.html'>April 2015</a>&nbsp;(13)</li>
	<li><a href='../2015/03/index.html'>March 2015</a>&nbsp;(8)</li>
	<li><a href='../2015/02/index.html'>February 2015</a>&nbsp;(4)</li>
	<li><a href='../2015/01/index.html'>January 2015</a>&nbsp;(21)</li>
	<li><a href='../2014/12/index.html'>December 2014</a>&nbsp;(24)</li>
	<li><a href='../2014/11/index.html'>November 2014</a>&nbsp;(6)</li>
	<li><a href='../2014/10/index.html'>October 2014</a>&nbsp;(18)</li>
	<li><a href='../2014/09/index.html'>September 2014</a>&nbsp;(10)</li>
	<li><a href='../2014/08/index.html'>August 2014</a>&nbsp;(5)</li>
	<li><a href='../2014/07/index.html'>July 2014</a>&nbsp;(11)</li>
	<li><a href='../2014/06/index.html'>June 2014</a>&nbsp;(25)</li>
	<li><a href='../2014/05/index.html'>May 2014</a>&nbsp;(14)</li>
	<li><a href='../2014/04/index.html'>April 2014</a>&nbsp;(10)</li>
	<li><a href='../2014/03/index.html'>March 2014</a>&nbsp;(23)</li>
	<li><a href='../2014/02/index.html'>February 2014</a>&nbsp;(27)</li>
	<li><a href='../2014/01/index.html'>January 2014</a>&nbsp;(17)</li>
	<li><a href='../2013/12/index.html'>December 2013</a>&nbsp;(27)</li>
	<li><a href='../2013/11/index.html'>November 2013</a>&nbsp;(25)</li>
	<li><a href='../2013/10/index.html'>October 2013</a>&nbsp;(27)</li>
	<li><a href='../2013/09/index.html'>September 2013</a>&nbsp;(1)</li>
	<li><a href='../2013/08/index.html'>August 2013</a>&nbsp;(31)</li>
	<li><a href='../2013/07/index.html'>July 2013</a>&nbsp;(32)</li>
	<li><a href='../2013/06/index.html'>June 2013</a>&nbsp;(24)</li>
	<li><a href='../2013/05/index.html'>May 2013</a>&nbsp;(30)</li>
	<li><a href='../2013/04/index.html'>April 2013</a>&nbsp;(31)</li>
	<li><a href='../2013/03/index.html'>March 2013</a>&nbsp;(33)</li>
	<li><a href='../2013/02/index.html'>February 2013</a>&nbsp;(29)</li>
	<li><a href='../2013/01/index.html'>January 2013</a>&nbsp;(34)</li>
	<li><a href='../2012/12/index.html'>December 2012</a>&nbsp;(32)</li>
	<li><a href='../2012/11/index.html'>November 2012</a>&nbsp;(36)</li>
	<li><a href='../2012/10/index.html'>October 2012</a>&nbsp;(35)</li>
	<li><a href='../2012/09/index.html'>September 2012</a>&nbsp;(36)</li>
	<li><a href='../2012/08/index.html'>August 2012</a>&nbsp;(37)</li>
	<li><a href='../2012/07/index.html'>July 2012</a>&nbsp;(33)</li>
	<li><a href='../2012/06/index.html'>June 2012</a>&nbsp;(24)</li>
	<li><a href='../2012/05/index.html'>May 2012</a>&nbsp;(31)</li>
	<li><a href='../2012/04/index.html'>April 2012</a>&nbsp;(20)</li>
	<li><a href='../2012/03/index.html'>March 2012</a>&nbsp;(10)</li>
	<li><a href='../2012/02/index.html'>February 2012</a>&nbsp;(14)</li>
		</ul>
		</aside>
																							</div><!-- .{$key}_widget_class -->

																	</div><!-- .row.widget-area -->
				</div><!--.footer-widgets -->
				    				 <div class="colophon">
			 	<div class="container">
			 		<div class="row-fluid">
					    <div class="span4 social-block pull-left"><span class="tc-footer-social-links-wrapper" ><a class="social-icon icon-feed" href="../feed/rss/index.html" title="Subscribe to my rss feed"  ></a></span></div><div class="span4 credits"><p>&middot; &copy; 2019 <a href="../index.html" title="Sam &amp; Max" rel="bookmark">Sam &amp; Max</a> &middot; Designed by <a href="http://themesandco.com/">Themes &amp; Co</a> &middot;</p></div><div class="span4 backtop"><p class="pull-right"><a class="back-to-top" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#">Back to top</a></p></div>	      			</div><!-- .row-fluid -->
	      		</div><!-- .container -->
	      	</div><!-- .colophon -->
	    			</footer>
			<div style="display:none">
	<div class="grofile-hash-map-bf9ecde8f5e286de6ce5c80206cf9dd6">
	</div>
	<div class="grofile-hash-map-fc32c6686686ecc595f05ad1885c2fb3">
	</div>
	<div class="grofile-hash-map-bf9ecde8f5e286de6ce5c80206cf9dd6">
	</div>
	<div class="grofile-hash-map-75be759a2751164a7cf44aeb38ef9b64">
	</div>
	<div class="grofile-hash-map-2cb6a22c42476804f59d6506b9df7dac">
	</div>
	<div class="grofile-hash-map-b92feba617e050ea5163b9bb6057eb91">
	</div>
	<div class="grofile-hash-map-de3d107ed1ccad362b44763106a78178">
	</div>
	<div class="grofile-hash-map-eb8e400eec222e2b09bd901aba2cb2dc">
	</div>
	<div class="grofile-hash-map-83b27f6ff2301ca0f4ed1c7628620757">
	</div>
	<div class="grofile-hash-map-e02b4f39f9fc66bea03fee2240a8d09e">
	</div>
	<div class="grofile-hash-map-b93cc4fb6413bbe5c837530662bee9b4">
	</div>
	<div class="grofile-hash-map-71c8468ff89b252f8a01aa2ce4c53053">
	</div>
	<div class="grofile-hash-map-e2ed1646f3954f52a8a9d8b1cb4e719b">
	</div>
	<div class="grofile-hash-map-f1e94121f75fd79a19595316bc3a7e2d">
	</div>
	<div class="grofile-hash-map-9369e3d134cec4a408d88aa31920bec4">
	</div>
	<div class="grofile-hash-map-e5176cded08b65b91099dc61f31d43c8">
	</div>
	<div class="grofile-hash-map-680b846ea80b0ef20759890ba41d387a">
	</div>
	<div class="grofile-hash-map-28233f8e47f1e832a10624a099b164d8">
	</div>
	<div class="grofile-hash-map-e78fd560fdb27287f18a9c6d6adb7ac1">
	</div>
	<div class="grofile-hash-map-c055f36fe773e826e501205297f314e6">
	</div>
	<div class="grofile-hash-map-0a17b925c74e4866698b382890452410">
	</div>
	<div class="grofile-hash-map-ea8f752e4ca2c76ec567486750b68bea">
	</div>
	<div class="grofile-hash-map-42bea47e0da1af52f054aedaa04a80ed">
	</div>
	<div class="grofile-hash-map-7f0380eef9c7bcd732517e423ef189cc">
	</div>
	<div class="grofile-hash-map-cdc7f38c47e249eb8d88b45695b112f9">
	</div>
	<div class="grofile-hash-map-7517bb7abc49e6f712046154728489fe">
	</div>
	<div class="grofile-hash-map-57757fbf569001c78c6fa859a2ad9e14">
	</div>
	<div class="grofile-hash-map-34fec3e6399215627b7ff146c855e596">
	</div>
	<div class="grofile-hash-map-0fc98a591e9e93601e116aa374bc1ee5">
	</div>
	<div class="grofile-hash-map-6c8ae2b6b7fe6954f088a32e3acb5065">
	</div>
	<div class="grofile-hash-map-f4b94e3d2b98d05ed47501bf4d579fac">
	</div>
	<div class="grofile-hash-map-4310af6df1c3bb3d71bbb34e7d7f8a74">
	</div>
	<div class="grofile-hash-map-1c5fbf0b65e76860769936556953f23b">
	</div>
	<div class="grofile-hash-map-473fe0edd6a4d4b44052adb280e66c1d">
	</div>
	<div class="grofile-hash-map-ccac26c6992556a8f8f3ece478e16a7d">
	</div>
	<div class="grofile-hash-map-0698013968f08a2619305442e0c2a4fb">
	</div>
	<div class="grofile-hash-map-808fe1aefb216d326a6be78487f5e4c2">
	</div>
	<div class="grofile-hash-map-308a3596152a79231f3feedc49afa4ef">
	</div>
	<div class="grofile-hash-map-8053f3be275eb36ca2e64435b787aa32">
	</div>
	<div class="grofile-hash-map-a94cb1274493b4e181019caaf709c085">
	</div>
	<div class="grofile-hash-map-57b79178e2abcea075754918604c6308">
	</div>
	<div class="grofile-hash-map-f589a689b7faaa2064fe26413084bba2">
	</div>
	<div class="grofile-hash-map-0e639c4a8349ca5943f1c55bf28415f1">
	</div>
	<div class="grofile-hash-map-01873fcaf827334a2a79431eb93f3e26">
	</div>
	<div class="grofile-hash-map-0794e59ad5d92c6048d175a9bec37c0b">
	</div>
	<div class="grofile-hash-map-d0c317a94f1879c3b7c53ebbf81c34e6">
	</div>
	<div class="grofile-hash-map-54164aa5da9b5ebb76d2989e7e170ce5">
	</div>
	<div class="grofile-hash-map-3a2f8f8131aebba9b1bb50b573f6a13f">
	</div>
	<div class="grofile-hash-map-be5a80eff82ee6c2a12351be262b4f61">
	</div>
	<div class="grofile-hash-map-58de788049511c348293616bc532f3eb">
	</div>
	<div class="grofile-hash-map-f976af5e820922c8ebc645e42f8e17a4">
	</div>
	<div class="grofile-hash-map-bcebda8ba97ca45dd49aebaec5836f0f">
	</div>
	<div class="grofile-hash-map-ae46ed8d7a83728aae37a59b03306c11">
	</div>
	<div class="grofile-hash-map-3ed9f823a485eebffaaabd41a0ea2225">
	</div>
	<div class="grofile-hash-map-b762db391f5e802cf9f7a5423f4af771">
	</div>
	<div class="grofile-hash-map-db742ca9523b385f9eab6c0b7cc58309">
	</div>
	<div class="grofile-hash-map-c74de5d1e8208fea85b9fe89d2960baa">
	</div>
	<div class="grofile-hash-map-1724828766d24e40f36719c283a197fa">
	</div>
	<div class="grofile-hash-map-f1ab310a2c61242e2e73a0691d1d8916">
	</div>
	<div class="grofile-hash-map-b536f694d89d330385d5a6f663e26b4d">
	</div>
	<div class="grofile-hash-map-7cfe859ba117aad9c007b0a332b7354f">
	</div>
	<div class="grofile-hash-map-85174845765df276b2ea1bbf8649d4ee">
	</div>
	<div class="grofile-hash-map-6c3044d356f70993fa377a7b1706ca1e">
	</div>
	<div class="grofile-hash-map-5ba52b129c2d92a57ab654d6f42f4fa0">
	</div>
	<div class="grofile-hash-map-a8a95fa76b61e0966924db8e8c34c394">
	</div>
	<div class="grofile-hash-map-b63fd4a86a726d32f3c0ad7cda982641">
	</div>
	<div class="grofile-hash-map-8de877b6f634064976d9542e24baa41f">
	</div>
	</div>

	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"http:\/\/sametmax.com\/lencoding-en-python-une-bonne-fois-pour-toute\/":5824};
	</script>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
			<div id="fb-root"></div>
			<script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&appId=249643311490&version=v2.3'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script>
			<script>
			jQuery( document.body ).on( 'post-load', function() {
				if ( 'undefined' !== typeof FB ) {
					FB.XFBML.parse();
				}
			} );
			</script>
						<script>
			function renderGooglePlus1() {
				if ( 'undefined' === typeof gapi ) {
					return;
				}

				jQuery( '.g-plus' ).each(function() {
					var $button = jQuery( this );

					if ( ! $button.data( 'gplus-rendered' ) ) {
						gapi.plusone.render( this, {
							href: $button.attr( 'data-href' ),
							size: $button.attr( 'data-size' ),
							annotation: $button.attr( 'data-annotation' )
						});

						$button.data( 'gplus-rendered', true );
					}
				});
			}

			(function() {
				var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
				po.src = 'https://apis.google.com/js/platform.js';
				po.innerHTML = '{"parsetags": "explicit"}';
				po.onload = renderGooglePlus1;
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
			})();

			jQuery( document.body ).on( 'post-load', renderGooglePlus1 );
			</script>
				<div id="sharing_email" style="display: none;">
		<form action="../lencoding-en-python-une-bonne-fois-pour-toute.1.html" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="email" name="target_email" id="target_email" value="" />

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="" />

				<label for="source_email">Your Email Address</label>
				<input type="email" name="source_email" id="source_email" value="" />

						<input type="text" id="jetpack-source_f_name" name="source_f_name" class="input" value="" size="25" autocomplete="off" title="This field is for validation and should not be changed" />
			
			<img style="float: right; display: none" class="loading" src="../wp-content/plugins/jetpack/modules/sharedaddy/images/loading.gif" alt="loading" width="16" height="16" />
			<input type="submit" value="Send Email" class="sharing_send" />
			<a rel="nofollow" href="../lencoding-en-python-une-bonne-fois-pour-toute.1.html#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
					<script type="text/javascript">
				// Pinterest shared resources
				var s = document.createElement("script");
				s.type = "text/javascript";
				s.async = true;
				s.setAttribute('data-pin-hover', true);				s.src = window.location.protocol + "//assets.pinterest.com/js/pinit.js";
				var x = document.getElementsByTagName("script")[0];
				x.parentNode.insertBefore(s, x);
				// if 'Pin it' button has 'counts' make container wider
				jQuery(window).load( function(){ jQuery( 'li.share-pinterest a span:visible' ).closest( '.share-pinterest' ).width( '80px' ); } );
			</script>
		<script type="text/javascript" src="https://platform.tumblr.com/v1/share.js"></script>		<script>
		// Don't use Pocket's default JS as it we need to force init new Pocket share buttons loaded via JS.
		function jetpack_sharing_pocket_init() {
			jQuery.getScript( 'https://widgets.getpocket.com/v1/j/btn.js?v=1' );
		}
		jQuery( document ).ready( jetpack_sharing_pocket_init );
		jQuery( document.body ).on( 'post-load', jetpack_sharing_pocket_init );
		</script>
		<script type='text/javascript'>
/* <![CDATA[ */
var wpcf7 = {"apiSettings":{"root":"http:\/\/sametmax.com\/wp-json\/contact-form-7\/v1","namespace":"contact-form-7\/v1"},"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}}};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/contact-form-7/includes/js/scripts.js%3Fver=5.0.2'></script>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201936'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var pollsL10n = {"ajax_url":"http:\/\/sametmax.com\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/wp-polls/polls-js.js%3Fver=2.73.8'></script>
<script type='text/javascript' src='../wp-content/plugins/wp-syntax/js/wp-syntax.js%3Fver=1.1'></script>
<script type='text/javascript' src='https://secure.gravatar.com/js/gprofiles.js?ver=2019Sepaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/modules/wpgroho.js%3Fver=4.9.7'></script>
<script type='text/javascript' src='../wp-includes/js/comment-reply.min.js%3Fver=4.9.7'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/ui/core.min.js%3Fver=1.11.4'></script>
<script type='text/javascript' src='../wp-content/themes/customizr/inc/assets/js/modernizr.min.js%3Fver=3.2.10'></script>
<script type='text/javascript' src='../wp-content/themes/customizr/inc/assets/js/retina.min.js%3Fver=3.2.10'></script>
<script type='text/javascript' src='../wp-includes/js/wp-embed.min.js%3Fver=4.9.7'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/_inc/build/sharedaddy/sharing.min.js%3Fver=6.3.2'></script>
<script type='text/javascript'>
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
</script>
<script type='text/javascript' src='https://stats.wp.com/e-201936.js' async='async' defer='defer'></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:6.3.2',blog:'32490438',post:'5824',tz:'0',srv:'sametmax.com'} ]);
	_stq.push([ 'clickTrackerInit', '32490438', '5824' ]);
</script>
<div class="tc-btt-wrapper"><i class="btt-arrow" style="color:#394143"></i></div>	</body>
	</html>