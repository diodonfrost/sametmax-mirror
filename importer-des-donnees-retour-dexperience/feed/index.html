<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" 
	>
<channel>
	<title>Comments on: Importer des données, retour d&#8217;expérience</title>
	<atom:link href="http://sametmax.com/importer-des-donnees-retour-dexperience/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com/importer-des-donnees-retour-dexperience/</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Fri, 06 Sep 2019 09:34:15 +0000</lastBuildDate>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.9.7</generator>
	<item>
		<title>By: Sam</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-179029</link>
		<dc:creator><![CDATA[Sam]]></dc:creator>
		<pubDate>Thu, 23 Jun 2016 12:38:51 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-179029</guid>
		<description><![CDATA[&lt;p&gt;Faut justifier quand on fait ce genre d&#039;affirmation..&lt;/p&gt;
]]></description>
		<content:encoded><![CDATA[<p>Faut justifier quand on fait ce genre d&#8217;affirmation..</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Yan</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-179002</link>
		<dc:creator><![CDATA[Yan]]></dc:creator>
		<pubDate>Wed, 22 Jun 2016 16:02:41 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-179002</guid>
		<description><![CDATA[Bon j&#039;arrive un peu tard mais pour moi l&#039;insert doit se faire depuis la DB via un appel de SP par exemple, sinon pour le reste on est tous confronté aux mêmes problèmes, dire que mon boss pense que je m&#039;amuse...
]]></description>
		<content:encoded><![CDATA[<p>Bon j&#8217;arrive un peu tard mais pour moi l&#8217;insert doit se faire depuis la DB via un appel de SP par exemple, sinon pour le reste on est tous confronté aux mêmes problèmes, dire que mon boss pense que je m&#8217;amuse&#8230;</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Sam</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-18830</link>
		<dc:creator><![CDATA[Sam]]></dc:creator>
		<pubDate>Wed, 22 Jan 2014 18:57:55 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-18830</guid>
		<description><![CDATA[Idée noire de franquin ?]]></description>
		<content:encoded><![CDATA[<p>Idée noire de franquin ?</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Réchèr</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-18819</link>
		<dc:creator><![CDATA[Réchèr]]></dc:creator>
		<pubDate>Wed, 22 Jan 2014 12:07:05 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-18819</guid>
		<description><![CDATA[Si un jour vous faites un article sur l&#039;idem&lt;strong&gt;potence&lt;/strong&gt;, voici une image sympa qui pourrait illustrer le propos. (surtout la dernière case).

&lt;a href=&quot;http://3.bp.blogspot.com/-BRTDh6M-WxM/URzAwbrIh0I/AAAAAAAACIA/91HsYg-04S0/s1600/franquin-idees-noires.guillotine.jpg&quot; rel=&quot;nofollow&quot;&gt;http://3.bp.blogspot.com/-BRTDh6M-WxM/URzAwbrIh0I/AAAAAAAACIA/91HsYg-04S0/s1600/franquin-idees-noires.guillotine.jpg&lt;/a&gt;]]></description>
		<content:encoded><![CDATA[<p>Si un jour vous faites un article sur l&#8217;idem<strong>potence</strong>, voici une image sympa qui pourrait illustrer le propos. (surtout la dernière case).</p>
<p><a href="http://3.bp.blogspot.com/-BRTDh6M-WxM/URzAwbrIh0I/AAAAAAAACIA/91HsYg-04S0/s1600/franquin-idees-noires.guillotine.jpg" rel="nofollow">http://3.bp.blogspot.com/-BRTDh6M-WxM/URzAwbrIh0I/AAAAAAAACIA/91HsYg-04S0/s1600/franquin-idees-noires.guillotine.jpg</a></p>
]]></content:encoded>
	</item>
	<item>
		<title>By: mentat</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-18656</link>
		<dc:creator><![CDATA[mentat]]></dc:creator>
		<pubDate>Sat, 18 Jan 2014 11:19:22 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-18656</guid>
		<description><![CDATA[D&#039;accord avec TOUS les points cités.
J&#039;ajouterais que j&#039;utilise des générateurs que j&#039;enchaine :
on lit une ligne &#124; on traite/nettoie les données &#124; on l&#039;insère

Comme un pipe sous un shell unix
On décompose bien les traitements comme cela. Les tests peuvent être enchainés et ajouter/enlever très facilement.

Et les performances sont top]]></description>
		<content:encoded><![CDATA[<p>D&#8217;accord avec TOUS les points cités.<br />
J&#8217;ajouterais que j&#8217;utilise des générateurs que j&#8217;enchaine :<br />
on lit une ligne | on traite/nettoie les données | on l&#8217;insère</p>
<p>Comme un pipe sous un shell unix<br />
On décompose bien les traitements comme cela. Les tests peuvent être enchainés et ajouter/enlever très facilement.</p>
<p>Et les performances sont top</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Sam</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-18643</link>
		<dc:creator><![CDATA[Sam]]></dc:creator>
		<pubDate>Fri, 17 Jan 2014 14:39:07 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-18643</guid>
		<description><![CDATA[C&#039;est vrai, mais il faut faire attention à ce que le code d&#039;import ne soit pas exécuté dans la même VM qu&#039;un autre projet, sinon les exceptions seront toutes logguées. Un tips très utile cela dit.]]></description>
		<content:encoded><![CDATA[<p>C&#8217;est vrai, mais il faut faire attention à ce que le code d&#8217;import ne soit pas exécuté dans la même VM qu&#8217;un autre projet, sinon les exceptions seront toutes logguées. Un tips très utile cela dit.</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Maxime L.</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-18641</link>
		<dc:creator><![CDATA[Maxime L.]]></dc:creator>
		<pubDate>Fri, 17 Jan 2014 14:11:30 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-18641</guid>
		<description><![CDATA[Si je peux apporter ma pierre à l&#039;édifice... En référence à ce paragraphe : 
&lt;blockquote&gt;Mettez aussi un gros try / except générique qui loggue toute exception, pour pouvoir faire un debug post mortem. Idéalement, faites le dumper locals() et envoyez-vous un mail d’alerte. Vous ne voulez pas que le script ne tourne pas pendant une journée sans que vous le sachiez.&lt;/blockquote&gt;

Pour la gestion des exceptions, je changerai carrément le hook de base de Python.  

&lt;pre lang=&quot;python&quot;&gt;
import sys

def myexcepthook(type, value, tb):
    import traceback
    from email.mime.text import MIMEText
    from subprocess import Popen, PIPE
    tbtext = &#039;&#039;.join(traceback.format_exception(type, value, tb))
    msg = MIMEText(&quot;There was a problem with your program:\n\n&quot; + tbtext)
    msg[&quot;From&quot;] = &quot;root+importer@domain.com&quot;
    msg[&quot;To&quot;] = &quot;admin@domain.com&quot;
    msg[&quot;Subject&quot;] = &quot;[Sam&#038;Max Importer] Crash report (Exception raised)&quot;
    p = Popen([&quot;/usr/sbin/sendmail&quot;, &quot;-t&quot;], stdin=PIPE)
    p.communicate(msg.as_string())


    reload()  # relaunch the importer if possible

sys.excepthook = myexcepthook
&lt;/pre&gt;

Ainsi, un mail est envoyé dès qu&#039;une exception n&#039;est pas géré dans le code (donc ça équivaut à un gros try/except), il exécute cette fonction. C&#039;est plus propre et plus maintenable à mon goût :-)

&lt;a href=&quot;http://stackoverflow.com/a/20829384/1433392&quot; rel=&quot;nofollow&quot;&gt;Référence StackOverflow de la réponse qui m&#039;a inspiré&lt;/a&gt;]]></description>
		<content:encoded><![CDATA[<p>Si je peux apporter ma pierre à l&#8217;édifice&#8230; En référence à ce paragraphe : </p>
<blockquote><p>Mettez aussi un gros try / except générique qui loggue toute exception, pour pouvoir faire un debug post mortem. Idéalement, faites le dumper locals() et envoyez-vous un mail d’alerte. Vous ne voulez pas que le script ne tourne pas pendant une journée sans que vous le sachiez.</p></blockquote>
<p>Pour la gestion des exceptions, je changerai carrément le hook de base de Python.  </p>
<pre lang="python">
import sys

def myexcepthook(type, value, tb):
    import traceback
    from email.mime.text import MIMEText
    from subprocess import Popen, PIPE
    tbtext = ''.join(traceback.format_exception(type, value, tb))
    msg = MIMEText("There was a problem with your program:\n\n" + tbtext)
    msg["From"] = "root+importer@domain.com"
    msg["To"] = "admin@domain.com"
    msg["Subject"] = "[Sam&amp;Max Importer] Crash report (Exception raised)"
    p = Popen(["/usr/sbin/sendmail", "-t"], stdin=PIPE)
    p.communicate(msg.as_string())


    reload()  # relaunch the importer if possible

sys.excepthook = myexcepthook
</pre>
<p>Ainsi, un mail est envoyé dès qu&#8217;une exception n&#8217;est pas géré dans le code (donc ça équivaut à un gros try/except), il exécute cette fonction. C&#8217;est plus propre et plus maintenable à mon goût :-)</p>
<p><a href="http://stackoverflow.com/a/20829384/1433392" rel="nofollow">Référence StackOverflow de la réponse qui m&#8217;a inspiré</a></p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Recher</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-18638</link>
		<dc:creator><![CDATA[Recher]]></dc:creator>
		<pubDate>Fri, 17 Jan 2014 10:53:59 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-18638</guid>
		<description><![CDATA[Pour les références externes, on a parfois besoin de faire une &quot;memoization&quot; / &quot;lazy evaluation&quot; (je ne sais pas quel serait le terme exact).

Exemple : on doit lire plusieurs milliards de ligne de données, dont l&#039;un des champs est une valeur numérique : &quot;id_position_sexuelle&quot; (plusieurs lignes peuvent avoir la même valeur). Pour connaître le nom de la position correspondante, on doit interroger un serveur externe. Mais ce serveur est vilain, il ne donne qu&#039;un seul nom à la fois, à partir de l&#039;id qu&#039;on lui envoie, et il ne peut pas donner le nombre total de position existante. On ne peut donc pas pré-récupérer tout les noms de positions pour les mettre en cache.

Dans ce cas, à chaque fois qu&#039;on trouve un id inconnu dans les données à lire, on interroge le serveur externe, et on enregistre le nom dans un fichier en local. Plus tard, si on retombe sur le même id, pas besoin de réinterroger le serveur.]]></description>
		<content:encoded><![CDATA[<p>Pour les références externes, on a parfois besoin de faire une &#8220;memoization&#8221; / &#8220;lazy evaluation&#8221; (je ne sais pas quel serait le terme exact).</p>
<p>Exemple : on doit lire plusieurs milliards de ligne de données, dont l&#8217;un des champs est une valeur numérique : &#8220;id_position_sexuelle&#8221; (plusieurs lignes peuvent avoir la même valeur). Pour connaître le nom de la position correspondante, on doit interroger un serveur externe. Mais ce serveur est vilain, il ne donne qu&#8217;un seul nom à la fois, à partir de l&#8217;id qu&#8217;on lui envoie, et il ne peut pas donner le nombre total de position existante. On ne peut donc pas pré-récupérer tout les noms de positions pour les mettre en cache.</p>
<p>Dans ce cas, à chaque fois qu&#8217;on trouve un id inconnu dans les données à lire, on interroge le serveur externe, et on enregistre le nom dans un fichier en local. Plus tard, si on retombe sur le même id, pas besoin de réinterroger le serveur.</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Luigi</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-18637</link>
		<dc:creator><![CDATA[Luigi]]></dc:creator>
		<pubDate>Fri, 17 Jan 2014 07:14:11 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-18637</guid>
		<description><![CDATA[Très pertinent, comme d&#039;habitude.]]></description>
		<content:encoded><![CDATA[<p>Très pertinent, comme d&#8217;habitude.</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Stéphane</title>
		<link>http://sametmax.com/importer-des-donnees-retour-dexperience/#comment-18634</link>
		<dc:creator><![CDATA[Stéphane]]></dc:creator>
		<pubDate>Thu, 16 Jan 2014 23:44:13 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=8772#comment-18634</guid>
		<description><![CDATA[&lt;span class=&quot;merci&quot;&gt;&lt;/span&gt;Les remarques de maître Capello :

Ellispis -&#062; Ellipsis

dans la mauvais langue -&#062; dans la mauvaise langue

si on peut processer la donnée -&#062; si on peut traiter la donnée (?)

LEUR système n’escape pas -&#062; LEUR système ne protège pas

une query de plus -&#062; une requête supplémentaire

ajoutez les indexes -&#062; ajoutez les index]]></description>
		<content:encoded><![CDATA[<p><span class="merci"></span>Les remarques de maître Capello :</p>
<p>Ellispis -&gt; Ellipsis</p>
<p>dans la mauvais langue -&gt; dans la mauvaise langue</p>
<p>si on peut processer la donnée -&gt; si on peut traiter la donnée (?)</p>
<p>LEUR système n’escape pas -&gt; LEUR système ne protège pas</p>
<p>une query de plus -&gt; une requête supplémentaire</p>
<p>ajoutez les indexes -&gt; ajoutez les index</p>
]]></content:encoded>
	</item>
</channel>
</rss>
