<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" >

<channel>
	<title>Administration System &#8211; Sam &amp; Max</title>
	<atom:link href="http://sametmax.com/category/administration-system/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Thu, 05 Sep 2019 08:22:03 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.9.7</generator>
<site xmlns="com-wordpress:feed-additions:1">32490438</site>	<item>
		<title>Sam ne répondra plus</title>
		<link>http://sametmax.com/sam-ne-repondra-plus/</link>
		<comments>http://sametmax.com/sam-ne-repondra-plus/#comments</comments>
		<pubDate>Tue, 04 Sep 2018 01:18:35 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[meta]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=24942</guid>
		<description><![CDATA[Gérer toute cette communauté, ça a un coût]]></description>
				<content:encoded><![CDATA[<p>Si vous nous avez écrit un email, vous savez qu&#8217;on a tendance a être lents pour répondre. En fait, parfois plus d&#8217;un an :)</p>
<p>Mais que ce soit sur <a href="https://twitter.com/sam_et_max">twitter</a>, <a href="https://www.reddit.com/r/sametmax/">reddit</a>, <a href="http://indexerror.net/">indexerror</a>, <a href="https://framapiaf.org/web/accounts/28154">mastodon</a>, les commentaires du blog ou par email, on finit par répondre à tout le monde. Les ratés existent, mais ils sont rares. La seule catastrophe étant notre bug tracker, parce que j&#8217;en fais suffisamment au boulot pour ne pas avoir le courage de le faire sur mon temps libre.</p>
<p>Gérer toute cette communauté, ça a un coût. J&#8217;y ai joyeusement participé pendant toutes ces années, parce que j&#8217;aime profondément aider les gens.</p>
<p>Notez que je ne me prends pas pour mère Thérésa, à moins qu&#8217;elle ai déjà fait du SM et vendu du viagra illégalement. Mais donner un coup de main a toujours été quelque chose d&#8217;important pour moi.</p>
<p>C&#8217;est la raison pour laquelle j&#8217;aime donner des formations. Parfois gratuitement. Parfois dans le cadre associatif.</p>
<p>C&#8217;est la raison pour laquelle je me déplace à des confs bien loin pour donner des talks même si personne ne sait que c&#8217;est moi. Parfois je discute avec un groupe de gens enthousiastes de ce super site NSFW. C&#8217;est vrai qu&#8217;il est bien. Vous l&#8217;avez connu comment ?</p>
<p>C&#8217;est la raison de la qualité des articles du blog également. Je passe un temps déraisonnable à me demander comment je vais pouvoir aider au mieux le lecteur avec une explication. Il m&#8217;est arrivé plusieurs fois de passer une journée entière sur un seul article compliqué, aux dépens d&#8217;un client que j&#8217;aurais pu facturer. Si on devait chiffrer le coût de ce site, je pense que ça me paierait un joli tour du monde.</p>
<p>Alors oui, ça a un prix, et je l&#8217;ai payé avec plaisir. Mes amis, qui m&#8217;ont entendu cracher sur les réseaux sociaux, ont même été étonnés de voir mon investissement sur Hacker news ou Twitter, au fil des années.</p>
<p>En cette fin 2018, je vais changer mon implication. J&#8217;ai envie de récupérer du temps libre, diminuer la tentation des interruptions et renforcer ma capacité d&#8217;attention, ce qui veut dire trancher dans le gras des distractions. Moins de surf sans but, moins de streaming, et moins de présence en ligne.</p>
<p>J&#8217;ai pensé à arrêter complètement le blog, mais soyons honnête, je n&#8217;écris plus au dixième du rythme de ses débuts, donc ça ne me prend pas si longtemps. Et un article de  temps en temps, c&#8217;est thérapeutique. Je pense que j&#8217;ai besoin de mon troll JavaScript annuel pour des raisons de santé.</p>
<p>Ce qui me prend du temps par contre, c&#8217;est tout ce qui est autour des articles.</p>
<p>Donc, à partir de cette semaine, je vais arrêter de répondre sur Twitter, le subreddit (qui n&#8217;a de toute façon jamais pris) et indexerror. Twitter en particulier sera donc de nouveau en sens unique, comme à nos touts débuts: je poste, et je ne réponds pas.</p>
<p>Pour les commentaires du blog, j&#8217;ai fermé la création de compte, et j&#8217;ai autorisé les commentaires uniquement à ceux qui avaient déjà un compte. Je ne répondrai pas pour autant, et je sais que la communauté existante ne foutra pas le bordel, tout en leur permettant de glisser les corrections des mes coquilles débiles.</p>
<p>Pour mastodon, je vais fermer le compte complètement. Enfin le passer en privé et l&#8217;oublier car framapiaf ne permet pas la supression. L&#8217;expérience est réussie, je pense que c&#8217;est une bonne plateforme, mais le ratio taff/retour est trop bas pour mes nouveaux objectifs.</p>
<p>Quant aux mails, pour le moment je garde le canal ouvert. Ce qui devrait me permettre du coup de répondre beaucoup, beaucoup plus rapidement.</p>
<p>Je vous aime quand même, hein.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/sam-ne-repondra-plus/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">24942</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2018/09/XEr35eD.gif" length="262627" type="image/jpg" />	</item>
		<item>
		<title>Do you rotate ?</title>
		<link>http://sametmax.com/do-you-rotate/</link>
		<comments>http://sametmax.com/do-you-rotate/#comments</comments>
		<pubDate>Mon, 05 Mar 2018 03:29:27 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[Programmation]]></category>
		<category><![CDATA[log]]></category>
		<category><![CDATA[rotation]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=24161</guid>
		<description><![CDATA[L'explosion de la taille des logs a tué plus d'un serveur. Il est amusant de se dire que c'est du texte qui peut mettre à genoux un serveur de streaming vidéo avec 32 coeurs, 2To de SSD et 64 Go de RAM. Mais un bon access log non contrôlé sous nginx ou même <a href="https://forum.smartcash.cc/t/smartnode-new-start-required-and-other-issues/3105">le log de debug</a> du wallet de la coin smartcash, ça peut prendre par surprise.]]></description>
				<content:encoded><![CDATA[<p>L&#8217;explosion de la taille des logs a tué plus d&#8217;un serveur. Il est amusant de se dire que c&#8217;est du texte qui peut mettre à genoux un serveur de streaming vidéo avec 32 coeurs, 2To de SSD et 64 Go de RAM. Mais un bon access log non contrôlé sous nginx ou même <a href="https://forum.smartcash.cc/t/smartnode-new-start-required-and-other-issues/3105">le log de debug</a> du wallet de la coin smartcash, ça peut prendre par surprise.</p>
<p>Le module <a href="http://sametmax.com/ecrire-des-logs-en-python/">logging</a> de Python a d&#8217;excellentes options pour gérer la taille des logs, notamment le <code>RotatingFileHandler</code>.</p>
<p>Sous Linux, c&#8217;est logrotate qui fait le boulot pour le système. C&#8217;est performant, ça marche super bien, c&#8217;est hyper simple à utiliser, et c&#8217;est dispo partout.</p>
<p>Bref, en prod, un petit vi sur <code>/etc/logrotate.d/ton_projet</code> et pouf, on peut demander une rotation en 10 lignes:</p>
<pre>/var/www/ton_projet/*.log
{
    size 100K
    daily
    rotate 5
    missingok
    notifempty
}</pre>
<p>Y a rien à activer, un cron lance déjà logrotate tous les jours.</p>
<p>Par contre, si votre process utilise systemd pour démarrer, inutile de logger manuellement. Tout ce qui est sur la sortie standard est automatiquement loggué avec rotation et accessible avec un petit <code>journalctl -u ton_process.service --since today</code>.</p>
<p>Bref, attendez encore un peu avant de rajouter logstash à votre stack.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/do-you-rotate/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">24161</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2018/03/GIFMaker.org_ONuVbD.gif" length="348096" type="image/jpg" />	</item>
		<item>
		<title>NiceHash &#8211; Pump up your power, à quoi ça sert et comment ça marche ?</title>
		<link>http://sametmax.com/nicehash-pump-up-your-power-a-quoi-ca-sert-et-comment-ca-marche/</link>
		<comments>http://sametmax.com/nicehash-pump-up-your-power-a-quoi-ca-sert-et-comment-ca-marche/#comments</comments>
		<pubDate>Tue, 14 Nov 2017 11:05:59 +0000</pubDate>
		<dc:creator><![CDATA[Max]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[Crypto]]></category>
		<category><![CDATA[crypto]]></category>
		<category><![CDATA[mining]]></category>
		<category><![CDATA[nicehash]]></category>
		<category><![CDATA[pool]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=23832</guid>
		<description><![CDATA[Alors c’est quoi ce « gentil hachis » dont vous parlez sur Telegram, c’est un truc de cuisine ? « Nicehash » c’est un service de location de puissance de « hash », en gros avoir le plaisir de posséder l’équivalent de 25000 cartes graphiques pendant un moment pour miner de la cryptomonnaie. C’est un peu la Smartbox (vous savez celle où [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Alors c’est quoi ce « gentil hachis » dont vous parlez sur Telegram, c’est un truc de cuisine ?</p>
<p>« Nicehash » c’est un service de location de puissance de « hash », en gros avoir le plaisir de posséder l’équivalent de 25000 cartes graphiques pendant un moment pour miner de la cryptomonnaie.<br />
C’est un peu la Smartbox (vous savez celle où on peut faire 200 bornes pour conduire un R8 pendant ¼ d’heure) de la crypto, mais sans sortir de chez soi, moins de plaisir, mais plus de rendement.</p>
<p>D’un côté Nicehash propose aux mineurs (ceux qui ont des machines qui chauffent leur maison toute la journée) de mettre ces machines en location, et d’un autre on peut participier à des enchères pour louer la puissance (additionnée) de plein de mineurs d’un coup pour devenir un moment un gros mineur bien velu.<br />
On voit bien sur ce graphe ce que ça donne là quand un gars s’est un peu énervé pendant ½ heure</p>
<p><img class="aligncenter size-full wp-image-23834" src="http://sametmax.com/wp-content/uploads/2017/11/photo_2017-11-14_10-47-47.jpg" alt="un ptit coup de nicehash ?" width="1128" height="422" /><br />
Sur le <a href="https://t.me/goldenshowio">chan de Goldenshow</a>er.io on a l’histoire d’un gars qui a réussi à lancer ¼ d’heure de nNicehash au tout départ du BitcoinGold et en a ramassé une bonne grosse poignée à ce moment là, mais sinon de notre expérience avec le service, il est possible de faire un 10-25% de bénéfice (on achète du hashpower en BTC, on mine une monnaie, qu’on revend ensuite, et ça fait 10-25% de BTC en plus pour recommencer ).</p>
<h4>
Allons-y &#8220;gayment&#8221;! Rendez-vous sur <a href="https://www.nicehash.com/register">https://www.nicehash.com/ </a></h4>
<p>&nbsp;</p>
<p>On créer un compte, on valide tout ça et on passe aux choses sérieuses. Le tuto suivant décrit la méthode pour lancer un NiceHash sur la crypto Bitcoin Gold, qui est basé sur l&#8217;algo Equihash, pour d&#8217;autres cryptos il faudra choisir l&#8217;algo approprié mais pour le reste il n&#8217;y a rien à changer.</p>
<p>&nbsp;</p>
<ol>
<li>On va dans le marketplace (place de marché)<br />
<img class="aligncenter size-full wp-image-23835" src="http://sametmax.com/wp-content/uploads/2017/11/1_Goto_marketplace.png" alt="On sélectionne  market place" width="1052" height="532" /></li>
<li>On sélectionne l&#8217;algo approprié à la crypto que l&#8217;on va miner, ici pour BTG (Bitcoin Gold) on sélectionne Equihash.<br />
<img class="aligncenter size-full wp-image-23836" src="http://sametmax.com/wp-content/uploads/2017/11/2_SelectAlgo.png" alt="Equihash est l'algo que l'on va utiliser pour miner du BTG (Bitcoin Gold)" width="1376" height="879" /></li>
<li>La partie la plus importante, Il va falloir envoyer notre puissance de calcul louée sur un pool, ici sur goldenshower.io. Pourquoi celui-là et pas un autre ?<br />
Parce que c&#8217;est celui de Sam&amp;Max (et des potes) , qu&#8217;on est les plus beaux et qu&#8217;on a besoin de tunes pour aller aux putes régulièrement et vous mijoter de jolis articles tous mignons.<br />
<img class="aligncenter size-full wp-image-23837" src="http://sametmax.com/wp-content/uploads/2017/11/3_SetupPool.png" alt="PArtie la plus important, setup du pool " width="589" height="622" /><strong>Pool Name:</strong> Golden Show (le nom de votre pool, mettez ce que vous voulez, c&#8217;est pour le reconnaître par la suite dans la liste.)<br />
<strong>Stratum hostname ou IP:</strong> btg.goldenshow.io<br />
<strong>port:</strong> 3870<br />
<strong>User:</strong> là il faut mettre votre addresse de Wallet BTG que vous <a href="http://sametmax.com/tutorial-pour-miner-du-bitcoin-gold-btg/">aurez créé en suivant notre tuto précédent ici</p>
<p></a></li>
<li>On place son Order (et oui comme à la bourse) qui va consister à acheter de la puissance de Hash à un prix fixé par vous.<br />
<span style="color: #ff0000;">ATTENTION!</span> Avant de placer un order il faut créditer son compte Nicehash avec des BTC (Bitcoins), car tout se paie en BTC.<br />
Sur la figure suivante j&#8217;ai placé un order à 0.01258 BTC.</p>
<p><strong>PRICE: </strong>par défaut un prix est suggéré , il faut regarder dans la liste des ordres à côté que vous êtes dans les bonnes valeurs, un prix trop bas et votre ordre ne passera jamais.<br />
<strong>LIMIT: </strong>sert à limiter la puissance de calcul envoyée dans le temps, pour les premiers essais il vaut mieux mettre une faible valeur (attention si vous mettez 0 nicehash va envoyer toute la puissance d&#8217;un coup) en cas de mauvaise configuration du pool, ça serait con d&#8217;envoyer toute la puissance sur un truc qui mine pas :)<br />
<strong>AMOUNT: </strong>le budget que vous voulez allouer, là aussi au départ une petite somme pour tester l&#8217;artillerie, une fois que vous êtes sûr que ça marche, vous pouvez placez un ordre plus important.</p>
<p><img class="aligncenter size-full wp-image-23838" src="http://sametmax.com/wp-content/uploads/2017/11/4_SetupOrder.png" alt="on achète des gigoWatts Doc !!" width="603" height="401" /></li>
<li>Et C&#8217;est tout ! La puissance de calcul louée sur Nicehash va être transmise au pool goldenshow.io et c&#8217;est comme si vous aviez une ferme de GPU qui mine. Elle est pas belle la vie ?<br />
<img class="aligncenter size-full wp-image-23840" src="http://sametmax.com/wp-content/uploads/2017/11/6_MiningStart.png" alt="6_MiningStart" width="1257" height="809" /></li>
</ol>
<p style="text-align: left;">Si vous voulez racheter de la puissance de calcul vous éditez votre order dans la liste et vous changez les valeurs appropriées.<br />
<img class="aligncenter size-full wp-image-23842" src="http://sametmax.com/wp-content/uploads/2017/11/8_If_Need_Change_Price_or_refill.png" alt="8_If_Need_Change_Price_or_refill" width="708" height="464" /><br />
Vous l&#8217;aurez compris, Nicehash permet d&#8217;avoir l&#8217;équivalent d&#8217;une immense ferme de GPUs sans les inconvenients. Pratique pour miner à la sortie d&#8217;une crypto sans avoir à setup grand chose et pour se rendre compte immédiatement de la rentabilité de minage de la monnaie concernée.<br />
A savoir qu&#8217;en général quand une monnaie sort la difficulté est faible donc ça vaut le coup de se lancer dessus et le Nicehash est la solution la plus rapide.</p>
<p>Rendez-vous sur <a title="Mining Pool" href="http://goldenshow.io">goldenshow.io</a>, votre pool préféré pour miner (pas exclu qu&#8217;on rajoute d&#8217;autres cryptos soon ^^ )</p>
<p><strong>Les précédents Tutos:</strong></p>
<p><a href="http://sametmax.com/de-la-thune-avec-un-mining-pool-de-btg/"><strong>http://sametmax.com/de-la-thune-avec-un-mining-pool-de-btg/</strong></a></p>
<p><a title="miner du BTG" href="http://sametmax.com/tutorial-pour-miner-du-bitcoin-gold-btg/"><strong>http://sametmax.com/tutorial-pour-miner-du-bitcoin-gold-btg/</strong></a></p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/nicehash-pump-up-your-power-a-quoi-ca-sert-et-comment-ca-marche/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">23832</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2017/11/boooobs.png" length="619791" type="image/jpg" />	</item>
		<item>
		<title>Protégé jusqu&#8217;à la mort</title>
		<link>http://sametmax.com/protege-jusqua-la-mort/</link>
		<comments>http://sametmax.com/protege-jusqua-la-mort/#comments</comments>
		<pubDate>Thu, 02 Nov 2017 06:28:35 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[Programmation]]></category>
		<category><![CDATA[antivirus]]></category>
		<category><![CDATA[flask]]></category>
		<category><![CDATA[libre office]]></category>
		<category><![CDATA[open office]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=23755</guid>
		<description><![CDATA[Un moment merveilleux de communion avec tous les dev du monde qui ont connu cette expérience spirituelle de destruction de moral et de crédibilité.]]></description>
				<content:encoded><![CDATA[<p>Ce matin là, comme dans toutes les démos importantes avec un client, rien ne marchait. D&#8217;abord la multiprise, puis la prise Ethernet physique, puis la connexion elle-même. Pour faire bonne mesure, j&#8217;avais moi aussi un bug dans le code que je n&#8217;ai pu résoudre qu&#8217;en changeant de bâtiment (ne cherchez pas&#8230;).</p>
<p>Un moment merveilleux de communion avec tous les dev du monde qui ont connu cette expérience spirituelle de destruction de moral et de crédibilité.</p>
<p>Après quelques blagues et une utilisation de la partie du service qui marchait qui m&#8217;ont permis de garder la face, un nouveau problème fit son apparition.</p>
<p>Un fichier .odt que je générais était corrompu au téléchargement.</p>
<div id="attachment_23763" style="width: 410px" class="wp-caption aligncenter"><a href="http://sametmax.com/wp-content/uploads/2017/11/8lrOhH0.jpg" class="grouped_elements" rel="tc-fancybox-group23755"><img src="http://sametmax.com/wp-content/uploads/2017/11/8lrOhH0.jpg" alt="God left" width="400" height="289" class="size-full wp-image-23763" /></a><p class="wp-caption-text">And he&#8217;s right</p></div>
<p>Pourtant, ça marchait, j&#8217;en étais certain.</p>
<p>Aucune erreur. Rien. Tout était nickel de bout en bout. Sur ma machine, tout va bien. Sur les leurs, plantage direct de Libre Office.</p>
<p>Je change de navigateur sur mon laptop ou leurs tours. Queud.</p>
<p>Je change d&#8217;OS. La même.</p>
<p>Avec CURL ? Zob.</p>
<p>Et puis je note un truc étrange : la taille du fichier n&#8217;est pas la même sur leur machine. Elle change à chaque putain de téléchargement.</p>
<p>Je reste un instant interloqué. Et par &#8220;un instant interloqué&#8221; j&#8217;entends 2h surcaféine à trafiquer sur 3 machines différentes toutes les hypothèses tordues possibles, frénétiquement, et la bave aux lèvres.</p>
<p>Quand soudain l&#8217;idée me vint. La grâce divine.</p>
<div id="attachment_23759" style="width: 323px" class="wp-caption aligncenter"><a href="http://sametmax.com/wp-content/uploads/2017/11/nrEWONk.jpg" class="grouped_elements" rel="tc-fancybox-group23755"><img src="http://sametmax.com/wp-content/uploads/2017/11/nrEWONk.jpg" alt="Jesus saves" width="313" height="700" class="size-full wp-image-23759" /></a><p class="wp-caption-text">Jesus saves. For later.</p></div>
<p>Je désactive leur antivirus.</p>
<p>Miracle, ça marche.</p>
<p>Karspersky protégeait leurs machines jusqu&#8217;à la mort.</p>
<p>Je ne sais pas ce qui se passait dans sa petite tête, mais il lobotomisait de quelques Ko tous les documents, en mode frappe préventive américaine.  Peu importe, leur admin n&#8217;aurait de toute façon pas été capable de corriger le problème.</p>
<p>La solution est de se passer des forces de l&#8217;ordre et faire justice soit même : tout foutre en SSL pour que le petit salopiot arrête de mettre son nez dans mes paquets. Ils sont sur un intranet. Avec un VPN. Mais fuck, ils seront bien protégés.</p>
<div id="attachment_23761" style="width: 185px" class="wp-caption aligncenter"><a href="http://sametmax.com/wp-content/uploads/2017/11/z2F2qZx.png" class="grouped_elements" rel="tc-fancybox-group23755"><img src="http://sametmax.com/wp-content/uploads/2017/11/z2F2qZx.png" alt="Something queer this way come" width="175" height="291" class="size-full wp-image-23761" /></a><p class="wp-caption-text">Also, openssl -days 10000000</p></div>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/protege-jusqua-la-mort/feed/</wfw:commentRss>
		<slash:comments>15</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">23755</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2017/11/tumblr_oyddkieyrx1r539hzo1_500.jpg" length="55709" type="image/jpg" />	</item>
		<item>
		<title>Regrouper ses fichiers de settings avec stow</title>
		<link>http://sametmax.com/regrouper-ses-fichiers-de-settings-avec-stow/</link>
		<comments>http://sametmax.com/regrouper-ses-fichiers-de-settings-avec-stow/#comments</comments>
		<pubDate>Fri, 06 Oct 2017 08:24:03 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[configuration]]></category>
		<category><![CDATA[settings]]></category>
		<category><![CDATA[stow]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=23681</guid>
		<description><![CDATA[Sous Linux, le dossier utilisateur est blindé de fichiers de configuration. Les fameux <code>.machins</code>. Par exemple le <code>.bashrc</code> pour la config du bash, le <code>.mozilla</code> qui contient toutes vos données Firefox, le <code>.ssh</code> avec toutes vos clés privées, le <code>.local/share/virtualenvs</code> avec les envs virtuels Python créés par pew ou <code>.config/sublime-text-3</code> pour la configuration de Sublime text, etc.]]></description>
				<content:encoded><![CDATA[<p>Sous Linux, le dossier utilisateur est blindé de fichiers de configuration. Les fameux <code>.machins</code>. Par exemple le <code>.bashrc</code> pour la config du bash, le <code>.mozilla</code> qui contient toutes vos données Firefox, le <code>.ssh</code> avec toutes vos clés privées, le <code>.local/share/virtualenvs</code> avec les envs virtuels Python créés par pew ou <code>.config/sublime-text-3</code> pour la configuration de Sublime text, etc.</p>
<p>Au final, voici tous les fichiers de conf qui sont importants pour moi de près ou de loin:</p>
<pre>
├── .autoenv
├── .bashrc
├── .config
│   ├── autostart
│   ├── Code
│   ├── copyq
│   ├── fish
│   ├── gtg
│   ├── liferea
│   ├── pulse
│   ├── stremio
│   ├── sublime-text-3
│   ├── transmission
│   ├── user-dirs.dirs
│   ├── user-dirs.locale
│   ├── variety
│   ├── VeraCrypt
│   ├── Zeal
│   └── zim
├── .django-completion.bash
├── .editorconfig
├── .git-aware-prompt
├── .git-completion.bash
├── .gitconfig
├── .gitignore
├── .git-prompt.sh
├── .git.scmbrc
├── .jupyter
├── .lastpass
├── .liferea_1.8
├── .local
│   └── share
        ├── gtg
        ├── keyrings
        ├── liferea
        ├── omf
        ├── TowerFall
        ├── virtualenvs
        └── Zeal
├── .mozilla
├── .netrc
├── .oh-my-zsh
├── .openambit
├── .pypirc
├── .scmbrc
├── .scm_breeze
├── .sshplus
├── .vscode
│   └── extensions
└── .zshrc
</pre>
<p>Quand on bidouille, on les change souvent. On les backup aussi, pour pouvoir les porter d&#8217;un laptop à un autre, les synchroniser, les uploader sur un serveur ou les récup lors d&#8217;une réinstallation. Parce que quand on a tuné ses terminaux et éditeurs aux petits oignons, on a pas envie de recommencer à poil.</p>
<p>Pour bien faciliter les choses, ils sont éparpillés un peu partout, dans des sous-dossiers différents. </p>
<p>Et je sais pas quel vil individu a suggéré une fois que faire une partition séparée pour <code>/home</code> était la solution de Skippy à tous les soucis, mais perso, ça me cause plus de bugs qu&#8217;autre chose quand on change de versions d&#8217;OS.</p>
<p>Bref, laissez tomber vos vieilles croyances issues de charlatans de sectes. Moi, j&#8217;ai vu la lumière (lien de don bitcoin en bas à droite de la page), et elle s&#8217;appelle <code>GNU stow</code>.</p>
<p>Stow est un vieil utilitaire (donc sagesse millénaire des anciens, vous pouvez avoir confiance, prenez ce cristal aussi il est en promo), qui est grosso merdo un <code>ln -s</code> récursive. C&#8217;est-à-dire que ça fait des symlinks des fichiers et des dossiers que vous lui passez.</p>
<p>On peut l&#8217;utiliser pour plein de choses, mais l&#8217;usage sacré implique le sacrifice d&#8217;une vierge à Max, puis de déplacer tous les fichiers de settings qu&#8217;on souhaite gérer dans un seul dossier.</p>
<p>Par exemple, moi j&#8217;ai:</p>
<pre>
/home/user/church/settings/

    ├── .autoenv
    ├── .bashrc
    ├── .config
    │   ├── autostart
    │   ├── Code
    │   ├── copyq
    │   ├── fish
    │   ├── gtg
    ...
</pre>
<p>Au lieu de les avoir éparpillées partout, toutes les brebis sont maintenant regroupées dans une seule église. </p>
<p>Il est très important de garder l&#8217;organisation des dossiers et des sous-dossiers d&#8217;origine. Ici vous voyez que j&#8217;ai le dossier <code>Code</code>, qui est le dossier de settings de VSCode. Mais il est DANS un dossier <code>.config</code>, car avant mon regroupement il était dans <code>/home/user/.config/</code>.</p>
<p>En revanche, il n&#8217;est pas du tout nécessaire que <code>.config</code> contienne tous les dossiers qu&#8217;il avait précédemment. Seuls ceux qui vous intéressent. Le reste peut rester à sa place initiale, dans le <code>/home/user/.config/</code>.</p>
<p>Donc je résume:</p>
<ul>
<li>Listez les fichiers et dossiers de settings qui vous intéressent.</li>
<li>Déplacez les tous dans un dossier commun en gardant une arborescence similaire.</li>
<li>Laissez les fichiers qui ne vous intéressent pas là où ils sont.</li>
<li>Priez (une bonne pratique avant toute opération informatique).</li>
</ul>
<p>Arrive le messie, Stow.</p>
<p>D&#8217;abord, il faut l&#8217;installer, mais comme c&#8217;est un outil vénérable, il est dans les dépôts. Sous Ubuntu, le psaume &#8220;apt install stow&#8221; fera l&#8217;affaire.</p>
<p>Ensuite, on prêche. Je me perds dans mes propres paraboles, mais les voies du seigneur sont impénétrables, contrairement à celles d&#8217;Abella Anderson. Bref on demande à <code>stow</code> de traiter récursivement tout le contenu du dossier <code>settings</code> qui est dans <code>/home/user/church</code> afin de le linker vers <code>/home/user/</code>:</p>
<pre lang="bash">stow -d /home/user/church -t /home/user/ settings</pre>
<p>Stow va prendre récursivement tous les dossiers qui sont dans <code>/home/user/church/settings</code>, et les comparer à ceux dans <code>/home/user</code>. Si ils existent, il va ne rien faire, mais si ils n&#8217;existent pas, il va créer un lien vers chacun de ceux manquants. Pour les fichiers, si ils n&#8217;existent pas, il va créer un lien, sinon il va vous afficher une erreur, afin de ne pas écraser quelque chose d&#8217;important et vous signalez qu&#8217;il y un souci.</p>
<p>Le but de tout ça ?</p>
<p>Pour votre système et tous vos logiciels, ça ne change rien. Ils vont tomber sur les liens et avoir l&#8217;impression que tous les fichiers de configs sont à leur place et vont continuer à fonctionner dans la joie et le gospel.</p>
<p>Et pour vous, ben vous avez un seul endroit où tous les fichiers importants sont regroupés. Plus besoin de les chercher. Facile à backuper et à restaurer. On peut même tout foutre sous Git.</p>
<p>Loué soit le sauveur.</p>
<p>Vive moi.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/regrouper-ses-fichiers-de-settings-avec-stow/feed/</wfw:commentRss>
		<slash:comments>15</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">23681</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2017/10/s4UjYDb.jpg" length="232781" type="image/jpg" />	</item>
		<item>
		<title>&#8220;BlockingIOError: [Errno 11] Resource temporarily unavailable&#8221; pour Python 3.6</title>
		<link>http://sametmax.com/blockingioerror-errno-11-resource-temporarily-unavailable-pour-python-3-6/</link>
		<comments>http://sametmax.com/blockingioerror-errno-11-resource-temporarily-unavailable-pour-python-3-6/#comments</comments>
		<pubDate>Tue, 28 Feb 2017 09:39:18 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[Programmation]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[ppa]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=22573</guid>
		<description><![CDATA[La toute première version de Python 3.6 avait <a href="https://bugs.python.org/issue29208">un bug</a> assez vicieux qui ne se manifestait que sous certaines conditions, généralement dans un daemon sur un serveur, et en important certains modules qui finissent par déclencher par réaction en chaîne l'usage de <code>random</code>.
]]></description>
				<content:encoded><![CDATA[<p>La toute première version de Python 3.6 avait <a href="https://bugs.python.org/issue29208">un bug</a> assez vicieux qui ne se manifestait que sous certaines conditions, généralement dans un daemon sur un serveur, et en important certains modules qui finissent par déclencher par réaction en chaîne l&#8217;usage de <code>random</code>.</p>
<p><code>django</code> est concerné.</p>
<p>On tombait dessus généralement assez tard, à la mise en prod, avec un message cryptique:</p>
<pre> 
BlockingIOError: [Errno 11] Resource temporarily unavailable 
  
 The above exception was the direct cause of the following exception: 

Traceback (most recent call last): 
   .... <- des imports de votre code qui ne font rien de mal
   File "/usr/local/lib/python3.6/site-packages/pkg_resources/__init__.py", line 36, in <module> 
     import email.parser 
   File "/usr/local/lib/python3.6/email/parser.py", line 12, in <module> 
     from email.feedparser import FeedParser, BytesFeedParser 
   File "/usr/local/lib/python3.6/email/feedparser.py", line 27, in <module> 
     from email._policybase import compat32 
   File "/usr/local/lib/python3.6/email/_policybase.py", line 9, in <module> 
     from email.utils import _has_surrogates 
   File "/usr/local/lib/python3.6/email/utils.py", line 28, in <module> 
     import random 
   File "/usr/local/lib/python3.6/random.py", line 742, in <module> 
     _inst = Random() 
 SystemError: <class 'random.Random'> returned a result with an error set 
</pre>
<p>Cela a été corrigé rapidement, et le binaire patché ajoute juste un &#8220;+&#8221; à sa version:</p>
<pre lang="bash">$ python --version
Python 3.6.0+</pre>
<p>En théorie vous ne pouvez pas tomber dessus, tous les liens de téléchargement ont été mis à jour, les distributions ont changé leurs dépôts, etc.</p>
<p>Mais hier je me suis fait bien niqué, et j&#8217;ai perdu 1h à debugguer cette surprise qui n&#8217;avait aucun sens (puisque mon code allait bien) : les bugs dans les binaires officiels sont rares et c&#8217;est le dernier endroit où je cherche.</p>
<p>En effet, certaines sources non-officielles pour installer Python n&#8217;ont pas été mises à jour, et c&#8217;est le cas du très populaire PPA <code>deadsnakes</code>.</p>
<p>Si vous avez installé Python 3.6 en faisant :</p>
<pre lang="bash">sudo add-apt-repository ppa:fkrull/deadsnakes
sudo apt-get update
sudo apt-get install python3.6</pre>
<p>vous l&#8217;avez dans le cul.</p>
<p>Il existe un PPA plus à jour si vous avez besoin de corriger le tir :</p>
<pre lang="bash">sudo add-apt-repository ppa:jonathonf/python-3.6
sudo apt-get update
sudo apt-get install python3.6</pre>
<p>Donc si vous avez compilé Python à la main ou utilisé un PPA, assurez-vous bien d&#8217;avoir la bonne version, et sinon upgradez. En attendant j&#8217;ai un bug report à faire à <code>deadsnakes</code>&#8230;</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/blockingioerror-errno-11-resource-temporarily-unavailable-pour-python-3-6/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">22573</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2017/02/HGk9X0b.jpg" length="82072" type="image/jpg" />	</item>
		<item>
		<title>Passer son compte linux en superuser postgres</title>
		<link>http://sametmax.com/passer-son-compte-linux-en-superuser-postgres/</link>
		<comments>http://sametmax.com/passer-son-compte-linux-en-superuser-postgres/#comments</comments>
		<pubDate>Fri, 15 Jan 2016 15:27:22 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[linux]]></category>
		<category><![CDATA[postgres]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=17820</guid>
		<description><![CDATA[Dans la config par défaut, les roles postgres matches les utilisateurs système sous Linux. AU départ, le seul le seul super utilisateur est "postgres", et à chaque fois qu'on veut lancer <code>psql</code> pour faire de l'admin il faut se connecter avec ce user.]]></description>
				<content:encoded><![CDATA[<p>Dans la config par défaut, les roles postgres matchent les utilisateurs système sous Linux. Au départ, le seul super utilisateur est &#8220;postgres&#8221;, et à chaque fois qu&#8217;on veut lancer <code>psql</code> pour faire de l&#8217;admin il faut se connecter avec ce user.</p>
<p>Pour se simplifier la vie en dev:</p>
<pre lang="bash"># on se log come "postgres"
sudo -i -u postgres # sous les debian likes. sinon "su" marche aussi
# on créé un utilisateur
createuser --interactive # et on dit "oui" quand il demande de créer un super user
# on créé une db à son nom
createdb ton_username</pre>
<p>Et voilà, on peut utiliser <code>psql</code> depuis son compte.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/passer-son-compte-linux-en-superuser-postgres/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">17820</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2016/01/JWrp8zh.jpg" length="513013" type="image/jpg" />	</item>
		<item>
		<title>Mon prompt bash est tout cassé !</title>
		<link>http://sametmax.com/mon-prompt-bash-est-tout-casse/</link>
		<comments>http://sametmax.com/mon-prompt-bash-est-tout-casse/#comments</comments>
		<pubDate>Thu, 14 Jan 2016 09:43:33 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[git]]></category>
		<category><![CDATA[prompt]]></category>
		<category><![CDATA[virtualenv]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=17806</guid>
		<description><![CDATA[Ça m'était déjà arrivé plusieurs fois après avoir ajouté mon env virtuel et ma branch git dans mon prompt : soudainement il se met à faire n'importe quoi. Des mixes de caratères, des sauts de ligne qui se font pas, la fusion de la ligne de commande sur elle-même.]]></description>
				<content:encoded><![CDATA[<p>Ça m’était déjà arrivé plusieurs fois après avoir ajouté mon env virtuel et ma branch git dans mon prompt : soudainement il se met à faire n’importe quoi. Des mixes de caractères, des sauts de ligne qui se font pas, la fusion de la ligne de commande sur elle-même.</p>
<p>Inutilisable.</p>
<p>Aujourd’hui plutôt que de subir le problème, j’ai cherché une solution, <a href="http://superuser.com/questions/367275/linux-coloring-bash-prompt-will-break-carriage-return">et pouf</a> : quand on utilise des couleurs dans son prompt, il faut entourer tout le balisage de <code>[]</code>.</p>
<p>Mais le balisage qui colore le prompt est composé de séquences d’échappements, qui contiennent aussi <code>[]</code>, donc il faut mettre des anti-slash.</p>
<p>Du coup on passe de ça :</p>
<p><code>export PS1="\[\033[01;34m\]\$(basename '$VIRTUAL_ENV')\e[0m $PS1"</code></p>
<p>à :</p>
<p><code>export PS1="\[\033[01;34m\]\$(basename '$VIRTUAL_ENV')[\e[0m] $PS1"<br />
</code></p>
<p>à la solution qui marche :</p>
<p><code>export PS1="\[\033[01;34m\]\$(basename '$VIRTUAL_ENV')\[\e[0m\] $PS1"</code></p>
<p>Évidemment à appliquer à tous les codes d’échappement chelou qu’on a réparti un peu partout.</p>
<p>J’ai un tampon prêt à tirer pour le premier qui me parle de zsh.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/mon-prompt-bash-est-tout-casse/feed/</wfw:commentRss>
		<slash:comments>24</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">17806</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2016/01/mJT7sDs.jpg" length="657543" type="image/jpg" />	</item>
		<item>
		<title>On a tenté de nous hacker 0bin</title>
		<link>http://sametmax.com/on-a-tente-de-nous-hacker-0bin/</link>
		<comments>http://sametmax.com/on-a-tente-de-nous-hacker-0bin/#comments</comments>
		<pubDate>Sun, 20 Dec 2015 09:36:38 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[0bin]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[meta]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[security]]></category>
		<category><![CDATA[zerobin]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=17160</guid>
		<description><![CDATA[Je suis tombé sur un dossier bizarre en me balandant dans le dossier contenant tous les pastes de 0bin.net.]]></description>
				<content:encoded><![CDATA[<p>En me baladant dans l’arbo de <a href="http://0bin.net">0bin.net</a> pour retirer un dox qu’on m’avait signalé je suis tombé sur un dossier au nom bizarre :</p>
<pre lang="bash"># ls -l
total 4
4 drwxr-xr-x 7 root root 4096 sept. 24  2014 --</pre>
<p>Hum, voilà qui n’est pas pratique à analyser depuis le bash. Et pourquoi j’ai ce dossier-là d’ailleurs ?</p>
<p>Regardons ce qu’il y a dedans :</p>
<pre lang="bash">
# python -c "import os; os.rename('--', "strange_dir")"
# ls strange_dir/
3Q  Dk  k5  Oh  -u</pre>
<p>Oh, y a un dossier nommé &#8220;-u&#8221;&#8230;</p>
<p>A ce stade-là, j’ai juste supprimé le truc.</p>
<p>Et j’ai réalisé : on crée les dossiers de l’arbo en fonction du nom du paste, qui est une clé générée côté client, et donc fournie par un code JavaScript non trusté.</p>
<p>Du coup l’attaqueur nous a sans doute passé une commande bash comme nom de fichier. J’imagine, espérant qu’on fabriquait le fichier avec une exécution shell. Comme on utilise le module os pour le faire, je pense que ça n’a eu aucun impact.</p>
<p>J’espère :)</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/on-a-tente-de-nous-hacker-0bin/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">17160</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2015/12/9eFBCaD.jpg" length="670682" type="image/jpg" />	</item>
		<item>
		<title>Désactiver un service dans Ubuntu 14.04</title>
		<link>http://sametmax.com/desactiver-un-service-dans-ubuntu-14-04/</link>
		<comments>http://sametmax.com/desactiver-un-service-dans-ubuntu-14-04/#comments</comments>
		<pubDate>Tue, 25 Aug 2015 11:25:59 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[daemon]]></category>
		<category><![CDATA[linux]]></category>
		<category><![CDATA[service]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=16801</guid>
		<description><![CDATA[Quand on installe un service, Ubuntu le lance automatiquement, et installe de quoi le faire démarer à chaque boot de la machine. Si c&#8217;est votre machine de dev, vous ne voulez peut être pas qu&#8217;Apache, Nginx, Redis, MySQL, ElasticSearch, Solr, Supervisor, Postgres, Docker, et MongoDB soient up à chaque fois tous en même temps alors [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Quand on installe un service, Ubuntu le lance automatiquement, et installe de quoi le faire démarer à chaque boot de la machine.</p>
<p>Si c&#8217;est votre machine de dev, vous ne voulez peut être pas qu&#8217;Apache, Nginx, Redis, MySQL, ElasticSearch, Solr, Supervisor, Postgres, Docker, et MongoDB soient up à chaque fois tous en même temps alors que vous voulez juste vous palucher sur youjizz.</p>
<p>La plupart des scripts de démarrage sont dans /etc/initd.d:</p>
<pre lang="bash">ls /etc/init.d
acpid           brltty             grub-common  lpd         pppd-dns      resolvconf   skeleton           unattended-upgrades
anacron         console-setup      halt...</pre>
<p>Mais ces scripts sont lancés parce qu&#8217;ils sont symlinkés dans un des répertoires <code>/etc/rcX</code>: </p>
<pre lang="bash">ls /etc/rc*.d/*apache*
/etc/rc0.d/K80apache2  /etc/rc5.d/K80apache2  /etc/rc6.d/K80apache2</pre>
<p>Ouai, j&#8217;ai encore des clients qui utilisent apache. Certains utilisent même Tomcat.</p>
<p>Pour désactiver le démarrage automatique, vous pouvez essayer bourinement la suppression des liens :</p>
<pre lang="bash">sudo rm $(ls /etc/rc*.d/*apache*) </pre>
<p>Ça marche. </p>
<p>Solution plus pratique, utiliser la commande <code>update-rc.d</code>, qui n&#8217;est pas faite pour l&#8217;utilisation par les humains, mais fuck it :</p>
<pre lang="bash">sudo update-rc.d -f apache2 remove</pre>
<p>Ça supprime aussi tous les liens. <code>sudo update-rc.d -f apache2 disable</code> devrait le faire moins bourinement mais ne marche pas sur ma machine.</p>
<p>Pour inverser la tendance :</p>
<pre lang="bash">sudo update-rc.d apache2 defaults</pre>
<p>(ou enable si par miracle ça marche pour vous)</p>
<p>Enfin, si le cœur vous en dit:</p>
<pre lang="bash">sudo update-rc.d -f apache2 remove
sudo sysv-rc-conf</pre>
<p>Vous donnera une joli interface curse pour le faire plus visuellement.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/desactiver-un-service-dans-ubuntu-14-04/feed/</wfw:commentRss>
		<slash:comments>11</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">16801</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2015/08/JkC3vWe.gif" length="963671" type="image/jpg" />	</item>
	</channel>
</rss>
