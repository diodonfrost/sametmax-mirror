<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" >

<channel>
	<title>pdb &#8211; Sam &amp; Max</title>
	<atom:link href="http://sametmax.com/tag/pdb/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Thu, 05 Sep 2019 08:22:03 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.9.7</generator>
<site xmlns="com-wordpress:feed-additions:1">32490438</site>	<item>
		<title>Breakpoint conditionnels</title>
		<link>http://sametmax.com/breakpoint-conditionnels/</link>
		<comments>http://sametmax.com/breakpoint-conditionnels/#comments</comments>
		<pubDate>Wed, 04 Nov 2015 06:56:11 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[debug]]></category>
		<category><![CDATA[pdb]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=16993</guid>
		<description><![CDATA[Quand vous lancez pdb, il est parfois intéressant stopper le programme à un endroit donné sous une certaine condition. ]]></description>
				<content:encoded><![CDATA[<p>Quand vous lancez pdb, il est parfois intéressant stopper le programme à un endroit donné sous une certaine condition. En cela, on peut utiliser un if:</p>
<pre lang="python">if truc:
    import pdb; pdb.set_trace()
</pre>
<p>Mais il est aussi possible de le faire pendant qu&#8217;on est en train d&#8217;utiliser le debugger grace à la commande &#8220;b&#8221; :</p>
<p><code>b 50, age == 18</code></p>
<p>Ceci va mettre un breakpoint à la ligne 50 qui s&#8217;activera uniquement si age vaut 18.</p>
<p>Des fois que ça serve&#8230;</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/breakpoint-conditionnels/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">16993</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2015/11/tumblr_nuz50aDL1F1r539hzo1_500.jpg" length="61930" type="image/jpg" />	</item>
		<item>
		<title>Lancer pdb dès qu&#8217;une exception a lieu</title>
		<link>http://sametmax.com/lancer-pdb-des-quune-exception-a-lieu/</link>
		<comments>http://sametmax.com/lancer-pdb-des-quune-exception-a-lieu/#comments</comments>
		<pubDate>Fri, 10 Apr 2015 10:08:23 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[debug]]></category>
		<category><![CDATA[exception]]></category>
		<category><![CDATA[pdb]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=16055</guid>
		<description><![CDATA[Vous vous souvenez de excepthook et de pdb ? Mélangeons les deux ! import sys import traceback import pdb def pdb_post_mortem(exc_type, exc_val, exc_tb): # On affiche l'exception histoire de savoir ce qu'on debug print("".join(traceback.format_exception(exc_type, exc_val, exc_tb))) # On balance pdb en mode post mortem, c'est à dire qu'il va se lancer # malgré le fait [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Vous vous souvenez de <a href="http://sametmax.com/gestion-des-erreurs-en-python/">excepthook</a> et de <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">pdb</a> ?</p>
<p>Mélangeons les deux !</p>
<pre lang="python">

import sys
import traceback
import pdb

def pdb_post_mortem(exc_type, exc_val, exc_tb):
    # On affiche l'exception histoire de savoir ce qu'on debug
    print("".join(traceback.format_exception(exc_type, exc_val, exc_tb)))
    # On balance pdb en mode post mortem, c'est à dire qu'il va se lancer
    # malgré le fait que le programme ne marche plus, donnant accès
    # au contexte qu'il y avait juste avant que ça foire
    pdb.post_mortem(exc_tb)

# On dit à python de lancer cette fonction quand il plante
sys.excepthook = pdb_post_mortem

# On fait planter Python histoire de voir que ça marche bien

def boom():
    a = 1
    b = a / 0
boom()
</pre>
<p>Et si quand ça plante, Python nous pond la stack trace, puis nous lance un joli prompt de debugging qui donne accès à ce qu&#8217;on avait en mémoire just avant que la VM ne décède :</p>
<pre>Traceback (most recent call last):
  File "test.py", line 16, in <module>
    boom()
  File "test.py", line 14, in boom
    b = a / 0
ZeroDivisionError: integer division or modulo by zero

> /home/sam/Bureau/test.py(14)test()
-> a = 1 / 0
(Pdb) 1
(Pdb) print a
1</pre>
<p>C&#8217;est plus ou moins l&#8217;équivalent de lancer son programme manuellement avec :</p>
<pre lang="bash">python -m pdb programme.py
</pre>
<p>L&#8217;avantage de la première forme, c&#8217;est qu&#8217;on peut le setter et l&#8217;oublier, on faire une config un peu plus custom. L&#8217;avantage de la deuxième forme, c&#8217;est que c&#8217;est juste une ligne à taper, et en prime si on fait <code>c</code>, le programme redémarre automatiquement.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/lancer-pdb-des-quune-exception-a-lieu/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">16055</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2015/04/zg1kTnr.jpg" length="44727" type="image/jpg" />	</item>
		<item>
		<title>Debugger Python à distance avec rpdb</title>
		<link>http://sametmax.com/debugger-python-a-distance-avec-rpdb/</link>
		<comments>http://sametmax.com/debugger-python-a-distance-avec-rpdb/#comments</comments>
		<pubDate>Fri, 09 Jan 2015 08:33:47 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[pdb]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[telnet]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=13066</guid>
		<description><![CDATA[Vous aimez pdb parce que c&#8217;est cool. Et vous adorez pdbpp parce que c&#8217;est trop cool. Mais parfois vous n&#8217;avez pas accès à une console sur votre process : il est derrière un nginx, ou même sur une machine distante. rpdb vient résoudre ce problème en lançant un serveur telnet qui donne accès à votre [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Vous aimez <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">pdb</a> parce que c&#8217;est cool. Et vous adorez <a href="https://pypi.python.org/pypi/pdbpp/">pdbpp</a> parce que c&#8217;est trop cool.</p>
<p>Mais parfois vous n&#8217;avez pas accès à une console sur votre process : il est derrière un nginx, ou même sur une machine distante.</p>
<p><a href="https://pypi.python.org/pypi/rpdb/">rpdb</a> vient résoudre ce problème en lançant un serveur telnet qui donne accès à votre debugger.</p>
<pre lang="bash">
pip install rpdb
</pre>
<p>Puis :</p>
<pre lang="python">
import rpdb; rpdb.set_trace()
</pre>
<p>Et après vous prenez votre client telnet favoris, et vous accédez à votre débugger :</p>
<pre lang="bash">
telnet 127.0.0.1 4444
</pre>
<p>Bien entendu, si vous êtes à distance, remplacez 127.0.0.1 par l&#8217;ip de la machine. Le port est configurable également :</p>
<pre lang="python">
import rpdb
debugger = rpdb.Rpdb(port=12345)
debugger.set_trace()
</pre>
<p>Et derrière, ça lance <code>pdb</code>, donc <code>pdbpp</code> est lancé automatiquement si il est installé. Joie.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/debugger-python-a-distance-avec-rpdb/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">13066</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2015/01/Ty9Z3Pz.jpg" length="87006" type="image/jpg" />	</item>
		<item>
		<title>Lancer automatiquement le debugger à la levée d&#8217;une exception Python</title>
		<link>http://sametmax.com/lancer-automatiquement-le-debugger-a-la-lever-dune-exception-python/</link>
		<comments>http://sametmax.com/lancer-automatiquement-le-debugger-a-la-lever-dune-exception-python/#comments</comments>
		<pubDate>Tue, 04 Sep 2012 14:26:55 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[pdb]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1996</guid>
		<description><![CDATA[Si vous avez bien lu <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">l'article sur pdb</a>, vous devez être accroc à <code>set_trace()</code> pour debugger vos programmes.

Oui mais quand votre programme plante, il faut lancer l'éditeur, trouver la ligne, faire un <code>try</code>/<code>except</code>, et en plus ramer si c'est dans une boucle.

On peut faire mieux.]]></description>
				<content:encoded><![CDATA[<p>Si vous avez bien lu <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">l&#8217;article sur pdb</a>, vous devez être accroc à <code>set_trace()</code> pour debugger vos programmes.</p>
<p>Oui mais quand votre programme plante, il faut lancer l&#8217;éditeur, trouver la ligne, faire un <code>try</code>/<code>except</code>, et en plus ramer si c&#8217;est dans une boucle.</p>
<p>On peut faire mieux. Si vous avez <code>ipdb</code> et <code>ipython</code> installés (et si ce n&#8217;est pas le cas, un <code><a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a> install</code> les deux car on ne peut pas vivre sans), au lieu de lancer votre script ainsi:</p>
<pre lang="bash">python script.py</pre>
<p>Lancez le ainsi:</p>
<pre lang="bash">ipython --pdb script.py</pre>
<p>Et à la première exception, votre shell va directement s&#8217;ouvrir en mode debugger à la bonne ligne.</p>
<p>C&#8217;est pas merveilleux, ça ?</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/lancer-automatiquement-le-debugger-a-la-lever-dune-exception-python/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">1996</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2012/09/701512.jpg" length="7871" type="image/jpg" />	</item>
		<item>
		<title>Debugger en Python: les bases de pdb</title>
		<link>http://sametmax.com/debugger-en-python-les-bases-de-pdb/</link>
		<comments>http://sametmax.com/debugger-en-python-les-bases-de-pdb/#comments</comments>
		<pubDate>Sun, 27 May 2012 04:40:05 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[debug]]></category>
		<category><![CDATA[ipdb]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[pdb]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=750</guid>
		<description><![CDATA[Mettez vos prints de debug au placard, et apprenez à programmer debugger comme un homme, un vrai. Un homme qui n'a pas peur d'avoir un mug USB. Heu...]]></description>
				<content:encoded><![CDATA[<p>Mettre une série de <code>print</code> dans son programme a ses limites, et python possède nativement une excellente alternative.</p>
<p>Pour la plupart des langages, on utilise un debugger intégré dans un IDE ou un programme à part. Ou alors on se contente de fonctions telles que <code>var_dump</code> ou <code>print_r</code>. En Python, on utilise le module <code>pdb</code>.</p>
<p>Quand vous voulez savoir ce qui se passe à un endroit du programme, à la ligne précise où vous souhaitez explorer le problème, ajoutez à votre code :</p>
<pre lang="python">import pdb; pdb.set_trace()</pre>
<p>Et relancez votre programme <strong>depuis une console</strong>.</p>
<p>L&#8217;exécution du programme va alors se figer, et dans la console vous aurez accès à un shell special:</p>
<pre lang="python">(Pdb)</pre>
<h2>A quoi sert pdb</h2>
<p>Dans ce shell vous pouvez entrer deux choses:</p>
<ul>
<li>N&#8217;importe quelle expression Python qui tient sur une ligne.</li>
<li>Des commandes <code>pdb</code> speciales.</li>
</ul>
<p>Ce qui est génial, c&#8217;est que toute expression Python sera éxécutée dans le context de la ligne où le programme s&#8217;est arrêté.</p>
<p>Donc vous pouvez faire des <code>print</code>, des <code>if</code>, des <a href="http://sametmax.com/python-love-les-listes-en-intention-partie/">listes en intention</a>, bref, tous les tests que vous voulez, avec les variables du programme dans l&#8217;état où elles sont <strong>à ce moment là</strong>.</p>
<p>Vous avez accès à tout le code, y compris vos propres objets, classes et fonctions. En fait, vous avez même accès à l&#8217;import, et donc à toutes les librairies importables.</p>
<h2>L&#8217;essentiel des commandes</h2>
<p>En plus de pouvoir exécuter du Python, vous pouvez utiliser des commandes. Il y en a des nombreuses, mais vous pouvez tirer l&#8217;essentiel de <code>pdb</code> avec six d&#8217;entre elles:</p>
<ul>
<li> <code>l</code>: Liste quelques lignes de code avant et après là où vous vous trouver. Utile pour se resituer dans le contexte du programme. &#8216;l&#8217; pour &#8216;list&#8217;.</li>
<li> <code>n</code>: Exécute la ligne suivante. Vous pouvez ainsi continuer l&#8217;exécution du programme de bout en bout, ligne par ligne, et le tester en entier. &#8216;n&#8217; pour &#8216;next&#8217;.</li>
<li> <code>s</code>: Si votre ligne contient un appel de fonction ou de méthode, rentre dans à l&#8217;intérieur. &#8216;s&#8217; pour &#8216;step in&#8217;.</li>
<li> <code>r</code>: Si vous êtes dans une fonction ou une méthode, celà permet d&#8217;en sortir et de passer dans le scope du dessus. &#8216;r&#8217; pour &#8216;return&#8217;.</li>
<li><code>unt</code>: Si vous êtes à la dernière ligne d&#8217;une boucle, permet de reprendre l&#8217;exécution jusqu&#8217;à la sortie de la boucle. &#8216;unt&#8217; pour &#8216;until&#8217;.</li>
<li><code>q</code>: Quitte brutalement le programme en le faisant crasher. &#8216;q&#8217; pour &#8216;quit&#8217;.</li>
<li><code>c</code>: Quitte le debugger et continue l&#8217;exécution du programme normalement. Tous les changements que vous avez fait dans le code sont pris en compte. &#8216;c&#8217; pour &#8216;continue&#8217;.</li>
</ul>
<p>Pour utiliser une commande, il suffit de taper la lettre et d&#8217;appuyer sur <code>entrée</code>. Si vous appuyez sur <code>entrée</code> sans rien saisir, la commande précédente est exécutée, ce qui vous évitera de spammer le shell de commandes <code>n</code>.</p>
<h2>Les limites de pdb</h2>
<ul>
<li>Les commandes ont priorité sur le code Python. Vous ne pouvez donc pas assigner des variables dont le nom est en une seul lettre. C&#8217;est ennuyeux pour accéder à la variable &#8216;<code>i</code>&#8216; dans une boucle for. Dans ce cas, prefixez &#8216;<code>i</code>&#8216; par un &#8216;<code>!</code>&#8216; et il sera considéré comme du Python, et non comme une commande.</li>
<li>Si vous mettez <code>set_trace</code> dans une boucle, le debugger va se lancer à chaque tour de boucle, ce qui embrouille tout. Dans ce cas, et dans tous les cas où vous voulez que le debugger se lance à un moment particulier, utilisez un <code>if</code> ou un <code>try/except</code> pour que <code>set_trace</code> ne soit appelé que dans un cas précis.</li>
<li>Dans le cas de threads, de processus séparés, ou quand vous n&#8217;avez pas accès à <code>stdout</code>, <code>pdb</code> ne peut rien pour vous. Dans ce cas, le module <a href="http://docs.python.org/library/logging.html?highlight=logging#logging">logging</a> est votre ami.</li>
</ul>
<h2>pdb + ipython = ipdb</h2>
<p>Si vous êtes fan d&#8217;<a href="http://ipython.org/">ipython</a>, un coup de <a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a>:</p>
<pre lang="bash">pip install ipdb</pre>
<p>Et ensuite dans le programme:</p>
<pre lang="python">import ipdb; ipdb.set_trace()</pre>
<p>Vous aurez alors accès au shell de <code>pdb</code>, mais avec en prime les commandes et l&#8217;autocompletion d&#8217;ipython</p>
<h2>Mettre un break point programmatiquement en javascript</h2>
<p>Dans une moindre mesure, on peut aussi lancer un shell de debug depuis javascript. Ouvrez votre fenêtre d&#8217;outils Web intégrés au navigateur, Firebug ou équivalent.</p>
<p>Normalement il faut trouver votre script, puis la ligne, et mettre un break point.</p>
<p>Mais dans les navigateurs récents, vous pouvez juste ajouter:</p>
<pre lang="javascript">debugger;</pre>
<p>A la ligne voulue, et recharger la page. Votre outil de debuggage se mettra au break point automatiquement</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/debugger-en-python-les-bases-de-pdb/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">750</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2012/05/snake-golf-ball.jpg" length="51992" type="image/jpg" />	</item>
	</channel>
</rss>
