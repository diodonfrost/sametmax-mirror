<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" >

<channel>
	<title>startup &#8211; Sam &amp; Max</title>
	<atom:link href="http://sametmax.com/tag/startup/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Thu, 05 Sep 2019 08:22:03 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.9.7</generator>
<site xmlns="com-wordpress:feed-additions:1">32490438</site>	<item>
		<title>Exécuter du code à tout lancement de Python</title>
		<link>http://sametmax.com/executer-du-code-a-tout-lancement-de-python/</link>
		<comments>http://sametmax.com/executer-du-code-a-tout-lancement-de-python/#comments</comments>
		<pubDate>Mon, 24 Jun 2013 10:54:57 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[startup]]></category>
		<category><![CDATA[vm]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=6461</guid>
		<description><![CDATA[Mais comment lancer du code au démarrage pour Python quand on est PAS dans un shell ?]]></description>
				<content:encoded><![CDATA[<p>Je vous avais montré comment <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">lancer du code au démarrage du shell iPython</a>, et on peut faire quelque chose de similaire pour le shell Python ordinnaire avec la variable d&#8217;environnement <code>PYTHONSTARTUP</code>:</p>
<pre lang="bash">export PYTHONSTARTUP=/chemin/vers/fichier/python/a/executer/au/demarrage.py</pre>
<p>Mais comment lancer du code au démarrage pour Python quand on est PAS dans un shell ?</p>
<p>Comme pour l&#8217;<a href="http://sametmax.com/lancer-une-fonction-automatiquement-a-larret-de-python/">exécution du code à la fermeture de la VM</a>, il existe bien entendu un mécanisme pour cela.</p>
<p>Ouvez un shell, et tapez:</p>
<pre lang="python">>>> import site
>>> site.getusersitepackages()
'/home/sam/.local/lib/python2.7/site-packages'</pre>
<p>Vous obtenez ainsi le dossier des sites packages locaux, c&#8217;est à dire un dossier qui est dans le PYTHON PATH, mais uniquement pour l&#8217;utilisateur courant. Donc vous pouvez mettre dedans toute bibliothèque Python que vous voulez importable de partout, mais uniquement pour vous.</p>
<p>Dans ce dossier, créez un fichier nommé <em>usercustomize.py</em>, et voilà ! <a href="http://docs.python.org/2/tutorial/interpreter.html#the-customization-modules">Tout ce qui est dans ce fichier est automatiquement exécuté au démarrage de Python</a>.</p>
<p>Attention cependant, il est exécuté très tôt, et donc certaines choses ne sont pas encore chargées, telle que <code>sys.argv</code> ou <code>__builtin__</code>.</p>
<p>Il faut donc ruser un peut. Si vous êtes une loque qui n&#8217;aime pas taper <code>import ipdb; ipdb.set_trace()</code>, vous pouvez par exemple mettre dedans :</p>
<pre lang="python">import __builtin__

from pdb import set_trace

__builtin__.set_trace = set_trace
</pre>
<p>Et maintenant, dans votre code, vous pourrez appeler <code>set_trace()</code> de <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">pdb</a> directement, sans import, sans préfixe.</p>
<p>Attention tout de même à ce que vous allez mettre là. Si vous commencez à trop trafiquer votre installation, vos programmes pourraient marcher dessus et pas ailleurs. Testez toujours vos logiciels sur des installations de Python standards.</p>
<p>Bonus point: le <a href="http://mail.python.org/pipermail/tutor/2012-August/090729.html">code de startup d&#8217;un codeur Python scientifique</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/executer-du-code-a-tout-lancement-de-python/feed/</wfw:commentRss>
		<slash:comments>16</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">6461</post-id><enclosure url="http://sametmax.com/wp-content/uploads/2013/06/n6XG5.jpg" length="136102" type="image/jpg" />	</item>
	</channel>
</rss>
